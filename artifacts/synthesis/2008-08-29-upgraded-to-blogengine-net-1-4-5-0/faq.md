# 升級到 BlogEngine.NET 1.4.5.0 了

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是 BlogEngine.NET？
- A簡: 基於 ASP.NET 的開源部落格引擎，提供文章、留言、主題與外掛，支援檔案或資料庫儲存。
- A詳: BlogEngine.NET 是一套以 ASP.NET 為基礎的開源部落格平台，主打簡單部署與可擴充性。它提供文章與分類、留言、標籤、RSS、主題（Themes）、外掛（Extensions/Widgets）等功能，並支援以 XML 檔案或資料庫儲存內容。由於採用標準 ASP.NET 架構，能與 IIS 與 .NET 生態整合，適合自架網站或內部知識分享的部落格系統。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q5, B-Q1

Q2: 什麼是 BlogEngine.NET 1.4.5.0？
- A簡: 1.4.5.0 是當時一個穩定版更新，聚焦修正與小幅增強，升級多為檔案替換即可完成。
- A詳: BlogEngine.NET 1.4.5.0 是一個相對穩定的維護更新版本，重點通常在修補問題、改善相容性與細節優化。相對於大版本躍遷，此版本的升級多不涉及重大 API 變動，實務上常以目錄替換與設定沿用的方式完成。對使用者而言，可期望更順暢的運作與較低風險的升級流程。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, B-Q5, C-Q1

Q3: 為什麼要升級 BlogEngine.NET？
- A簡: 強化安全與穩定、修補缺陷、獲得改善與相容性提升，降低維運風險與技術債。
- A詳: 升級 BlogEngine.NET 可取得最新的安全修補、相容性改善與效能優化，減少已知缺陷造成的風險，並提升與新環境（作業系統、IIS、.NET 版本）的協同。長期停留舊版會累積技術債，升級能使外掛與主題在可預期的框架下運作，同時讓維運、備份與監控流程更標準化。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q11, B-Q11

Q4: 什麼是目錄搬移式升級？
- A簡: 以新版本檔案覆蓋或替換網站目錄，保留必要資料夾與設定，快速完成升級。
- A詳: 目錄搬移式升級是指先準備好新版本網站檔案，透過複製、替換或目錄切換的方式，將舊版站台換成新版。升級時通常保留 App_Data、上傳內容與自訂設定，再將程式檔、主題與核心套件以「xcopy」或檔案同步方式更新。此法簡單、可回滾，常見於 BlogEngine.NET 等無複雜安裝程序的框架。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q5, C-Q1, C-Q6

Q5: 為何升級常比想像中簡單？
- A簡: 因核心相容、檔案結構穩定，僅需替換目錄與保留資料即可完成多數更新。
- A詳: 在維護版本中，框架 API 與檔案結構多維持穩定，使升級僅需替換程式檔與主題資源，並保留 App_Data 等使用者資料。若外掛相容性良好，幾乎不須調整程式碼。先備份與比對設定差異後，常能以「目錄搬一搬」快速完成，這也是許多 ASP.NET 部署支援 xcopy 的原因。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q4, B-Q5, C-Q1

Q6: 什麼是 Visual SourceSafe（VSS）？
- A簡: Microsoft 的集中式版本控管系統，用於檔案版本管理、回溯與協作，現多被新工具取代。
- A詳: Visual SourceSafe 是微軟早期的集中式版本控管系統，可管理檔案版本變更、提供簽出/簽入與歷史追蹤，支援回溯特定版本。雖然現代專案多採 Git 等分散式系統，但在舊有 ASP.NET 專案，VSS 仍可能用於備份與版本追蹤，協助升級前建立還原點與差異比對。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q18, B-Q6, D-Q10

Q7: 什麼是 Volume Shadow Copy Service（VSS）？
- A簡: Windows 的檔案系統快照機制，可在運作中建立一致性備份，支援快速還原。
- A詳: Volume Shadow Copy Service 是 Windows 的快照服務，透過協調檔案系統與應用程式，建立某一時刻的一致性副本。它能在服務不中斷的情況下備份網站檔案或資料，特別適合升級前快速建立還原點。若升級出現問題，可快速還原快照，縮短中斷時間。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, C-Q2, D-Q5

Q8: 兩種 VSS（SourceSafe 與 Shadow Copy）有何差異？
- A簡: 一個是版本控管工具，一個是檔案快照服務；前者管歷史，後者做即時一致備份。
- A詳: Visual SourceSafe（版本控管）管理檔案歷史、分支與變更追蹤，適用於原始碼與設定演進；Volume Shadow Copy（快照服務）則針對系統磁碟建立時間點快照，快速備份與還原。升級前可用 SourceSafe 保留改動軌跡，再用 Shadow Copy 建立運行中站台的一致快照，形成雙重保護。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, A-Q7, C-Q2

Q9: 什麼是外掛（如 Bot Checker）？
- A簡: 外掛是延伸功能模組，如 Bot Checker 用於過濾機器人或垃圾流量與留言。
- A詳: BlogEngine.NET 透過外掛或擴充機制提供額外功能，例如防止垃圾留言、阻擋惡意爬蟲、加入小工具等。Bot Checker 類的外掛通常偵測可疑的使用者代理、行為或 IP，進而過濾或標記流量。外掛是可選的，但升級時需注意相容性與設定遷移。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q10, B-Q3, C-Q5

Q10: 為何部分外掛升級後無法直接遷移？
- A簡: 版本 API 差異、檔案路徑變更或未更新的相依，導致外掛載入與行為不相容。
- A詳: 升級雖多為檔案替換，但外掛仰賴的 API、事件與檔案結構若有調整，便可能無法直接運作。此外，外掛常依賴特定 web.config 設定或目錄路徑，版本變更後需重新配置或改寫。若外掛無人維護，建議尋找替代方案或自行調整程式碼再部署。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, C-Q5, D-Q4

Q11: 升級前應備份哪些項目？
- A簡: 備份網站根目錄、App_Data、上傳檔、web.config 與資料庫，保留還原與比對依據。
- A詳: 完整備份應包含網站根目錄（程式與主題）、App_Data（內容與設定）、使用者上傳檔、web.config 與任何外部資料庫。若可用 Volume Shadow Copy，能快速取得一致性快照；搭配版本控管保留差異記錄，有助於升級後診斷並支援快速回滾，降低中斷風險。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q7, C-Q2, C-Q6

Q12: 升級成功的指標有哪些？
- A簡: 網站正常啟動、功能完整、外掛與主題可用、日誌無異常、效能與錯誤率正常。
- A詳: 升級成功可由多面向確認：IIS 啟動無錯誤、首頁與後台可登入、文章瀏覽與搜尋正常、外掛與主題載入無例外、日誌無重大錯誤與警告、健康檢查與合成監控通過、載入時間與資源錯誤率維持在基準範圍內。亦可邀請使用者回報問題，以驗證實際使用情境。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q11, C-Q9, D-Q1

Q13: 升級與遷移有何不同？
- A簡: 升級是版本更新；遷移是搬遷環境或架構。前者多替換檔案，後者涉及搬站與相依。
- A詳: 升級通常在同一環境中將軟體版本提升，重點是替換程式與調整設定；遷移則可能搬到新伺服器、不同作業系統、IIS 或 .NET 版本，牽涉更多相依關係與測試。遷移常需要重新設定權限、網路、DNS 與資料庫連線，風險與驗證範圍較大。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q20, C-Q7, C-Q6

Q14: 為何要徵求使用者回饋？
- A簡: 使用者能揭露邊緣情境與真實痛點，補足自動測試與維運監控的盲區。
- A詳: 再完整的測試也難覆蓋所有實際情境。升級後邀請使用者留言或回報，能及早發現跨瀏覽器、語系、權限與內容呈現等邊緣問題。回饋亦可作為後續修正與優先級排序依據，逐步完善相容性與體驗。建立回報管道能形成正向迭代的維運流程。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q10, D-Q9, A-Q12

Q15: 什麼是回滾策略（Rollback）？
- A簡: 升級失敗時快速還原舊版的預案，常用目錄切換、快照還原或備份重佈署。
- A詳: 回滾策略是在升級不如預期時，能在可接受時間內恢復服務。常見方法有：事先複製舊版為 _backup 目錄，升級以新目錄佈署並切換；使用 Volume Shadow Copy 或映像檔進行還原；或以版本控管打包上一版並重新佈署。關鍵是明確步驟與回滾判準。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q6, B-Q12, D-Q1

Q16: BlogEngine.NET 常見檔案與目錄結構有哪些？
- A簡: 根目錄含程式與主題；App_Data 存內容與設定；themes、widgets 與 extensions 提供外掛樣式。
- A詳: 一般而言，根目錄包含網站程式檔、主題與靜態資源。App_Data 儲存文章、設定或資料庫檔案（視提供者而定）。themes 用於外觀樣式；widgets 與 extensions 放置小工具與擴充；uploads 或自訂資料夾存放媒體。升級時重點是保留資料與比對設定檔差異。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q1, C-Q3, B-Q9

### Q&A 類別 B: 技術原理類

Q1: BlogEngine.NET 架構如何運作？
- A簡: 以 ASP.NET 為基礎，透過 HTTP 管線、頁面與擴充載入內容，使用檔案或資料庫提供者存取。
- A詳: 技術原理說明：BlogEngine.NET 建立在 ASP.NET 管線上，請求經過 HTTP 模組與處理常式，再由頁面或控制項組合輸出。關鍵步驟或流程：路由解析、內容載入、主題渲染與外掛事件觸發。核心組件介紹：儲存提供者（XML/DB）、主題引擎、擴充模型（Extensions/Widgets）與設定管理（web.config 與 App_Data）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q1, B-Q5, B-Q3

Q2: BlogEngine.NET 的儲存機制如何運作（XML/資料庫）？
- A簡: 透過抽象儲存提供者存取內容，預設可用 XML，亦可配置資料庫以利擴充與備援。
- A詳: 技術原理說明：系統以儲存提供者抽象層存取文章、評論與設定。關鍵步驟或流程：依設定載入提供者、對應資料結構、執行 CRUD、快取結果以提升效能。核心組件介紹：XML 提供者（App_Data 下檔案）與資料庫提供者（SQL 連線與資料表）。抽象化使升級多不需改動內容層。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q16, C-Q3, D-Q3

Q3: 擴充與外掛（如 Bot Checker）是如何注入與運作？
- A簡: 外掛透過事件與擴充點註冊，於請求或內容處理階段介入，執行過濾或增強功能。
- A詳: 技術原理說明：擴充元件利用框架提供的事件（如請求前、渲染前後）或服務容器註冊介入。關鍵步驟或流程：啟動時掃描擴充目錄、載入組件、綁定事件、執行處理邏輯。核心組件介紹：擴充載入器、事件匯流排、設定存取（App_Data 或 web.config）。相容性仰賴事件與 API 穩定度。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, A-Q10, D-Q4

Q4: 主題（Themes）與資源管理如何處理？
- A簡: 透過主題目錄與樣板渲染頁面，靜態資源由 IIS 提供，支援快取與壓縮。
- A詳: 技術原理說明：主題包含樣板、CSS/JS 與資源，渲染時依配置選擇主題並合成內容。關鍵步驟或流程：載入主題檔、合併版面、綁定資料、輸出 HTML；靜態資源由 IIS 或中介層處理快取。核心組件介紹：主題引擎、資源處理器與快取策略（ETag/Last-Modified）。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q16, C-Q9, D-Q2

Q5: 目錄搬移式升級的原理與流程是什麼？
- A簡: 先準備新版本目錄，保留資料與設定，切換目錄或替換檔案，驗證後再清理。
- A詳: 技術原理說明：以檔案系統為界，將程式與資源與資料分離。關鍵步驟或流程：1. 建新目錄放新版；2. 複製舊版必要資料（App_Data、uploads）；3. 合併 web.config 差異；4. 切換 IIS 指向或目錄改名；5. 驗證與回滾判準。核心組件介紹：檔案系統、IIS 站台/虛擬目錄、設定檔管理。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q4, C-Q1, C-Q6

Q6: 使用 Visual SourceSafe 進行版本控管的流程？
- A簡: 以簽出/簽入管理變更，建立標籤備份升級點，發生問題可回溯先前版本。
- A詳: 技術原理說明：集中式版本庫保存檔案歷史。關鍵步驟或流程：建立專案庫、升級前打標籤、簽出並合併設定差異、簽入與記錄訊息、必要時回復標籤版。核心組件介紹：版本庫、標籤（Label/Tag）、差異/合併工具。雖老舊，但仍可作為升級前的變更保險。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q6, A-Q11, D-Q10

Q7: 使用 Volume Shadow Copy 快照備份的原理？
- A簡: 透過寫入器協調建立時間點一致快照，支援熱備份與快速還原。
- A詳: 技術原理說明：VSS 協調檔案系統與應用寫入器，凍結 I/O 片刻以建立一致快照。關鍵步驟或流程：準備快照、凍結、複製、解凍、驗證快照。核心組件介紹：VSS 服務、Provider、Writer。對網站升級可快速建立可還原映像，縮短停機並提升可用性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q7, C-Q2, D-Q5

Q8: web.config 變更如何觸發 ASP.NET 重載？
- A簡: web.config 變更會觸發應用程式域回收與重載，重建組態與快取。
- A詳: 技術原理說明：ASP.NET 監視 web.config 與 bin 變化，一旦改動即回收 AppDomain。關鍵步驟或流程：檢測變更、回收、重新編譯、初始化應用程式。核心組件介紹：FileChangeMonitor、AppDomain、組態系統。升級時合併設定應審慎，避免頻繁重啟與短暫中斷。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q4, D-Q7, B-Q10

Q9: App_Data 權限與 I/O 管理機制是什麼？
- A簡: 需給應用程式帳號寫入權限，避免鎖檔與存取錯誤，確保內容可讀寫。
- A詳: 技術原理說明：App_Data 常存放內容與設定，ASP.NET 以應用程式集區身分存取。關鍵步驟或流程：確認 NTFS 權限（Read/Write/Modify）、避免防毒鎖檔、採用檔案鎖策略。核心組件介紹：IIS AppPool Identity、NTFS ACL、檔案快取。升級後應驗證寫入正常以免資料遺失。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q3, D-Q5, D-Q1

Q10: 部署自動化（xcopy/PowerShell）的架構如何設計？
- A簡: 以腳本化複製、差異合併與驗證步驟，串接備份、部署、回滾與通知流程。
- A詳: 技術原理說明：以檔案複製與指令自動化流程，降低人工錯誤。關鍵步驟或流程：建立備份、複製程式、保留資料、合併設定、重啟站台、執行健康檢查。核心組件介紹：PowerShell/robocopy、差異工具、監控 API。可納入回滾與通報，形成可重複的標準流程。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: C-Q8, B-Q5, B-Q11

Q11: 相容性檢測與 Smoke Test 的流程？
- A簡: 以小集合自動測試關鍵路徑：首頁、登入、發文、搜尋與外掛載入。
- A詳: 技術原理說明：Smoke Test 驗證系統主要功能是否可運作。關鍵步驟或流程：佈署後自動檢查 HTTP 狀態、登入流程、建立/編輯文章、留言與 RSS、外掛與主題載入。核心組件介紹：健康檢查端點、腳本化測試、日誌比對。確保升級成功且可快速回滾判斷。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: C-Q9, A-Q12, D-Q1

Q12: 回滾與零停機部署的原理（目錄切換/虛擬目錄）？
- A簡: 預先佈署新版於平行目錄，切換 IIS 指向或改名，即時回退至舊版。
- A詳: 技術原理說明：以兩套平行站台（Blue/Green）切換實現低中斷。關鍵步驟或流程：預佈署新版、同步資料、切換目錄或虛擬目錄/應用程式指向、監控驗證、若異常即回切。核心組件介紹：IIS 虛擬目錄、DNS 或反向代理、檔案系統。簡單有效於 BlogEngine.NET 的升級。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: C-Q6, B-Q5, A-Q15

Q13: 錯誤記錄與診斷管線如何設計？
- A簡: 以日誌與例外攔截收集錯誤，輔以請求追蹤與事件紀錄，快速定位問題。
- A詳: 技術原理說明：透過 try-catch、全域錯誤處理與記錄器收集例外與警告。關鍵步驟或流程：攔截錯誤、寫入檔案或事件檢視器、關鍵資訊（URL、Stack、使用者）。核心組件介紹：log4net/內建追蹤、IIS 失敗要求追蹤（FREB）。升級後優先檢閱日誌以判斷相容性議題。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q1, D-Q4, C-Q9

Q14: 安全強化：升級時如何避免舊檔遺留風險？
- A簡: 以乾淨佈署與白名單同步，移除廢檔與預設帳密，最小權限運行。
- A詳: 技術原理說明：舊檔可能暴露敏感資訊或引入漏洞。關鍵步驟或流程：以新目錄乾淨佈署、白名單複製必要資料、掃描憑證與備份檔、重設預設帳密、最小化 NTFS 權限。核心組件介紹：檔案清單、ACL、機敏掃描。確保升級同時改善整體安全性。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q9, C-Q1, D-Q9

### Q&A 類別 C: 實作應用類（10題）

Q1: 如何以目錄搬移方式升級到 1.4.5.0？
- A簡: 先備份，建立新目錄放新版，保留 App_Data 與上傳，合併設定，切換目錄並驗證。
- A詳: 具體實作步驟：1) 備份整站與資料庫；2) 解壓 1.4.5.0 至新目錄；3) 複製舊站 App_Data、uploads 等資料；4) 比對並合併 web.config 差異；5) 將 IIS 指向新目錄或改名切換；6) 驗證功能與日誌。關鍵程式碼片段或設定：使用 robocopy 同步資料 robocopy Old\App_Data New\App_Data /E。注意事項與最佳實踐：保留回滾目錄、離峰操作、先跑 Smoke Test。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q5, A-Q11, C-Q6

Q2: 如何使用 VSS/Shadow Copy 備份升級前網站？
- A簡: 使用 SourceSafe 做版本點，另以 Shadow Copy 建立磁碟快照，雙重保護可快速回復。
- A詳: 具體實作步驟：VSS（SourceSafe）建立標籤「pre-upgrade-1450」；Shadow Copy 建立即時快照或使用 Windows Server 備份。關鍵指令：wbadmin start backup -backupTarget:E: -include:C:\Site -quiet。注意事項與最佳實踐：驗證還原可行性、確保 App_Data 未被防毒鎖定、標註備份時間點。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, A-Q7, B-Q7

Q3: 如何保留 App_Data 與內容不遺失？
- A簡: 僅替換程式與主題，App_Data 與上傳資料夾原樣複製或指向，並檢查權限。
- A詳: 具體實作步驟：1) 停止站台短暫寫入；2) 複製舊站 App_Data、uploads 至新站；3) 檢查 NTFS 權限（IIS AppPool 身分具 Modify）；4) 啟動站台測試。關鍵設定：確保 web.config 未改變 provider 設定。注意事項：避免混用舊/新版本資料結構，必要時先備份後逐步驗證讀寫。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q9, D-Q3, D-Q5

Q4: 如何處理 web.config 差異合併？
- A簡: 以差異工具比對新舊設定，保留必要自訂鍵值，遵循新版本節點結構。
- A詳: 具體實作步驟：1) 以 WinMerge/Beyond Compare 比對新舊 web.config；2) 合併 appSettings、自訂節點；3) 留意 httpModules/handlers 與 trust/compilation 變更；4) 啟動後檢查事件檢視器。關鍵片段：<appSettings>與<system.webServer>。注意事項：任何變更都會觸發應用重載，合併後先在測試環境驗證。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, D-Q7, C-Q1

Q5: 如何處理 Bot Checker 外掛的遷移或替代？
- A簡: 先確認相容性與 API 變更，不相容則尋替代外掛，或暫時停用並以 IIS 規則補強。
- A詳: 具體實作步驟：1) 檢查外掛版本與相容說明；2) 若失敗，改用新版相容外掛；3) 或在 web.config 加入 IP/UA 篩選規則；4) 監控垃圾留言量調整。關鍵設定：<system.webServer><rewrite> 規則或 Request Filtering。注意事項：先於測試環境驗證，避免誤攔正常使用者。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q9, A-Q10, D-Q4

Q6: 如何建立快速回滾方案（目錄切換）？
- A簡: 保留舊版為 _backup，新版於 _release，切換目錄名稱或 IIS 指向即可回退。
- A詳: 具體實作步驟：1) 部署新版於 C:\Site_release；2) 舊版改為 C:\Site_backup；3) 切換 IIS 實體路徑至 _release；4) 若異常，改回 _backup。關鍵指令：appcmd set vdir /vdir.name:"Default Web Site/" /physicalPath:"C:\Site_release"。注意事項：確保資料夾權限一致、回滾判準明確並有測試清單。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q12, A-Q15, C-Q1

Q7: 如何設定 IIS 與應用程式集區確保相容？
- A簡: 選擇對應 .NET 版本與模式，設定應用程式集區身分與 32/64 位元相容。
- A詳: 具體實作步驟：1) 在 IIS 指定正確 .NET CLR 版本；2) 設 Pipeline 模式（整合/傳統視需求）；3) 設定 AppPool Identity；4) 配置 32-bit 應用相容（如需）。關鍵設定：Advanced Settings 中 .NET CLR、Enable 32-Bit Applications。注意事項：變更後重啟 AppPool，並驗證 web.config 的 handlers 。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, D-Q8, C-Q4

Q8: 如何撰寫自動化部署腳本（PowerShell/xcopy）？
- A簡: 腳本化備份、同步、合併與重啟流程，加入檢查與回滾節點提升可靠性。
- A詳: 具體實作步驟：1) 壓縮備份舊站；2) 複製新版至暫存；3) 同步 App_Data；4) 停站切換；5) 健康檢查；6) 若失敗回滾。關鍵程式碼：robocopy .\new .\site /MIR /XF web.config; iisreset /restart。注意事項：分階段執行、記錄日誌、預先乾跑（dry-run）驗證差異。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q10, C-Q6, A-Q12

Q9: 升級後如何驗證功能完整性？
- A簡: 以清單檢查首頁、登入、發文、留言、RSS、外掛與主題，並審閱錯誤日誌。
- A詳: 具體實作步驟：1) 手動與自動化檢查關鍵頁；2) 建立測試文章與留言；3) 檢視 RSS 與搜尋；4) 驗證外掛與主題載入；5) 審閱應用日誌與 IIS FREB。關鍵設定：監控 HTTP 5xx/4xx、Resource 404。注意事項：與業務驗收（UAT）協作，並設定一段觀察期追蹤指標。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q11, A-Q12, D-Q1

Q10: 如何通知使用者並收集升級回饋？
- A簡: 事前公告維護，事後開放回報表單或留言，集中處理並回推修正時程。
- A詳: 具體實作步驟：1) 發佈維護時段與影響說明；2) 升級完成後張貼公告；3) 提供回報表單/留言區；4) 彙整回饋並標註優先級；5) 更新 FAQ。關鍵內容：聯絡方式、已知問題清單。注意事項：保持透明、快速迭代與回應，提高使用者信任與參與。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q14, C-Q9, D-Q9

### Q&A 類別 D: 問題解決類（10題）

Q1: 升級後網站出現 500 錯誤怎麼辦？
- A簡: 先查看應用與 IIS 日誌，回溯最近變更，檢查 web.config 與相依，必要時回滾。
- A詳: 問題症狀描述：頁面 500/伺服器錯誤。可能原因分析：web.config 合併錯誤、外掛不相容、組件缺失或 App_Data 權限不足。解決步驟：1) 啟用詳細錯誤/檢查日誌；2) 比對 web.config；3) 暫停外掛；4) 驗證權限與相依 DLL；5) 仍無解則回滾。預防措施：先在測試環境演練與自動化驗證。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, C-Q4, A-Q15

Q2: 升級後出現 404 或靜態資源遺失？
- A簡: 檢查資源路徑與主題目錄、IIS 路由與重寫規則，確認檔案已部署且權限正確。
- A詳: 問題症狀描述：圖片/CSS/JS 404。可能原因分析：主題資源未同步、虛擬目錄指向錯誤、URL Rewrite 改動。解決步驟：1) 驗證檔案存在；2) 比對主題與資源目錄；3) 檢查 web.config rewrite；4) 清除瀏覽器與伺服器快取。預防措施：採白名單同步、升級後進行資源檢查清單。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, C-Q1, B-Q14

Q3: 升級後文章或留言消失怎麼處理？
- A簡: 確認 App_Data/資料庫連線，回復備份或快照，檢查儲存提供者設定是否變更。
- A詳: 問題症狀描述：內容缺漏或不顯示。可能原因分析：App_Data 未正確複製、資料庫連線錯誤、提供者改動。解決步驟：1) 驗證 provider 配置；2) 檢查 App_Data 實體檔；3) 從備份/快照還原；4) 檢查權限與鎖檔。預防措施：升級前後執行內容對帳與備份演練。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, C-Q3, A-Q11

Q4: 外掛（如 Bot Checker）無法載入或失效？
- A簡: 先停用問題外掛，檢查版本相容與 API 變更，改用相容替代或調整設定。
- A詳: 問題症狀描述：外掛例外、功能不生效。可能原因分析：API 差異、設定缺漏、路徑改變。解決步驟：1) 停用外掛；2) 檢查相容說明；3) 重新配置或替代；4) 監控影響（如垃圾量）。預防措施：維護外掛清單、升級前列相容性評估與替代方案備案。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, B-Q3, C-Q5

Q5: App_Data 權限錯誤導致無法寫入？
- A簡: 設定 AppPool 身分具 Modify 權限，避免防毒鎖檔，確認磁碟配額與唯讀屬性。
- A詳: 問題症狀描述：儲存失敗、日誌 I/O 例外。可能原因分析：NTFS 權限不足、防毒攔截、唯讀。解決步驟：1) 指派 IIS_IUSRS 或自訂身分 Modify 權限；2) 排除防毒；3) 解除唯讀；4) 測試寫入。預防措施：部署前檢查 ACL、建立健康檢查寫入測試。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q9, C-Q3, D-Q1

Q6: 升級後出現中文亂碼或編碼問題？
- A簡: 確認 web.config globalization 設定與檔案編碼一致，檢查資料來源與輸出標頭。
- A詳: 問題症狀描述：中文顯示為問號/亂碼。可能原因分析：globalization 設定錯誤、檔案/資料庫編碼不一致、HTTP 標頭錯誤。解決步驟：1) 設定 <globalization requestEncoding/responseEncoding="utf-8">；2) 確認檔案為 UTF-8；3) 驗證資料庫排序與連線字串。預防措施：規範統一 UTF-8 與測試國際化頁面。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q4, B-Q8, C-Q9

Q7: web.config 修改導致頻繁重啟怎麼辦？
- A簡: 減少動態變更，集中一次合併；確保監控不觸發檔案寫入，避免循環回收。
- A詳: 問題症狀描述：站台頻繁回收、效能不穩。可能原因分析：頻繁寫入 web.config 或 bin、監控/備份觸檔。解決步驟：1) 合併設定一次到位；2) 排除監控觸發；3) 以外部設定檔/環境變數管理；4) 觀察 AppDomain 回收事件。預防措施：部署窗口一次完成設定與重啟。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, C-Q4, B-Q10

Q8: IIS 應用程式集區啟動失敗如何診斷？
- A簡: 查看事件檢視器與 IIS 日誌，檢查 .NET 版本、身分權限與組件相依是否匹配。
- A詳: 問題症狀描述：站台無法啟動/503。可能原因分析：CLR 版本不符、身分無權限、組件缺失。解決步驟：1) 驗證 AppPool CLR 與管線模式；2) 測試以 LocalSystem 啟動判斷權限；3) 安裝缺失組件；4) 修正指向目錄。預防措施：建立環境檢查清單並事前演練。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q7, B-Q10, C-Q1

Q9: 部署後快取舊資源未更新怎麼辦？
- A簡: 調整資源版本參數與快取標頭，清除 CDN/瀏覽器快取，確保新檔案被抓取。
- A詳: 問題症狀描述：樣式或腳本仍顯示舊版。可能原因分析：瀏覽器/CDN 快取、ETag/Last-Modified 未更新。解決步驟：1) 對資源加版本參數 ?v=時間戳；2) 調整 Cache-Control；3) 清除 CDN；4) 發佈快取刷新通知。預防措施：建立自動版本化管線與部署後清理機制。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q4, B-Q19, C-Q10

Q10: 使用 Visual SourceSafe 遇到檔案鎖定如何處理？
- A簡: 釋放簽出、解除唯讀，必要時由管理員強制回收，確保部署可覆寫檔案。
- A詳: 問題症狀描述：檔案無法覆寫/唯讀。可能原因分析：VSS 簽出未釋放、NTFS 唯讀屬性。解決步驟：1) 檢查誰簽出；2) 要求簽入或管理員撤銷；3) 移除唯讀屬性 attrib -r /s；4) 重新部署。預防措施：部署前解鎖，或改以乾淨新目錄部署避免鎖檔。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q6, C-Q1, B-Q6

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是 BlogEngine.NET？
    - A-Q2: 什麼是 BlogEngine.NET 1.4.5.0？
    - A-Q3: 為什麼要升級 BlogEngine.NET？
    - A-Q4: 什麼是目錄搬移式升級？
    - A-Q5: 為何升級常比想像中簡單？
    - A-Q6: 什麼是 Visual SourceSafe（VSS）？
    - A-Q7: 什麼是 Volume Shadow Copy Service（VSS）？
    - A-Q8: 兩種 VSS（SourceSafe 與 Shadow Copy）有何差異？
    - A-Q9: 什麼是外掛（如 Bot Checker）？
    - A-Q11: 升級前應備份哪些項目？
    - A-Q12: 升級成功的指標有哪些？
    - A-Q16: BlogEngine.NET 常見檔案與目錄結構有哪些？
    - B-Q4: 主題（Themes）與資源管理如何處理？
    - C-Q1: 如何以目錄搬移方式升級到 1.4.5.0？
    - C-Q9: 升級後如何驗證功能完整性？

- 中級者：建議學習哪 20 題
    - B-Q1: BlogEngine.NET 架構如何運作？
    - B-Q2: BlogEngine.NET 的儲存機制如何運作（XML/資料庫）？
    - B-Q3: 擴充與外掛（如 Bot Checker）是如何注入與運作？
    - B-Q5: 目錄搬移式升級的原理與流程是什麼？
    - B-Q7: 使用 Volume Shadow Copy 快照備份的原理？
    - B-Q8: web.config 變更如何觸發 ASP.NET 重載？
    - B-Q9: App_Data 權限與 I/O 管理機制是什麼？
    - B-Q10: 部署自動化（xcopy/PowerShell）的架構如何設計？
    - B-Q11: 相容性檢測與 Smoke Test 的流程？
    - B-Q12: 回滾與零停機部署的原理（目錄切換/虛擬目錄）？
    - B-Q13: 錯誤記錄與診斷管線如何設計？
    - B-Q14: 安全強化：升級時如何避免舊檔遺留風險？
    - C-Q2: 如何使用 VSS/Shadow Copy 備份升級前網站？
    - C-Q3: 如何保留 App_Data 與內容不遺失？
    - C-Q4: 如何處理 web.config 差異合併？
    - C-Q5: 如何處理 Bot Checker 外掛的遷移或替代？
    - C-Q6: 如何建立快速回滾方案（目錄切換）？
    - C-Q7: 如何設定 IIS 與應用程式集區確保相容？
    - C-Q8: 如何撰寫自動化部署腳本（PowerShell/xcopy）？
    - C-Q10: 如何通知使用者並收集升級回饋？

- 高級者：建議關注哪 15 題
    - A-Q10: 為何部分外掛升級後無法直接遷移？
    - A-Q13: 升級與遷移有何不同？
    - A-Q15: 什麼是回滾策略（Rollback）？
    - B-Q5: 目錄搬移式升級的原理與流程是什麼？
    - B-Q7: 使用 Volume Shadow Copy 快照備份的原理？
    - B-Q8: web.config 變更如何觸發 ASP.NET 重載？
    - B-Q12: 回滾與零停機部署的原理（目錄切換/虛擬目錄）？
    - B-Q14: 安全強化：升級時如何避免舊檔遺留風險？
    - D-Q1: 升級後網站出現 500 錯誤怎麼辦？
    - D-Q3: 升級後文章或留言消失怎麼處理？
    - D-Q4: 外掛（如 Bot Checker）無法載入或失效？
    - D-Q5: App_Data 權限錯誤導致無法寫入？
    - D-Q7: web.config 修改導致頻繁重啟怎麼辦？
    - D-Q8: IIS 應用程式集區啟動失敗如何診斷？
    - D-Q9: 部署後快取舊資源未更新怎麼辦？