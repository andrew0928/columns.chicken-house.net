# DevOpsDays Taipei 2025 - 從 Prompt 到 Product

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

A-Q1: 什麼是「從 Prompt 到 Product」？
- A簡: 從雛形提示到可維運、可量測、可上線之AI產品的全流程方法。
- A詳: 「從 Prompt 到 Product」指的是把原型階段的提示設計，逐步轉化為能被實際使用、可維運的 AI 產品的完整方法學。它涵蓋需求定義、提示工程、資料與模型策略（如 RAG 或微調）、離線/線上評估、成本與安全治理、觀測性、持續交付、灰度上線與迭代。核心價值在於把創意變成可靠、可重複、可度量、可合規的服務，縮短從靈感到價值落地的距離。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q4, A-Q5, B-Q1

A-Q2: 為何 DevOps 在 LLM 產品化中關鍵？
- A簡: DevOps讓AI功能可持續交付、可觀測、可回退，降低風險與成本。
- A詳: DevOps 提供持續整合、持續交付（CI/CD）、基礎設施即程式碼（IaC）、可觀測性、回滾與灰度部署等能力，將 LLM 原型導入穩定產品不可或缺。藉此把提示、模型與資料的變更納入版本管控與測試，確保上線品質；以遙測與評估監控品質與成本；以功能旗標控制實驗與放量，快速學習又可控風險。沒有 DevOps，AI 功能往往停留在 Demo，難以規模化。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q21, B-Q6, C-Q3

A-Q3: 什麼是 LLMOps？與 MLOps 的關係？
- A簡: LLMOps是針對大型語言模型的MLOps擴展，強調提示、RAG、評估與治理。
- A詳: LLMOps 可視為 MLOps 在生成式模型場景的專門化。除了承接資料、訓練、部署等 MLOps 能力外，LLMOps特別關注提示工程、RAG 管線、合成資料、離線/線上評估（含幻覺、忠實度）、內容安全、成本與延遲治理、多模型路由與回退等。MLOps偏向訓練與部署迭代，LLMOps更強調推理期控制與產品內迭代。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q4, B-Q2, B-Q21

A-Q4: 什麼是 Prompt Engineering？為何重要？
- A簡: 設計與管理提示模板與上下文，提升準確性、穩定性與可重現性。
- A詳: Prompt Engineering 是為 LLM 設計指令、角色、上下文、約束與評分準則的工程方法，常結合參數化模板、few-shot 示例與工具調用。它影響輸出品質、成本與延遲，亦關乎可測試性與版本化。良好實踐包括結構化輸出（JSON）、明確任務邊界、參數化控制與評估導向設計，使模型表現穩定可控，便於上線與維運。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, B-Q11, C-Q2

A-Q5: 原型與產品化有何差異？
- A簡: 原型驗證可行性，產品化需可維運、可量測、可合規與可持續交付。
- A詳: 原型重在概念驗證與速度，通常資料、提示、模型與評估流程較鬆散；產品化則需引入版本控制、測試與評估門檻、日誌與追蹤、治理與合規、成本與延遲目標、SLO/SLI、回退與應急預案等。換言之，產品化是在技術可行之上加入可營運與風險控制，使價值可持續且可擴展。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q21, B-Q20, C-Q6

A-Q6: RAG 與微調的差異是什麼？
- A簡: RAG用檢索補知識，微調改變模型權重；權衡成本、更新頻率與控制力。
- A詳: RAG（檢索增強生成）在推理時查詢外部知識庫再生成，優點是即時更新、成本低、可控來源；微調則透過新數據調整模型權重，對風格與任務適配更強，但成本較高、更新慢。實務常混用：先用 RAG 解決知識時效，再針對格式或任務做輕量指令微調。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q3, C-Q1

A-Q7: 零樣本、少樣本、指令微調差異？
- A簡: 零樣本靠指令，少樣本加示例，指令微調以資料系統性調整模型。
- A詳: 零樣本（Zero-shot）在無示例下僅靠指令完成任務；少樣本（Few-shot）提供少量示例引導風格與步驟；指令微調（SFT）以大量指令-回應資料訓練，使模型對任務泛化更好。選擇取決於資料可得性、精度要求與成本，常見策略是先少樣本，再視需求進行輕量微調。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q12, B-Q13

A-Q8: 離線評估與線上評估差異？
- A簡: 離線用資料集與自動指標，線上以AB測試與真實流量量測。
- A詳: 離線評估在受控資料集上計算指標（正確性、忠實性、覆蓋率、毒性等），速度快且可回歸；線上評估在真實流量上以 A/B 測試、功能旗標、使用者回饋與商業指標檢驗實效。兩者互補：離線做守門與回歸、線上驗證真實價值與風險。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q5, B-Q6, C-Q3

A-Q9: 什麼是忠實性（Faithfulness）、正確性與覆蓋率？
- A簡: 忠實性檢核是否依據證據，正確性驗內容對，覆蓋率看需求滿足度。
- A詳: 正確性衡量輸出是否正確；忠實性關注輸出是否可由提供的證據支持，避免幻覺；覆蓋率衡量是否回答了題意所有要點。生成式應用同時追求三者平衡，常以自動評分（LLM-as-judge）、規則與人工抽核結合，並輔以引用來源與結構化輸出提升可驗證性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, B-Q13, D-Q1

A-Q10: 什麼是 Guardrails？為何需要？
- A簡: 在輸入/輸出處加安全與政策控管，防止濫用、越權與敏感洩露。
- A詳: Guardrails 指針對 LLM 應用的安全護欄，包括輸入檢查（注入、越權、敏感詞）、輸出過濾（毒性、隱私、合規）、工具調用限制、角色與上下文邊界、格式驗證等。目的在降低風險、符合法規與品牌要求，常結合政策即程式碼、審計與警示機制。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, B-Q17, D-Q5

A-Q11: 什麼是 Prompt 模板與參數化？
- A簡: 將提示結構化並以變數注入，利於版本控管與重複使用。
- A詳: Prompt 模板把角色、任務、格式、評分準則與 few-shot 示例以檔案化描述（多用 YAML/JSON），透過變數注入動態填入使用者意圖、檢索結果與系統參數。模板化利於版本控制、實驗比較（A/B）、多人協作，也可與評估框架與功能旗標整合，形成可治理的提示供應鏈。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q4, B-Q11, C-Q2

A-Q12: 什麼是可觀測性在 LLM 產品中的意義？
- A簡: 端到端追蹤請求、提示、上下文與成本，找因與優化依據。
- A詳: 可觀測性涵蓋追蹤（trace）、度量（metrics）、日誌（logs），在 LLM 應用需特別記錄提示版本、模型版本、檢索來源、延遲分佈、token 成本與錯誤類型。這些遙測資料支持問題診斷、成本治理、品質評估與合規審計，是持續改進的基礎。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, B-Q9, C-Q7

A-Q13: 何謂資料治理與隱私保護在此脈絡？
- A簡: 管理資料來源、授權、PII與使用邊界，確保合規與最小可用原則。
- A詳: 資料治理包括資料來源與授權追蹤、品質評估、版本化、存取控制與生命週期管理。隱私保護關注 PII 偵測與遮罩、最小化收集與保留、跨境合規。對 RAG 與遙測尤為重要，需有清晰政策、技術控制與審計機制，降低法規與品牌風險。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q16, B-Q20, D-Q9

A-Q14: 什麼是成本工程（Token 成本管理）？
- A簡: 以監控、快取、路由與提示優化，控管token用量與模型費用。
- A詳: 成本工程是以觀測與策略降低推理支出：监测token與每請求成本、提示最小化與結構化、語義快取避免重算、多模型路由選用性價比更佳的模型、批量與流式處理降低延遲與等待、資料壓縮與截斷策略。與 SLO 一致化，避免品質過度或不足造成浪費。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q9, B-Q14, C-Q5

A-Q15: DevOpsDays Taipei 是什麼？本文提供哪些連結？
- A簡: DevOps社群年會；本文提供演講簡報嵌入與大會共筆連結。
- A詳: DevOpsDays Taipei 是聚焦 DevOps、雲原生與開發運維協作的技術社群年會。本文為作者第七次參與，提供「從 Prompt 到 Product」場次之簡報嵌入（Google Slides）與大會 HackMD 共筆連結，方便讀者追蹤重點與後續問答更新。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q24

### Q&A 類別 B: 技術原理類

B-Q1: LLM 應用從請求到回應如何運作？
- A簡: 請求解析→檢索/工具→提示組裝→模型推理→後處理→回應。
- A詳: 原理包含六步：1) 請求解析與驗證；2) 可選檢索（RAG）與工具調用；3) 依模板組裝系統/使用者/工具訊息；4) 送至推理服務（多模型路由與回退）；5) 後處理：格式驗證、引用串接、敏感過濾；6) 回應與遙測上報（trace、metrics、cost）。核心組件：API Gateway、Prompt/Context Builder、Retriever、Model Router、Guardrails、Observability。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q1, B-Q2, B-Q22

B-Q2: RAG 管線的技術原理與組件？
- A簡: 內容切塊與向量化、索引檢索、重排序、提示融合、引用輸出。
- A詳: 步驟：1) Ingestion：文件清理、切塊、向量嵌入；2) Index：建立向量索引（FAISS/PGVector）；3) Retrieval：語義檢索+kNN；4) Rerank：交叉編碼器重排序提昇精度；5) Prompt Fusion：把證據段落嵌入模板；6) Cite：輸出帶來源與頁碼。核心：Embedder、Vector Store、Retriever、Reranker、Prompt Builder。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, B-Q3, C-Q1

B-Q3: 向量索引建立與檢索原理？
- A簡: 文本嵌入為向量後建索引，近鄰搜尋近似匹配相關內容。
- A詳: 以嵌入模型將文本轉成高維向量，採用索引結構（IVF、HNSW、PQ）加速近似最近鄰搜尋（ANN）。查詢時將問題嵌入向量空間，計算距離（餘弦/內積）取 Top-k。關鍵步驟：正確切塊、選擇適合的嵌入模型與索引參數、定期重建與壓縮。核心：Embedder、Indexer、Searcher。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, D-Q7, C-Q10

B-Q4: Prompt 模板引擎如何設計？
- A簡: 定義結構化模板與變數注入，支援版本化與測試掛鉤。
- A詳: 模板引擎提供變數（上下文、few-shot、參數）、條件渲染、分塊與合併，輸出多輪訊息或結構化 JSON。與版本控制（Git）、評估框架與功能旗標整合，允許 A/B 與回滾。核心組件：Template Store、Renderer、Validator、Versioner、Test Harness。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, B-Q11, C-Q2

B-Q5: 離線評估框架如何運作？
- A簡: 用標註集與自動評分，回歸測試與品質門檻作為發佈守門。
- A詳: 流程：1) 構建標註/合成資料集；2) 批量推理；3) 指標計算（正確性、忠實性、毒性等）；4) 回歸對比基線；5) 產生報告與門檻判斷；6) 失敗案例歸因。核心：Dataset Store、Evaluator（Rule/LLM as Judge）、Reporter、Gatekeeper，並接入 CI 以自動化。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, B-Q13, C-Q3

B-Q6: 線上 A/B 測試與功能旗標機制？
- A簡: 以旗標控流量分組與逐步放量，比較指標後決定上線或回退。
- A詳: 功能旗標控制變體曝光；A/B 隨機分流確保可比性；收集線上指標（轉化、延遲、成本、CSAT）與風險信號（毒性、投訴）。結合灰度放量（1%→5%→25%→100%）與即時回退。組件：Flag Service、Experiment Platform、Metrics Pipeline、Analyzer。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, C-Q6, C-Q9

B-Q7: 內容安全與政策檢查機制？
- A簡: 以規則與模型檢測輸入輸出，阻擋違規並記錄審計。
- A詳: 設計多層檢查：1) 輸入層敏感詞與注入偵測；2) 模型輸出層毒性、仇恨、PII；3) 工具調用層權限邊界；4) 事後審計與舉報回路。可用規則引擎、分類器、專用審查模型與外部 API。核心：Policy Engine、Moderation Service、Audit Log。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, B-Q17, D-Q5

B-Q8: 日誌與遙測收集管線怎麼設計？
- A簡: 用OTel標準蒐集trace/metrics/logs，集中存儲與即時告警。
- A詳: 客戶端與服務端埋點，輸出 OpenTelemetry 資料到 Collector，再分發至時序庫（Prometheus）、日誌庫（ELK）、追蹤（Jaeger/Tempo）。記錄提示與模型版本、檢索來源、token 用量、延遲分解與錯誤碼，設告警門檻與儀表板。核心：OTel SDK、Collector、Storage、Alerting。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q12, C-Q7, D-Q2

B-Q9: 成本監控與預算警示如何運作？
- A簡: 實時計量token與費用，超閾即告警與限流/降級。
- A詳: 對每請求計量 token 與成本，聚合至使用者、專案、模型維度；設預算與配額；當超閾觸發告警、限流或切換較便宜路由。結合快取命中率與提示長度分布供優化決策。核心：Metering、Quota/Rate Limiter、Budget Alert、Router。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q14, B-Q14, C-Q8

B-Q10: 模型選型與自動回退機制？
- A簡: 依任務與SLO挑選模型，失敗時自動改路由或降級。
- A詳: 建立多模型路由策略：依任務類型、內容長度、延遲/成本 SLO 選擇模型；若逾時或品質檢測不過，啟動回退（同家族小型號、不同供應商或離線備援）。記錄路由決策與結果供後續學習。核心：Policy Router、Health Check、Fallback Chain。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q22, D-Q8, C-Q5

B-Q11: Prompt 版本控制與實驗追蹤原理？
- A簡: 以Git與元資料記錄模板、參數與結果，支援回溯比較。
- A詳: 透過 Git 管理模板檔，並以實驗追蹤（如 MLflow/Weights & Biases）記錄變更變數（few-shot、檢索策略）、指標與工件。自動生成Changelog與報告，支援回滾與責任追溯。核心：VCS、Experiment Tracker、Artifact Store、Report Generator。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, C-Q2, B-Q5

B-Q12: 合成資料生成與資料集管理？
- A簡: 以LLM生成多樣樣本，搭配去偏與標註，構建可重用資料集。
- A詳: 以種子任務與規則讓 LLM 產生問答/對話，再經去重、難度分層、毒性與忠實性檢查；必要時人審修正。用資料版本庫管理與分割（train/dev/test），建立資料卡（Data Card）標記來源與限制。核心：Synthesizer、Filter/De-bias、Dataset Store。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q7, B-Q5, D-Q6

B-Q13: 評估指標計算與校準機制？
- A簡: 結合規則、模型評分與人工校準，建立一致標尺。
- A詳: 以規則打分（格式/引用）、LLM-as-judge 衡量正確性與忠實性，再抽樣人工校準以修正偏差；透過多評審一致性（kappa）、錨點樣本維持標尺穩定。定期回顧與再標註難例，避免指標漂移。核心：Rule Evaluator、Judge Model、Calibration Panel。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q9, B-Q5, B-Q25

B-Q14: 延遲優化：快取、並行、流式輸出原理？
- A簡: 重用相似請求、並行檢索與工具、先流式回傳減少體感等待。
- A詳: 語義快取儲存問答與嵌入，近似匹配命中直接返回；檢索、重排序與工具調用並行化；模型支援流式傳輸（SSE/WebSocket）提升體感。長輸入先摘要或截斷到可接受視窗。核心：Semantic Cache、Async Executor、Streamer、Summarizer。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q14, C-Q5, D-Q2

B-Q15: 推理服務的伸縮與多區部署？
- A簡: 自動伸縮推理實例與多區容錯，保SLO並降低成本。
- A詳: 依QPS與token吞吐自動擴縮，預置熱啟動池降低冷啟動；多區部署與健康檢查自動故障轉移；使用批量推理與請求合併提升吞吐。核心：Autoscaler、Warm Pool、Multi-AZ Router、Batcher、Health Probes。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: D-Q2, B-Q10, C-Q8

B-Q16: 安全：PII 偵測與遮罩機制？
- A簡: 偵測個資並在入/出站遮罩，最小化存留與權限。
- A詳: 以規則與模型偵測 PII（姓名、電話、地址、身份號），在入站遮罩再送模型，出站做反遮罩僅對授權端點可見；遙測中用hash或脫敏存放。結合最小權限與資料保留策略。核心：PII Detector、Masker/Unmasker、KMS、Access Control。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, D-Q9, C-Q7

B-Q17: 自動化治理：Policy as Code 如何設計？
- A簡: 將安全與合規規範程式化，於管線與執行期強制執行。
- A詳: 把提示內容、資料來源、輸出限制、工具權限等政策以程式表達（Rego/Opa/自研），在 CI、部署與執行期評估。違規阻擋與稽核記錄；政策版本化與審核流程。核心：Policy Engine、Admission Controller、Audit Trail、Policy Repo。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q7, B-Q20, D-Q5

B-Q18: 漏斗式紅隊測試與風險評估？
- A簡: 先自動再人工、多輪攻防測針，量化風險與覆蓋面。
- A詳: 以自動化提示集合進行越權、注入、毒性測試，針對高風險場景人工深挖；逐步收斂至真實產品情境，建立風險分級與修復SLA。核心：Attack Corpus、Auto Red-Team Runner、Risk Scoring、Mitigation Tracker。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q10, D-Q5, B-Q25

B-Q19: 模型漂移與資料漂移監測原理？
- A簡: 監看輸入分佈、輸出指標與用戶回饋，異常即告警。
- A詳: 比較線上輸入特徵與歷史分佈（PSI/KL）、輸出品質指標趨勢、回饋率與投訴類型；當顯著偏移觸發告警與診斷，必要時更新資料集、重建索引或調整路由。核心：Drift Detector、Anomaly Alert、Loop to Data/Model Ops。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q5, D-Q6, C-Q7

B-Q20: 合規審計與可追溯性機制？
- A簡: 端到端記錄決策與版本，支援問責與稽核報告。
- A詳: 追溯鏈包含：請求ID、提示與模型版本、資料來源哈希、政策評估結果、輸出檢查、人工覆核記錄。生成可導出審計報告，支援法規（如GDPR、ISO 27001）要求。核心：Provenance Store、Audit Reporter、Retention Policy。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q13, B-Q17, D-Q9

B-Q21: CI/CD 整合 LLM 測試流程？
- A簡: PR 觸發離線評估與安全檢查，通過門檻才部署灰度。
- A詳: 當 Prompt/程式變更提交 PR：執行單元測試→資料/政策靜態檢查→離線評估與回歸→產出報告與門檻判定→部署至 Staging→合規與安全門→灰度上線。核心：CI Runner、Evaluator、Gatekeeper、Deployment Orchestrator、Flag Service。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q2, B-Q5, C-Q3

B-Q22: 多模型路由與動態選擇策略？
- A簡: 依任務、長度、SLO與成本即時選擇最合適模型。
- A詳: 建立策略：分類任務類型（QA、摘要、規劃）、輸入長度區間、SLO（延遲/品質）與成本上限；線上根據健康檢查與負載調整；離線以回放數據持續學習策略權重。核心：Policy Router、Feature Store、Online Learner、Health Monitor。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q10, B-Q14, D-Q8

B-Q23: 提示注入與越權防護原理？
- A簡: 隔離系統指令、嚴格工具權限、正負樣本訓練檢測器。
- A詳: 採層級上下文分離（系統/開發者/使用者）、白名單工具參數、正規表示式與分類器識別注入語句、以負面指令與越權樣本訓練檢測模型；遇疑似攻擊觸發保守模式或人工覆核。核心：Context Sandbox、Tool ACL、Injection Detector。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q7, D-Q5, B-Q18

B-Q24: 團隊協作與知識共筆在 DevOps 中作用？
- A簡: 用共筆同步決策與脈絡，縮短回饋循環與上線風險。
- A詳: 以共筆（如 HackMD）紀錄設計決策、實驗結果、失敗案例與Runbook，使跨職能（產品、法遵、SRE、資料）共享脈絡。搭配 RFC 流程與會議紀要，降低知識孤島與人員流動風險。核心：Collab Doc、Decision Log、Runbook、Postmortem。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q15, B-Q21, D-Q10

B-Q25: 雙層評估：人工評審與自動評分如何結合？
- A簡: 自動大規模篩選，人工抽核校準與處理難例。
- A詳: 先以自動評估快速跑全量樣本，標記高風險或不確定案例；定義抽樣策略（分層/難例優先）給人工評審；用一致性度量校準自動評分，定期更新標準與樣本庫。核心：Auto Evaluator、Sampling Orchestrator、Review Panel。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q5, B-Q13, D-Q6

### Q&A 類別 C: 實作應用類（10題）

C-Q1: 如何快速建立一個 RAG 原型（OpenAI + FAISS）？
- A簡: 用嵌入建索引，檢索Top-k段落融入提示產生含引用回答。
- A詳: 
  - 步驟: 準備文檔→切塊→嵌入→FAISS索引→查詢檢索→重排序→模板融合→生成。
  - 代碼: 
    - Python: 使用 openai embeddings, faiss.IndexFlatIP, langchain RetrievalQA。
  - 注意: 切塊重疊、來源保存、限制上下文長度、加入引用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q3, A-Q6

C-Q2: 如何實作 Prompt 版本控制（Git + YAML）？
- A簡: 以YAML描述模板與變數，Git版控並配合PR評估門檻。
- A詳: 
  - 步驟: 設計模板schema→建立prompts/ 目錄→每版加元資料（id、owner、metrics）→Git提交。
  - 代碼: prompts/qa.yaml 定義 system/user/vars；ci 觸發評估腳本。
  - 注意: 命名規範、變更日誌、與實驗追蹤ID對齊、審核人必須。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q4, B-Q11, B-Q21

C-Q3: 如何在 GitHub Actions 做離線評估自動化？
- A簡: PR觸發跑資料集推理與指標，未達門檻阻擋合併。
- A詳: 
  - 步驟: 建 workflow→安裝依賴→下載資料集→批量推理→計算指標→上傳報告→設置required check。
  - YAML: on: pull_request; steps: run python eval.py; upload-artifact。
  - 注意: 控制成本（小樣本/沙盒key）、緩存模型、加上毒性/格式檢查。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, B-Q21, A-Q8

C-Q4: 如何加入內容審查（Moderation 或自建規則）？
- A簡: 在入/出站掛鉤審查API或規則，阻擋違規並記錄。
- A詳: 
  - 步驟: 定義政策→開發中介層→對接 OpenAI moderation/自建分類器→違規返回替代文案。
  - 代碼: middleware檢查 req/res；命中則打審計與告警。
  - 注意: 本地與雲審查權衡延遲、政策版本化、誤殺白名單。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, B-Q17, D-Q5

C-Q5: 如何實作快取降低成本（Semantic Cache）？
- A簡: 用嵌入相似度命中歷史答案或中間上下文，避免重算。
- A詳: 
  - 步驟: 對請求建立嵌入→查向量快取→命中直接回→未命中照常生成並寫回。
  - 代碼: Redis/pgvector + cosine 相似度閾值；TTL與版本鍵。
  - 注意: 保證語境一致、版本鍵包含prompt/model、設合理閾值與TTL。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q14, B-Q9, D-Q3

C-Q6: 如何設計功能旗標控制新提示上線？
- A簡: 以旗標包裝提示版本，小流量驗證後逐步放量。
- A詳: 
  - 步驟: 建立flag key（prompt.qa.v2）→SDK判斷分流→收集指標→分階段放量→決策定版或回退。
  - 代碼: LaunchDarkly/Unleash SDK；rule: user%hash。
  - 注意: 設定緊急開關、與AB平台指標打通、保留舊版可回退。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, B-Q21, D-Q10

C-Q7: 如何蒐集與匯出遙測（OpenTelemetry + ELK）？
- A簡: 在關鍵節點埋點OTel，集中到ELK/Prom/Tempo並設告警。
- A詳: 
  - 步驟: 客戶端/服務端加入 OTel SDK→注入trace id→Collector轉發→儀表板與告警。
  - 設定: otel-collector.yaml pipelines; logs to ELK, metrics to Prom。
  - 注意: 脫敏PII、記錄prompt/model/version、成本與延遲分段。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, B-Q16, D-Q2

C-Q8: 如何設定成本警報（雲廠商 + 自行估算）？
- A簡: 用雲計費告警與自算token成本，超標限流或降級路由。
- A詳: 
  - 步驟: 開啟雲帳單告警→在閘道實時計量token→聚合至專案維度→設預算與行動。
  - 代碼: 雲Budget Alert；自研meter中間件紀錄 tokens_used。
  - 注意: 預算分層（日/週/月）、與旗標/路由自動銜接、報表週期回顧。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q9, B-Q10, D-Q3

C-Q9: 如何做線上 A/B 測試與分流？
- A簡: 隨機分組或規則分流，追蹤業務與品質指標，統計決策。
- A詳: 
  - 步驟: 定義假設與指標→建立實驗與分流規則→埋點收數→最小樣本/顯著性判定→決策。
  - 代碼: Stats engine（t-test or Bayesian）；曝光與轉化埋點。
  - 注意: 避免交叉污染、保持同質樣本、設最大實驗時長與護欄。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q6, B-Q25, D-Q6

C-Q10: 如何導入向量資料庫（PGVector/TiDB Vector）？
- A簡: 安裝擴充、建立向量欄位與索引，提供ANN查詢服務。
- A詳: 
  - 步驟: 部署Postgres+pgvector或TiDB Vector→建表向量列→建立HNSW/IVFFLAT索引→寫入嵌入→查詢。
  - SQL: CREATE EXTENSION vector; CREATE INDEX USING ivfflat (...);
  - 注意: 維度對齊嵌入模型、索引參數調優、定期重建與VACUUM。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, B-Q2, D-Q7

### Q&A 類別 D: 問題解決類（10題）

D-Q1: 回答幻覺嚴重怎麼辦？
- A簡: 加入RAG與引用、強化忠實度檢查、限制任務邊界與格式。
- A詳: 
  - 症狀: 編造事實、亂引來源。
  - 原因: 缺乏證據、任務不明、模型過度自信。
  - 解法: 導入RAG與引用、模板要求「無證據則說不知」、加忠實性評估門檻。
  - 預防: 定期索引更新、few-shot示範拒答、難例再訓練或微調。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, B-Q2, B-Q13

D-Q2: 延遲過高如何排查？
- A簡: 分解延遲來源，快取/並行/流式優化與推理伸縮。
- A詳: 
  - 症狀: P95/P99 超標。
  - 原因: 檢索慢、模型排隊、輸入過長。
  - 解法: 語義快取、並行檢索與工具、流式回傳、模型批量/路由、縮短上下文。
  - 預防: 自動伸縮、延遲SLO監控、冷啟動預熱。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q14, B-Q15, C-Q7

D-Q3: 成本暴增如何控制？
- A簡: 監控token、提示最小化、快取與路由降級、預算限流。
- A詳: 
  - 症狀: 每日花費超標。
  - 原因: 上下文過長、重複請求、模型規格過高。
  - 解法: 語義快取、短提示與壓縮、切換性價比模型、限制最大tokens。
  - 預防: 預算告警、配額與速率限制、成本回顧週期化。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q14, B-Q9, C-Q5

D-Q4: RAG 回答不引用來源如何改善？
- A簡: 強制模板引用、段落打分、格式驗證與失敗回退。
- A詳: 
  - 症狀: 回答無來源或引用錯誤。
  - 原因: 模板未要求、檢索質量低。
  - 解法: 模板加入必填引用位、Rerank提升相關性、輸出JSON schema驗證。
  - 預防: 建立引用率指標門檻、資料清理與切塊優化。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q4, B-Q13

D-Q5: 提示注入攻擊怎麼防？
- A簡: 上下文隔離、輸入檢測、工具權限最小化與安全政策。
- A詳: 
  - 症狀: 使用者指令覆寫系統規則、越權調用。
  - 原因: 缺乏上下文隔離與檢測。
  - 解法: 系統/開發者層優先、注入分類器、工具白名單、敏感操作雙重確認。
  - 預防: 紅隊測試、政策即程式碼、監控攻擊樣態。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q23, B-Q7, B-Q18

D-Q6: 離線好、線上差的原因與對策？
- A簡: 分佈偏移、指標不對齊；需回放流量與再校準。
- A詳: 
  - 症狀: 線上轉化下降。
  - 原因: 離線資料不代表線上、指標對齊問題。
  - 解法: 建立流量回放評估、擴充資料集、調整指標權重、線上A/B驗證。
  - 預防: 雙層評估、持續資料蒐集與再標註。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q5, B-Q25, C-Q9

D-Q7: 向量檢索效果差的原因？
- A簡: 切塊不佳、嵌入不對、索引參數不當與資料雜訊。
- A詳: 
  - 症狀: 檢索文段無關或漏召。
  - 原因: 塊太大/小、嵌入模型不匹配、索引粗糙、資料髒。
  - 解法: 重設切塊重疊、換嵌入模型、調ivf/hnsw參數、資料清理。
  - 預防: 檢索指標監控（Recall@k/MRR）、定期重建索引。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, C-Q10, B-Q2

D-Q8: 多模型路由不穩定怎麼調？
- A簡: 明確SLO與健康檢查，加入回退與決策記錄再學習。
- A詳: 
  - 症狀: 時好時壞、超時多。
  - 原因: 健康檢查缺失、策略過於敏感。
  - 解法: 增加熔斷、退避重試、明確延遲/品質SLO、離線回放優化策略。
  - 預防: 決策與結果記錄、定期模型比較、容量冗餘。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q22, B-Q10, C-Q8

D-Q9: 隱私與合規審查未通過怎麼補救？
- A簡: 脫敏與最小化、政策化治理、強化審計與存留管制。
- A詳: 
  - 症狀: 審查指出PII泄露、未留審計。
  - 原因: 缺遮罩、政策未落地、存留過長。
  - 解法: 加PII偵測與遮罩、政策即程式碼、縮短保留期、補審計鏈。
  - 預防: 隱私威脅建模、定期審核與演練、資料來源授權管理。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q16, B-Q20, C-Q7

D-Q10: 部署中斷與回退策略失效如何處理？
- A簡: 啟用緊急旗標關閉新變體，回退至穩定版並調查原因。
- A詳: 
  - 症狀: 上線後大量錯誤或品質崩潰。
  - 原因: 評估漏網、回退流程未驗證。
  - 解法: 立即關旗標/回退版本、切換備援模型、回放定位、修復再小流量驗證。
  - 預防: 演練回退Runbook、預置備援路由、發佈門檻嚴格化。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, B-Q21, C-Q6

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是「從 Prompt 到 Product」？
    - A-Q2: 為何 DevOps 在 LLM 產品化中關鍵？
    - A-Q4: 什麼是 Prompt Engineering？為何重要？
    - A-Q5: 原型與產品化有何差異？
    - A-Q6: RAG 與微調的差異是什麼？
    - A-Q7: 零樣本、少樣本、指令微調差異？
    - A-Q8: 離線評估與線上評估差異？
    - A-Q9: 忠實性、正確性與覆蓋率是什麼？
    - A-Q10: 什麼是 Guardrails？為何需要？
    - A-Q11: 什麼是 Prompt 模板與參數化？
    - A-Q12: 可觀測性在 LLM 產品中的意義？
    - A-Q13: 資料治理與隱私保護是什麼？
    - A-Q14: 什麼是成本工程？
    - B-Q1: LLM 應用從請求到回應如何運作？
    - A-Q15: DevOpsDays Taipei 是什麼？本文提供哪些連結？

- 中級者：建議學習哪 20 題
    - B-Q2: RAG 管線的技術原理與組件？
    - B-Q3: 向量索引建立與檢索原理？
    - B-Q4: Prompt 模板引擎如何設計？
    - B-Q5: 離線評估框架如何運作？
    - B-Q6: 線上 A/B 測試與功能旗標機制？
    - B-Q7: 內容安全與政策檢查機制？
    - B-Q8: 日誌與遙測收集管線怎麼設計？
    - B-Q9: 成本監控與預算警示如何運作？
    - B-Q10: 模型選型與自動回退機制？
    - B-Q11: Prompt 版本控制與實驗追蹤原理？
    - B-Q12: 合成資料生成與資料集管理？
    - B-Q13: 評估指標計算與校準機制？
    - B-Q14: 延遲優化原理？
    - B-Q15: 推理服務的伸縮與多區部署？
    - C-Q1: 如何快速建立一個 RAG 原型？
    - C-Q2: 如何實作 Prompt 版本控制？
    - C-Q3: 如何在 GitHub Actions 做離線評估？
    - C-Q4: 如何加入內容審查？
    - C-Q5: 如何實作快取降低成本？
    - C-Q6: 如何設計功能旗標控制上線？

- 高級者：建議關注哪 15 題
    - B-Q16: 安全：PII 偵測與遮罩機制？
    - B-Q17: 自動化治理：Policy as Code？
    - B-Q18: 漏斗式紅隊測試與風險評估？
    - B-Q19: 模型與資料漂移監測原理？
    - B-Q20: 合規審計與可追溯性機制？
    - B-Q21: CI/CD 整合 LLM 測試流程？
    - B-Q22: 多模型路由與動態選擇策略？
    - B-Q23: 提示注入與越權防護原理？
    - B-Q24: 團隊協作與知識共筆在 DevOps 中作用？
    - B-Q25: 雙層評估如何結合？
    - C-Q7: 如何蒐集與匯出遙測？
    - C-Q8: 如何設定成本警報？
    - C-Q9: 如何做線上 A/B 測試與分流？
    - C-Q10: 如何導入向量資料庫？
    - D-Q5: 提示注入攻擊怎麼防？