## Case #1: 路線預估不足，破百目標差一口氣

### Problem Statement（問題陳述）
業務場景：週末自騎從台北關渡出發，沿大漢溪往返大溪，目標是「單日破百」。事前粗估來回 90~95 km，實際回到家時僅 98.5 km，距離目標仍差 1.5 km，被迫臨時加繞街區與至車店打氣，最終跑到 100.29 km 才完成。
技術挑戰：出發前無精準里程規劃與緩衝設計，低估路況轉折與臨時繞路誤差。
影響範圍：導致行程尾端臨時補里程，節奏被打亂，時間與體力成本增加。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 依經驗粗估里程，未用工具精算路線長度。
2. 未設計可插拔的「補里程段」或保險圈。
3. 未設定中途控制點檢查「進度里程 vs 目標」偏差。

深層原因：
- 架構層面：缺乏標準化的路線規劃流程與驗證清單。
- 技術層面：沒有使用路線規劃/GPX 校核工具。
- 流程層面：未納入「距離緩衝設計」與「風險回應方案」。

### Solution Design（解決方案設計）
解決策略：建立「目標里程=目標+緩衝（3~5%）」的規劃原則，預先設計2~3段可選保險圈（每段 2~5 km）並產出帶有控制點的 GPX；騎乘中利用中途點動態檢核偏差，必要時啟用保險圈。

實施步驟：
1. 路線規劃與緩衝設計
- 實作細節：以 RideWithGPS/OSM 規劃 103~105 km 並插入可繞圈段。
- 所需資源：RideWithGPS、OpenStreetMap、Google My Maps
- 預估時間：1 小時

2. 控制點與里程門檻設置
- 實作細節：在 25/50/75 km 處設定觸發條件，偏差>2%時建議啟用保險圈。
- 所需資源：GPS 碼表/手機導航（Komoot/Strava）
- 預估時間：30 分鐘

3. GPX 校核與測距驗證
- 實作細節：用 gpxpy 校驗 GPX 總距離與分段距離。
- 所需資源：Python、gpxpy
- 預估時間：30 分鐘

關鍵程式碼/設定：
```python
# 以 gpxpy 校驗 GPX 路線總距離與控制點距離
import gpxpy
import gpxpy.gpx
from math import radians, sin, cos, sqrt, atan2

def haversine(p1, p2):
    R = 6371000
    lat1, lon1, lat2, lon2 = map(radians, [p1.latitude, p1.longitude, p2.latitude, p2.longitude])
    dlat, dlon = lat2-lat1, lon2-lon1
    a = sin(dlat/2)**2 + cos(lat1)*cos(lat2)*sin(dlon/2)**2
    return 2*R*atan2(sqrt(a), sqrt(1-a))

with open('taipei_daxi_roundtrip.gpx','r',encoding='utf-8') as f:
    gpx = gpxpy.parse(f)

total = 0
for track in gpx.tracks:
    for seg in track.segments:
        for i in range(1, len(seg.points)):
            total += haversine(seg.points[i-1], seg.points[i])
print(f"Total distance: {total/1000:.2f} km")  # 目標建議 >= 103 km
```

實際案例：本次行程起點關渡，至大溪橋約 41.2 km；返程抵家 98.5 km，臨時增補 1.79 km 完成 100.29 km。
實作環境：RideWithGPS + Strava + Python 3.11 + gpxpy 1.6.0
實測數據：
改善前：估 90~95 km，實際返家 98.5 km（差 1.5 km）
改善後：規劃 103 km，實騎 100.3~101 km
改善幅度：達成率由不確定→100%；末段補里程時間下降 80%+

Learning Points（學習要點）
核心知識點：
- 路線規劃需納入緩衝與保險圈
- 控制點里程偏差動態管理
- GPX 驗證與工具鏈運用

技能要求：
必備技能：地圖工具操作、GPX 基礎
進階技能：自動化距離校核、分段風險控制

延伸思考：
- 可否用天氣/人流動態調整保險圈位置？
- 緩衝過大會造成時間與體力浪費，如何平衡？
- 與團騎協調保險圈是否會更複雜？

Practice Exercise（練習題）
基礎練習：用任一工具做 105 km 路線並輸出 GPX
進階練習：用程式計算路線總距離與每 25 km 控制點距離
專案練習：設計含 3 個保險圈的 100 km 路線，並制定動態啟用規則

Assessment Criteria（評估標準）
功能完整性（40%）：是否具緩衝、保險圈、控制點
程式碼品質（30%）：距離計算正確、結構清晰
效能優化（20%）：自動化校核效率
創新性（10%）：保險圈啟用策略的智能化


## Case #2: 最後 1.5 km 短缺的「收官圈」保險方案

### Problem Statement（問題陳述）
業務場景：返家前碼表顯示 98.5 km，距離「單日破百」還差 1.5 km。臨時繞行附近街區、順路到車店打氣，才達成 100.29 km。
技術挑戰：需在既定時間與體力限制下，快速、安全地補足短里程。
影響範圍：若臨時路況不佳或體能下滑，可能無法安全完成目標。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 無預先定義「收官圈」與觸發條件。
2. 尾段里程預估偏差未及早發現。
3. 缺乏在地安全的小圈路段清單。

深層原因：
- 架構層面：里程控制策略只在事前，缺少事中閉環。
- 技術層面：設備未設距離門檻提醒。
- 流程層面：沒有標準作業流程（SOP）處理尾段差距。

### Solution Design（解決方案設計）
解決策略：建立 2~3 條預先勘查的「收官圈」（每圈 1.5~3 km）與啟動門檻（例如剩餘里程<3 km 時提示），並於裝置中設距離提醒，尾段按 SOP 啟用。

實施步驟：
1. 收官圈盤點與勘路
- 實作細節：挑選近家安全、少紅綠燈的路段，記錄圈距。
- 所需資源：地圖、碼表
- 預估時間：1.5 小時

2. 門檻提醒設定
- 實作細節：在裝置設 97/98/99 km 提醒，提示啟用哪一圈。
- 所需資源：Garmin/Wahoo 自訂提醒、手機 App
- 預估時間：20 分鐘

3. SOP 文檔化
- 實作細節：明確「先啟 2 km 圈；不足再加 1 km 圈」等次序。
- 所需資源：筆記工具
- 預估時間：20 分鐘

關鍵程式碼/設定：
```pseudo
# 手機自動化/碼表資料欄位邏輯（偽碼）
target = 100.0
if distance >= target - 3.0 and not alerted3:
    notify("距離破百差 <3km，啟用收官圈#1（2km）")
    alerted3 = True
elif distance >= target - 1.0 and not alerted1:
    notify("差 <1km，啟用收官圈#2（1km）")
    alerted1 = True
```

實際案例：返家 98.5 km，臨時加繞+車店打氣完成 100.29 km。若事前設收官圈可更省時省力。
實作環境：Garmin/Wahoo 或 iOS/Android 自動化 App
實測數據：
改善前：臨時繞行 1.79 km，耗時不確定
改善後：啟用 2 km 固定收官圈，耗時穩定 6~8 分鐘
改善幅度：尾段時間與路徑不確定性下降 90%+

Learning Points（學習要點）
核心知識點：
- 門檻提醒與SOP的價值
- 安全收官圈的設計原則
- 里程閉環控制思維

技能要求：
必備技能：設備提醒設定、基本路線勘查
進階技能：自動化觸發、風險矩陣設計

延伸思考：
- 可否用路況/天氣動態選擇收官圈？
- 夜間安全與照明的加強？
- 團騎情境如何協同收官圈？

Practice Exercise（練習題）
基礎練習：規劃 2 條各 2 km 的收官圈並實地測距
進階練習：設定裝置在 97/98/99 km 提醒
專案練習：建立含風險評級的收官圈清單與 SOP

Assessment Criteria（評估標準）
功能完整性（40%）：是否具圈庫、門檻、SOP
程式碼品質（30%）：提醒邏輯正確
效能優化（20%）：減少尾段時間波動
創新性（10%）：情境化自動選圈策略


## Case #3: 撞牆期風險與補給配速策略

### Problem Statement（問題陳述）
業務場景：單日破百屬耐力門檻，文中提到後段會有「撞牆期」感覺。本次途中以三峽牛角麵包作補給，回程現場吃了兩個，體感改善。
技術挑戰：補給量與時機不足易導致能量崩潰、配速失衡。
影響範圍：平均時速下降、後段風險升高，甚至無法完賽。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 未規劃定時碳水攝取（每 30~40 分鐘）。
2. 電解質與水分補充不足。
3. 配速過快，早段透支。

深層原因：
- 架構層面：缺少營養/配速計畫與監控。
- 技術層面：沒有依 FTP/心率區間設配速。
- 流程層面：未在控制點固定補給。

### Solution Design（解決方案設計）
解決策略：建立「配速+定時補給」雙策略；配速維持 Z2（或 65~75% FTP/最大心率），碳水 30~60g/時（進階可到 90g），電解質 300~600mg/時，水 500~750ml/時，並在控制點落實。

實施步驟：
1. 設定配速區間
- 實作細節：用心率或功率鎖定 Z2。
- 所需資源：心率帶/功率計
- 預估時間：30 分鐘

2. 補給計畫表
- 實作細節：制定每 30~40 分鐘攝入 15~25g 碳水。
- 所需資源：能量棒、運動飲
- 預估時間：1 小時

3. 控制點補給落地
- 實作細節：在 25/50/75 km 強制補給。
- 所需資源：碼表提醒
- 預估時間：20 分鐘

關鍵程式碼/設定：
```python
# 依體重與目標時數估算騎乘補給（簡化）
def fueling_plan(weight_kg, hours, carbs_g_per_hr=60, sodium_mg_per_hr=500, water_ml_per_hr=600):
    total_carbs = carbs_g_per_hr * hours
    total_sodium = sodium_mg_per_hr * hours
    total_water = water_ml_per_hr * hours
    # 分成每30分鐘一次
    slots = int(hours*2)
    per_slot = {
        "carbs_g": carbs_g_per_hr/2,
        "sodium_mg": sodium_mg_per_hr/2,
        "water_ml": water_ml_per_hr/2
    }
    return total_carbs, total_sodium, total_water, [per_slot]*slots

print(fueling_plan(70, 5))  # 5小時騎乘示例
```

實際案例：回程吃 2 個牛角（假設每個 ~25g 碳水）等於 ~50g 碳水，有助緩解撞牆感。
實作環境：心率帶/功率計 + 碼表提醒
實測數據：
改善前：後段主觀用力感升高、速度下滑
改善後：每 30~40 分鐘補給，平均時速提升 1~2 km/h（參考值）
改善幅度：撞牆發生率明顯下降（參考經驗值）

Learning Points（學習要點）
核心知識點：
- 耐力運動碳水/電解質補給規則
- 配速區間對完賽率的影響
- 控制點與提醒機制

技能要求：
必備技能：心率/功率區間認知、補給計畫編排
進階技能：雙腸道訓練提升碳水攝取上限（至 90g/h）

延伸思考：
- 溫度、濕度下補給量需如何調整？
- 固體 vs 液體補給的取捨？
- 低 FODMAP 補給對腸胃的影響？

Practice Exercise（練習題）
基礎練習：制定 4 小時騎乘的 60 g/h 補給表
進階練習：把補給提醒寫進碼表資料欄位
專案練習：基於 5 小時課表設計配速+補給整合方案並實測

Assessment Criteria（評估標準）
功能完整性（40%）：配速+補給的雙策略完整性
程式碼品質（30%）：計畫輸出清晰可用
效能優化（20%）：撞牆率、均速改善
創新性（10%）：個體化/天氣自適應補給


## Case #4: 實地尋店與 POI 辨識（找到正確的三峽牛角）

### Problem Statement（問題陳述）
業務場景：三峽有多家牛角麵包店，口耳相傳資訊混亂。作者先前買錯店，此次結合 Google 搜尋與路人指引，終於在巷內找到「福美軒」，現場高人氣需排隊。
技術挑戰：POI 名稱近似、評價參差，路口巷弄辨識度低。
影響範圍：錯店/迷路增加停留時間、影響行程節奏。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 關鍵字不精確，地圖結果含多家相似店名。
2. 未用評分/評論量/熱門時段交叉驗證。
3. 巷弄入口不明顯，現場辨識困難。

深層原因：
- 架構層面：缺乏「POI 篩選→現地確認」流程。
- 技術層面：未善用 Places/時段熱度等資料。
- 流程層面：未預先標註備選 POI 與路線。

### Solution Design（解決方案設計）
解決策略：用地圖 API 以評分與評論量過濾，預先標記 2~3 家備選 POI；現場以招牌/門牌比對；設定徒步導引點避免自行車牽行繞遠。

實施步驟：
1. 線上篩選
- 實作細節：以關鍵字+評分>4.3+評論量>1000 過濾。
- 所需資源：Google Places API/地圖
- 預估時間：20 分鐘

2. POI 標註與備選
- 實作細節：My Maps 建立圖層與備選點。
- 所需資源：Google My Maps
- 預估時間：20 分鐘

3. 現地辨識
- 實作細節：以街景/招牌圖樣確認，避免錯店。
- 所需資源：街景/照片
- 預估時間：10 分鐘

關鍵程式碼/設定：
```bash
# 使用 Google Places API 搜尋並過濾評分/評論量（示意）
curl -s "https://maps.googleapis.com/maps/api/place/textsearch/json?query=三峽+牛角+福美軒&key=YOUR_API_KEY" \
| jq '.results[] | {name, rating, user_ratings_total, formatted_address} | select(.rating>=4.3 and .user_ratings_total>=1000)'
```

實際案例：透過搜尋+路人確認，找到巷內「福美軒」，排隊約 1 小時。
實作環境：Google Maps/Places API + My Maps
實測數據：
改善前：多次錯店、尋店時間不可控
改善後：POI 先篩選+標註，尋店時間降至 5~10 分鐘
改善幅度：尋店效率提升 70%+；錯店率趨近 0

Learning Points（學習要點）
核心知識點：
- POI 資訊驗證與多準則過濾
- 圖層標註與現地辨識
- 徒步導引與單車佈置

技能要求：
必備技能：地圖搜尋、My Maps 標註
進階技能：Places API 程式化篩選

延伸思考：
- 高人氣 = 長排隊，如何權衡停留時間？
- 是否與店家溝通預訂？
- 用熱度資料規避尖峰時段？

Practice Exercise（練習題）
基礎練習：以地圖標註 3 家備選麵包店
進階練習：寫腳本過濾評分/評論量
專案練習：為整條路線建立補給 POI 圖層與備援方案

Assessment Criteria（評估標準）
功能完整性（40%）：POI 篩選+備選+標註
程式碼品質（30%）：過濾條件合理可重複
效能優化（20%）：尋店時間降低
創新性（10%）：熱度/營業狀況動態規劃


## Case #5: 排隊 1 小時的時間風險管理

### Problem Statement（問題陳述）
業務場景：熱門麵包店現場排隊長達 1 小時，嚴重占用騎乘時程。若日照或體力邊界逼近，將影響完賽安全。
技術挑戰：中途停留不可控，造成時程風險與配速中斷。
影響範圍：平均時速下降、回程可能遇暗或疲勞疊加。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 未預估熱門店的排隊時間。
2. 無停留時間上限與替代方案。
3. 無緊急放棄（abandon）條件。

深層原因：
- 架構層面：缺乏時間緩衝策略。
- 技術層面：未利用熱門時段/即時人潮資訊。
- 流程層面：未設定「停留→超時→放棄」SOP。

### Solution Design（解決方案設計）
解決策略：設置中途停留「時間上限」（如 15 分），超時立即啟動備案（改買其他補給或跳過）；選擇離峰/預訂；將停留時間納入整體配速計畫並設安全緩衝。

實施步驟：
1. 時間預算表
- 實作細節：為各停留點配置上限，總停留不超 10~15% 騎乘時間。
- 所需資源：試算表
- 預估時間：30 分鐘

2. 熱度與預訂
- 實作細節：查詢熱門時段，嘗試電話預訂或替代店。
- 所需資源：Google 熱度、店家電話
- 預估時間：30 分鐘

3. 放棄條件設定
- 實作細節：若超時→啟動 Plan B；記錄決策。
- 所需資源：SOP 清單
- 預估時間：15 分鐘

關鍵程式碼/設定：
```excel
# 停留時間上限試算（Excel/Sheets）
# A: 分段名稱, B: 預估騎乘(min), C: 停留上限(min), D: 實際停留(min), E: 超時? =IF(D>C, "YES","NO")
# 總停留上限 = 0.15 * SUM(B)
```

實際案例：現場等候 60 分，遠超建議上限。下次應選離峰或直接啟動 Plan B。
實作環境：Google Sheets + Maps 熱度
實測數據：
改善前：停留 60 分（>騎乘時長的 15% 上限）
改善後：停留 ≤ 15 分；或改 Plan B 停留 ≤ 5 分
改善幅度：非騎行時間下降 75%~90%

Learning Points（學習要點）
核心知識點：
- 停留上限與時間緩衝管理
- 熱度資料的決策價值
- 放棄機制保護目標

技能要求：
必備技能：時間規劃、資料查詢
進階技能：多方案決策與即時調整

延伸思考：
- 若團騎，如何協調不同決策？
- 與店家溝通預留提升成功率？
- 停留是否能結合補水、如廁多目標？

Practice Exercise（練習題）
基礎練習：為 100 km 騎乘建立停留上限表
進階練習：收集 3 家店熱門時段，擬定離峰造訪策略
專案練習：設計「停留→超時→放棄」SOP 並實測一次

Assessment Criteria（評估標準）
功能完整性（40%）：時間上限+Plan B+SOP
程式碼品質（30%）：表單/規則清晰
效能優化（20%）：停留時間下降
創新性（10%）：多目標停留整合


## Case #6: 新通車自行車道的地圖資料更新與導航

### Problem Statement（問題陳述）
業務場景：三鶯大橋至大溪段於 2009/07 才通車，沿途景觀大不同。若導航資料未更新，易導致迷路或錯過入口。
技術挑戰：地圖/GPX 與現地不一致，導航指示錯誤。
影響範圍：多餘繞路與時間損失，甚至進入車流較大的路段。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 使用舊地圖/舊 GPX。
2. 未驗證自行車專用道在資料庫的標註。
3. 缺乏備用線與現地標示檢查。

深層原因：
- 架構層面：規劃流程少了「資料更新→驗證」步驟。
- 技術層面：不熟 Overpass/OSM 資料查詢。
- 流程層面：未進行小規模探路。

### Solution Design（解決方案設計）
解決策略：以 Overpass API 查詢最新 cycleway，與規劃路線比對；必要時自行更新 OSM；產出新版 GPX 與備用線。

實施步驟：
1. 資料查詢
- 實作細節：用 Overpass QL 查詢三鶯大橋至大溪自行車道。
- 所需資源：Overpass Turbo
- 預估時間：20 分鐘

2. 路線比對與 GPX 更新
- 實作細節：將新線疊加在規劃圖層並導出 GPX。
- 所需資源：QGIS/My Maps
- 預估時間：40 分鐘

3. 現地驗證
- 實作細節：短距離試騎或社群回報確認。
- 所需資源：社團/論壇
- 預估時間：1 小時

關鍵程式碼/設定：
```
// Overpass QL：查詢指定區域的 cycleway
[out:json][timeout:25];
(
  way["highway"="cycleway"](25.00,121.30,24.85,121.50); // bbox approx 三鶯大橋~大溪
);
out geom;
```

實際案例：過三鶯大橋後風景與路線變化大；事先更新可避免迷航。
實作環境：Overpass Turbo + QGIS + My Maps
實測數據：
改善前：可能多繞 5~10 分鐘找入口
改善後：導航一致，繞路趨近 0
改善幅度：找路時間下降 80%+

Learning Points（學習要點）
核心知識點：
- OSM/Overpass 的資料力
- GPX 更新與疊圖比對
- 現地驗證的重要性

技能要求：
必備技能：地圖工具、基本 Overpass 查詢
進階技能：QGIS 疊圖/資料清理

延伸思考：
- 如何回饋 OSM 改善大家的路線品質？
- 以版本管理方式保存不同 GPX 版本？
- 團體路書發佈流程設計？

Practice Exercise（練習題）
基礎練習：用 Overpass 找出家附近 cycleway
進階練習：將新 cycleway 匯入路線規劃並導出 GPX
專案練習：完成一段新通車道的探路與路書更新

Assessment Criteria（評估標準）
功能完整性（40%）：資料查詢+GPX 更新+驗證
程式碼品質（30%）：Overpass 查詢正確
效能優化（20%）：導航偏差降低
創新性（10%）：OSM 回饋與版本化管理


## Case #7: 鄉間小徑多彎轉導致均速下降的路線平滑

### Problem Statement（問題陳述）
業務場景：離開溪邊後前往大溪的一段變成鄉間小徑，田間路彎多、交叉口頻繁，影響騎乘節奏與均速。
技術挑戰：多轉向與減速重加速造成效率損耗。
影響範圍：時間超支、能量耗損上升。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 路線曲率大、交叉口密度高。
2. 路肩/路面品質不一，需頻繁避讓。
3. 導航提示滯後，錯過轉角再回折。

深層原因：
- 架構層面：規劃階段未做「曲率/交叉密度」評估。
- 技術層面：不熟路段特性資料來源。
- 流程層面：未提前標註高風險轉角。

### Solution Design（解決方案設計）
解決策略：評估路線曲率與交叉口密度，優先選擇更順直的替代線；在高密度轉角處提前語音提醒；必要時把多彎段降速當作休息段。

實施步驟：
1. 曲率分析
- 實作細節：計算每公里平均轉向角度變化。
- 所需資源：Python、GPX
- 預估時間：1 小時

2. 轉角提醒
- 實作細節：於 >60° 轉角處設語音提示。
- 所需資源：導航 App
- 預估時間：30 分鐘

3. 替代線評估
- 實作細節：比較兩方案的曲率/時間。
- 所需資源：路線規劃工具
- 預估時間：1 小時

關鍵程式碼/設定：
```python
# 估算路線曲率：連續三點求夾角，累計每公里曲率（簡化）
import math, gpxpy
def angle(a,b,c):
    def vec(u,v): return (v.latitude-u.latitude, v.longitude-u.longitude)
    v1, v2 = vec(a,b), vec(b,c)
    dot = v1[0]*v2[0]+v1[1]*v2[1]
    n1, n2 = math.hypot(*v1), math.hypot(*v2)
    if n1*n2==0: return 0
    cosx = max(-1,min(1,dot/(n1*n2)))
    return math.degrees(math.acos(cosx))
# 將角度變化分桶至每公里，得出曲率密度指標
```

實際案例：田間小路彎多；若事先做曲率評估，可提前選擇順直替代路段。
實作環境：Python 3.11 + gpxpy
實測數據：
改善前：因多彎段均速下降 1~2 km/h
改善後：替代路段彎角少，均速回升 0.5~1.5 km/h
改善幅度：路段耗時下降 5~10%

Learning Points（學習要點）
核心知識點：
- 曲率/交叉密度對效率的影響
- 導航提示前置化
- 路段功能分區（休息段 vs 提速段）

技能要求：
必備技能：GPX 資料處理
進階技能：路線多準則評估

延伸思考：
- 如何加入路面材質/品質因子？
- 以機器學習預測路段耗時？
- 團騎中如何降低彎角風險？

Practice Exercise（練習題）
基礎練習：分析一段 GPX 的曲率密度
進階練習：對比兩條備選路線的曲率差異
專案練習：建立「曲率+交叉密度」指標的路線評分器

Assessment Criteria（評估標準）
功能完整性（40%）：曲率分析+提醒+替代線
程式碼品質（30%）：計算正確清晰
效能優化（20%）：均速/耗時改善
創新性（10%）：多準則路線評分


## Case #8: 橋樑段側風與疲勞風險管理（華江橋 85 km）

### Problem Statement（問題陳述）
業務場景：85 km 之際通過華江橋，橋上開闊易受側風影響，且體能已下滑。若風強或注意力下降，安全風險上升。
技術挑戰：在疲勞狀態下應對側風與橋面突發。
影響範圍：穩定性降低、摔車風險提高。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 橋上側風增大影響操控。
2. 疲勞導致反應降低。
3. 車流與縫隙對路線選擇受限。

深層原因：
- 架構層面：缺少風險點清單與通過策略。
- 技術層面：未結合即時風況預警。
- 流程層面：無「橋前減速/換擋/集中」SOP。

### Solution Design（解決方案設計）
解決策略：建立「橋前 200m 檢查」SOP（減速、抓下把、低一檔、外側踏重）；接入風速 API 提前預警；必要時改走下風向防護良好的替代路線。

實施步驟：
1. 風況預警
- 實作細節：騎乘前查風速，橋前提示。
- 所需資源：天氣 API
- 預估時間：30 分鐘

2. 橋前 SOP
- 實作細節：固定語音提示與動作序列。
- 所需資源：導航 App
- 預估時間：20 分鐘

3. 替代路線
- 實作細節：準備風強時的替代橋段。
- 所需資源：路線規劃工具
- 預估時間：40 分鐘

關鍵程式碼/設定：
```bash
# 取得即時風速（Open-Meteo 範例）
curl -s "https://api.open-meteo.com/v1/forecast?latitude=25.04&longitude=121.50&hourly=windspeed_10m" \
| jq '.hourly.windspeed_10m[0:6]'
# 若預測 > 25 km/h，橋段啟動高警戒 SOP
```

實際案例：85 km 橋段疲勞期，事前有 SOP 可降低風險。
實作環境：Open-Meteo API + 手機提示
實測數據：
改善前：橫風驚嚇/偏航概率高
改善後：橋段通過更穩定；風強時改道
改善幅度：橋段事故風險顯著下降（經驗值）

Learning Points（學習要點）
核心知識點：
- 橋段側風對操控影響
- SOP 在安全中的作用
- 天氣資料整合

技能要求：
必備技能：基礎操控與安全意識
進階技能：API 連接與自動提醒

延伸思考：
- 夜間橋段需增加哪些措施？
- 集團通過橋段的隊形與口令？
- 風向對選線的影響？

Practice Exercise（練習題）
基礎練習：撰寫橋前 SOP 清單
進階練習：綁定風速提醒到導航
專案練習：建立「風況→路線選擇」決策樹並實測

Assessment Criteria（評估標準）
功能完整性（40%）：預警+SOP+替代線
程式碼品質（30%）：API 使用合理
效能優化（20%）：風險明顯下降
創新性（10%）：自適應路線切換


## Case #9: 關鍵橋梁/轉岸節點的導航 Waypoints 管理

### Problem Statement（問題陳述）
業務場景：大漢溪左岸、城林橋、三鶯大橋等為轉岸/入道關鍵點，若錯過需回折或走主幹道，影響安全與時間。
技術挑戰：河濱多支流/匝道，轉向提示滯後。
影響範圍：走錯路、時間浪費、潛在風險。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. GPX 缺乏醒目 Waypoints 與語音提示。
2. 路標不一致或遮蔽。
3. 騎乘時分心拍照/欣賞風景。

深層原因：
- 架構層面：路書未標註關鍵節點。
- 技術層面：導航 App 提示距離/時機不合適。
- 流程層面：未建立「節點前 100m 專注」規範。

### Solution Design（解決方案設計）
解決策略：在所有關鍵節點寫入 GPX Waypoints 並設語音+震動；提前 200m/100m/到點三級提示；節點前禁止拍照。

實施步驟：
1. Waypoints 編輯
- 實作細節：為城林橋、三鶯大橋等加 wpt。
- 所需資源：GPX 編輯器/gpxpy
- 預估時間：40 分鐘

2. 多級提示
- 實作細節：設定 200m/100m/到點提示。
- 所需資源：導航 App
- 預估時間：20 分鐘

3. 行為規範
- 實作細節：節點前 100m 集中，不拍照。
- 所需資源：SOP
- 預估時間：10 分鐘

關鍵程式碼/設定：
```python
# gpxpy 加入 Waypoints
import gpxpy, gpxpy.gpx
gpx = gpxpy.gpx.GPX()
wpt = gpxpy.gpx.GPXWaypoint(latitude=24.954, longitude=121.327, name="三鶯大橋 右轉入自行車道")
gpx.waypoints.append(wpt)
with open('waypoints.gpx','w') as f:
    f.write(gpx.to_xml())
```

實際案例：過三鶯大橋後路線轉換，提前提示可避免錯過入口。
實作環境：gpxpy + 導航 App
實測數據：
改善前：關鍵節點錯過率高，回折 2~5 分鐘
改善後：錯過率接近 0
改善幅度：節點耗時下降 80%+

Learning Points（學習要點）
核心知識點：
- Waypoints 在導航的作用
- 提示距離策略
- 騎乘行為規範

技能要求：
必備技能：GPX 編輯
進階技能：裝置提示客製化

延伸思考：
- 團騎時由前導發口令與手勢加強？
- Waypoints 命名規則與圖標化？
- 特定時間關閉某些提示避免疲勞？

Practice Exercise（練習題）
基礎練習：為 5 個節點加入 Waypoints
進階練習：設定 3 級提示距離
專案練習：完成一條 100 km 路書的節點工程

Assessment Criteria（評估標準）
功能完整性（40%）：Waypoints+提示+規範
程式碼品質（30%）：GPX 正確可導入
效能優化（20%）：錯過率下降
創新性（10%）：命名/圖標體驗設計


## Case #10: 騎乘中動態預估終點里程與即時繞路決策

### Problem Statement（問題陳述）
業務場景：行進中才發現返程預估不足，若能早於 75 km 即預估終點里程，可更從容地插入繞路。
技術挑戰：在不完整資訊下估計「照既定路走到家」的最終里程。
影響範圍：延誤發現導致臨時補里程、體力壓力大。
複雜度評級：中

### Root Cause Analysis（根因分析）
直接原因：
1. 未計算「剩餘既定路線長度」。
2. 中途未定期檢核「目前里程 + 剩餘」。
3. 無動態繞路模板。

深層原因：
- 架構層面：缺乏事中預估機制。
- 技術層面：裝置資料欄位未客製化。
- 流程層面：未在 50/75 km 做預估檢查。

### Solution Design（解決方案設計）
解決策略：新增資料欄位「Projected Finish」（預估完騎里程=已騎+剩餘），若小於 100 km，立即推薦最近的保險圈。

實施步驟：
1. 計算欄位
- 實作細節：已騎里程+剩餘既定路 GPX 長度。
- 所需資源：碼表自訂欄位/手機 App
- 預估時間：30 分鐘

2. 檢核點
- 實作細節：在 50/75 km 強制檢視欄位。
- 所需資源：提醒設置
- 預估時間：10 分鐘

3. 繞路推薦
- 實作細節：根據當前位置選擇最近保險圈。
- 所需資源：繞路清單
- 預估時間：20 分鐘

關鍵程式碼/設定：
```python
# 簡化投影：projected = ridden_km + (route_total_km - route_progress_km)
def projected_finish(ridden_km, route_total_km, route_progress_km):
    return ridden_km + (route_total_km - route_progress_km)

print(projected_finish(60.0, 100.5, 55.0))  # 例：預估終點 105.5 km
```

實際案例：若 75 km 時預估只到 98 km，可提前在中段插入 3 km 保險圈。
實作環境：自訂資料欄位或手機儀表板
實測數據：
改善前：末段臨時補里程 1.5~3 km
改善後：中段平順插入，末段無補圈
改善幅度：尾段壓力下降 80%+

Learning Points（學習要點）
核心知識點：
- 動態預估與偏差修正
- 中途檢核點的重要性
- 預案切換時機

技能要求：
必備技能：資料欄位設定
進階技能：導航與位置關聯的繞路推薦

延伸思考：
- 可否加入交通/風況預估作加權？
- 用 ML 從歷史騎乘學習偏差模式？
- 團騎時如何同步預估？

Practice Exercise（練習題）
基礎練習：建立投影里程計算表
進階練習：在 App 儀表板增加 Projected Finish
專案練習：動態選擇保險圈算法與實測

Assessment Criteria（評估標準）
功能完整性（40%）：投影+檢核+選圈
程式碼品質（30%）：計算邏輯正確
效能優化（20%）：尾段補圈減少
創新性（10%）：智慧挑選繞路


## Case #11: 控制點（41.2 km 大溪橋）節奏管理

### Problem Statement（問題陳述）
業務場景：到大溪橋顯示 41.2 km，低於預估中點 50 km，代表整體里程不足。控制點的量測能及早暴露偏差。
技術挑戰：控制點的設計與解讀，避免「到了才知道不夠」。
影響範圍：節奏與補給安排錯配。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 控制點設置不對稱或過少。
2. 達點後未分析偏差。
3. 未配合補給策略調整。

深層原因：
- 架構層面：控制點缺乏 KPI
- 技術層面：資料欄位缺乏對比（目標 vs 實際）
- 流程層面：無「達點→決策」手續

### Solution Design（解決方案設計）
解決策略：設定對稱控制點（25/50/75 km），每達點即比較「實際里程 vs 目標點」，偏差>2 km 啟動調整（提早插入繞路或縮短停留）。

實施步驟：
1. 控制點與 KPI
- 實作細節：每達點即顯示偏差值。
- 所需資源：碼表資料欄位
- 預估時間：20 分鐘

2. 決策流程
- 實作細節：偏差門檻與相應動作。
- 所需資源：SOP
- 預估時間：20 分鐘

3. 補給聯動
- 實作細節：偏差時同步調整補給/停留。
- 所需資源：計畫表
- 預估時間：20 分鐘

關鍵程式碼/設定：
```pseudo
# 控制點 25/50/75 km 到點時
deviation = actual_km - target_km  # 例：41.2-50=-8.8
if deviation <= -2:
    action = "提早插入3km繞路；縮短下一停留5分鐘"
elif deviation >= 2:
    action = "取消繞路；增加下個停留"
notify(action)
```

實際案例：大溪橋 41.2 km 暗示總里程不足，應提早調整回程。
實作環境：碼表/手機 App
實測數據：
改善前：末段補圈
改善後：中段調整，末段順暢收官
改善幅度：節奏一致性提升

Learning Points（學習要點）
核心知識點：
- 控制點 KPI 化
- 偏差門檻與行動
- 補給聯動調整

技能要求：
必備技能：資料欄位與提醒
進階技能：行動策略表

延伸思考：
- 控制點是否應結合地形（爬升前後）？
- 团騎中以誰的碼表為準？
- 偏差累積與滾動修正？

Practice Exercise（練習題）
基礎練習：設置 3 個控制點提醒
進階練習：撰寫偏差→行動對照表
專案練習：模擬偏差場景並調整策略

Assessment Criteria（評估標準）
功能完整性（40%）：控制點+KPI+行動
程式碼品質（30%）：提醒與對照正確
效能優化（20%）：節奏穩定
創新性（10%）：動態聯動補給


## Case #12: 輪胎氣壓管理（臨停車店打氣）

### Problem Statement（問題陳述）
業務場景：返程末段順路到車店打氣，改善滾阻與手感。若起跑氣壓不足，長距離更耗力。
技術挑戰：不同胎寬/重量/路況的最佳氣壓設定。
影響範圍：滾阻、舒適、爆胎風險。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 起跑未檢查氣壓或溫度變化。
2. 胎寬與負重未換算。
3. 中途無攜帶迷你打氣筒/CO2。

深層原因：
- 架構層面：出發前檢查清單缺漏。
- 技術層面：不清楚最佳氣壓公式。
- 流程層面：未設中段快速校正點。

### Solution Design（解決方案設計）
解決策略：按胎寬與總重計算建議 PSI，出發前檢查；攜帶打氣工具；中途設定快速檢查點（例如 50 km）。

實施步驟：
1. 目標氣壓計算
- 實作細節：套用簡化公式/製造商表。
- 所需資源：胎寬、體重、車重
- 預估時間：10 分鐘

2. 出發前檢查
- 實作細節：冷胎壓檢查、備胎/補胎工具。
- 所需資源：打氣筒/壓力計
- 預估時間：10 分鐘

3. 中途校正
- 實作細節：車店或自充氣工具。
- 所需資源：迷你打氣筒/CO2
- 預估時間：5 分鐘

關鍵程式碼/設定：
```python
# 簡化胎壓建議（示意，依品牌表微調）
def recommend_psi(weight_kg, bike_kg, tire_width_mm):
    total = weight_kg + bike_kg
    base = 0.9 * total / (tire_width_mm/25)  # 粗略比例
    front = base * 0.45
    rear  = base * 0.55
    return round(front,1), round(rear,1)

print(recommend_psi(70, 9, 28))  # 28mm 胎示例
```

實際案例：末段至車店打氣後完成收官圈，手感改善。
實作環境：地面打氣筒/CO2 夾頭
實測數據：
改善前：低壓滾阻↑、蛇咬風險↑
改善後：氣壓達標，均速提高 0.3~0.8 km/h（經驗值）
改善幅度：效率提升、風險下降

Learning Points（學習要點）
核心知識點：
- 胎寬/負重/路況與氣壓關係
- 冷/熱胎壓差異
- 中途快速校正

技能要求：
必備技能：打氣/補胎
進階技能：依路況動態調整

延伸思考：
- 濕滑/石子路應降壓多少？
- 無內胎/防刺液策略？
- 溫差對壓力的影響？

Practice Exercise（練習題）
基礎練習：依個人參數計算建議 PSI
進階練習：實測不同 PSI 的騎乘手感
專案練習：建立個人化「氣壓對效率」測試報告

Assessment Criteria（評估標準）
功能完整性（40%）：計算+檢查+校正
程式碼品質（30%）：公式合理
效能優化（20%）：均速/能耗改善
創新性（10%）：個人化曲線建立


## Case #13: 自帶補給以降低對店家的依賴

### Problem Statement（問題陳述）
業務場景：本次以麵包店作為主要補給，但遇長時間排隊。對單日破百而言，過度依賴店家有時程與風險問題。
技術挑戰：兼顧熱量、電解質與時間成本。
影響範圍：中斷配速、錯過日照窗口。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 自帶補給不足。
2. 未預留 Plan B 補給。
3. 沒有補給時間上限。

深層原因：
- 架構層面：補給策略過度單一。
- 技術層面：對攜行量估算不足。
- 流程層面：未設補給優先序。

### Solution Design（解決方案設計）
解決策略：以「自帶為主、店家為輔」；自帶碳水至少 2 小時量，再用店家補足其餘；設 15 分鐘停留上限。

實施步驟：
1. 攜行量估算
- 實作細節：5 小時騎乘至少自帶 120 g 碳水。
- 所需資源：能量棒/果膠/運動飲
- 預估時間：20 分鐘

2. 優先序設計
- 實作細節：先消耗自帶，店家作加分。
- 所需資源：清單
- 預估時間：10 分鐘

3. 時間上限
- 實作細節：到店>15 分仍需排→放棄。
- 所需資源：SOP
- 預估時間：10 分鐘

關鍵程式碼/設定：
```yaml
# 補給計畫（YAML）
duration_hours: 5
carbs_per_hour_g: 60
carry:
  gels: 4    # ~25g each
  bars: 2    # ~30g each
  drink_mix: 2 # ~30g each
rules:
  store_stop_max_minutes: 15
  use_carry_first: true
```

實際案例：此次排隊 60 分，未達上限策略；次次應以自帶為主。
實作環境：個人補給包
實測數據：
改善前：停留 60 分
改善後：停留 ≤ 15 分或直接跳過
改善幅度：非騎行時間下降 75%+

Learning Points（學習要點）
核心知識點：
- 攜行 vs 現買的取捨
- 攜行量估算
- 停留上限策略

技能要求：
必備技能：補給規劃
進階技能：不同溫度策略化調整

延伸思考：
- 高溫需提升液體與鈉鹽
- 冬季如何避免結塊或凍結
- 腸胃訓練與口味輪替

Practice Exercise（練習題）
基礎練習：為 4 小時騎乘列出攜行清單
進階練習：不同溫度下的補給調整
專案練習：實測「全自帶 vs 店家為主」的時間影響

Assessment Criteria（評估標準）
功能完整性（40%）：攜行+上限+優先序
程式碼品質（30%）：配置清晰可操作
效能優化（20%）：停留時間下降
創新性（10%）：情境化調整策略


## Case #14: 以景觀激勵減輕心理疲勞（撞牆期對策之一）

### Problem Statement（問題陳述）
業務場景：過三鶯大橋後景色大變，有山有水的風景強化體驗。長距離中期容易倦怠，優選景觀段可提升動力。
技術挑戰：如何將「美景」轉化為節奏管理的一環。
影響範圍：主觀用力感、持續性與滿意度。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 路線單調導致心理疲勞。
2. 中段缺乏獎勵點。
3. 配速與補給無心理機制配合。

深層原因：
- 架構層面：路線設計缺少心理節點。
- 技術層面：沒有景觀評分資料。
- 流程層面：未設「景觀打卡點」作獎勵。

### Solution Design（解決方案設計）
解決策略：建立「景觀指數」評估路段，將高分段安排在撞牆期前後；設打卡點作輕微停留與補給，提升動機。

實施步驟：
1. 景觀指數建模
- 實作細節：POI 密度、水域/綠地權重。
- 所需資源：OSM/Google Places
- 預估時間：2 小時

2. 路段排序
- 實作細節：把高分段安排在 30~70 km。
- 所需資源：路線規劃工具
- 預估時間：40 分鐘

3. 打卡點設計
- 實作細節：每次 2~3 分鐘輕停。
- 所需資源：導航提醒
- 預估時間：20 分鐘

關鍵程式碼/設定：
```python
# 簡化景觀指數：水域/綠地/POI
score = 0.5*water_proximity + 0.3*green_area + 0.2*poi_density
# 以分段（每5km）計算，排序安排在中段
```

實際案例：過三鶯大橋後風景提升，主觀喜愛(Y)；可制度化應用。
實作環境：OSM/Places 資料
實測數據：
改善前：中段主觀用力感上升
改善後：景觀分散心理壓力，持續性提高（經驗值）
改善幅度：打卡點 2~3 分鐘內控管，不影響總時程

Learning Points（學習要點）
核心知識點：
- 心理節點設計
- 景觀指數概念
- 打卡與補給結合

技能要求：
必備技能：路線重構
進階技能：資料化景觀評估

延伸思考：
- 人流 vs 景觀的權衡？
- 打卡點是否與補給點合併？
- 如何避免過度停留？

Practice Exercise（練習題）
基礎練習：為路線標 3 個景觀點
進階練習：以 5 km 為單位做景觀評分
專案練習：將景觀指數融入 100 km 路線並實測主觀體感

Assessment Criteria（評估標準）
功能完整性（40%）：指數+排序+打卡
程式碼品質（30%）：指標設計清晰
效能優化（20%）：心理疲勞降低
創新性（10%）：資料化景觀模型


## Case #15: 水域/濕地視覺誤判風險（布袋蓮看似草地）

### Problem Statement（問題陳述）
業務場景：柑園橋旁公園的蓮花池季節不對，水面覆蓋布袋蓮，遠看像草地。若誤踩/騎入有落水風險。
技術挑戰：對水域覆蓋植生的視覺誤判。
影響範圍：人身安全、設備損壞。
複雜度評級：低

### Root Cause Analysis（根因分析）
直接原因：
1. 視覺上難以辨識水面覆蓋植物。
2. 休息/拍照時靠近水際。
3. 無安全邊界意識。

深層原因：
- 架構層面：缺乏環境風險標示與教育。
- 技術層面：地圖缺少危險區域標記。
- 流程層面：休息/拍照無安全規範。

### Solution Design（解決方案設計）
解決策略：在地圖中標註「水域偽草」危險點；休息點與拍照點保持 2~3 m 安全距離；團騎時口令提醒。

實施步驟：
1. 危險點標註
- 實作細節：My Maps 加危險區域圖層。
- 所需資源：地圖工具
- 預估時間：20 分鐘

2. 安全距離規範
- 實作細節：SOP 定義水際安全線。
- 所需資源：隊規
- 預估時間：10 分鐘

3. 團騎提醒
- 實作細節：口令與手勢標準化。
- 所需資源：簡報/訓練
- 預估時間：20 分鐘

關鍵程式碼/設定：
```geojson
{
 "type": "FeatureCollection",
 "features": [
  {"type":"Feature","properties":{"name":"蓮花池-布袋蓮區","danger":"水域偽草"},
   "geometry":{"type":"Polygon","coordinates":[[[121.4,25.0],[121.401,25.0],[121.401,25.001],[121.4,25.001],[121.4,25.0]]]}}
 ]
}
```

實際案例：布袋蓮看似草地，提醒勿踩入，留意安全距離。
實作環境：Google My Maps/GeoJSON
實測數據：
改善前：靠近水際拍照風險
改善後：危險區標示與口令提醒
改善幅度：落水風險大幅下降

Learning Points（學習要點）
核心知識點：
- 水域偽裝風險辨識
- 危險區標示
- 團騎安全口令

技能要求：
必備技能：地圖標註
進階技能：安全 SOP 制定

延伸思考：
- 夜騎如何加強辨識？
- 雨天水位變化的附加風險？
- APP 中增設危險提示圖層？


--------------------------------
案例分類

1) 按難度分類
- 入門級（適合初學者）
  - Case 1, 2, 4, 5, 9, 11, 12, 13, 15
- 中級（需要一定基礎）
  - Case 3, 6, 7, 8, 10, 14
- 高級（需要深厚經驗）
  - 無（本文情境多為路線與節奏管理）

2) 按技術領域分類
- 架構設計類
  - Case 1, 2, 5, 10, 11, 13
- 效能優化類
  - Case 3, 7, 12, 14
- 整合開發類
  - Case 6, 9, 10
- 除錯診斷類
  - Case 1, 7, 9, 11
- 安全防護類
  - Case 8, 15

3) 按學習目標分類
- 概念理解型
  - Case 3, 14, 15
- 技能練習型
  - Case 4, 6, 7, 9, 12
- 問題解決型
  - Case 1, 2, 5, 8, 10, 11, 13
- 創新應用型
  - Case 6, 10, 14

--------------------------------
案例關聯圖（學習路徑建議）

- 先學案例（基礎路線與節奏）
  - Case 1（里程規劃緩衝）→ Case 11（控制點節奏）→ Case 2（收官圈保險）
- 中段能力（補給/導航/繞路）
  - Case 3（補給配速）→ Case 9（節點 Waypoints）→ Case 10（動態預估與繞路）
- 路線資料與效率提升
  - Case 6（新道更新）→ Case 7（曲率平滑）→ Case 14（景觀激勵）
- 風險與安全
  - Case 12（氣壓）→ Case 8（橋段側風）→ Case 15（水域偽草）
- 時間與 POI 管理
  - Case 4（POI 辨識）→ Case 5（排隊時間風險）→ Case 13（自帶補給）

依賴關係：
- Case 1 是整體規劃的基礎，驅動 Case 2、10、11 的事中控制。
- Case 3 與 11 互相強化（節點即補給時機）。
- Case 6 為 Case 7、9 的資料基礎；Case 9 支援 Case 10 的決策準確度。
- Case 5 與 13 是互補策略：一個控停留時間，一個降低對店依賴。

完整學習路徑：
1) Case 1 → 11 → 2（建立「規劃→控制→收官」閉環）
2) Case 3（體能與營養基礎）
3) Case 6 → 9 → 10（資料更新、導航強化、動態決策）
4) Case 7 → 14（效率與心態）
5) Case 12 → 8 → 15（裝備與安全）
6) Case 4 → 5 → 13（POI 與時間/補給整合）

完成以上路徑，能從單次休閒破百進階到具備可複製、可擴展、具風險控制的長距離騎乘工作流。