# ChickenHouse.Web.CommunityServerExtension 新功能之二：Blog 側邊欄顯示最新十筆回應

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是 Community Server（CS）？
- A簡: CS 是基於 .NET 的社群平台，整合部落格、討論區、相簿與主題樣版。
- A詳: Community Server 是早期流行的 ASP.NET 社群平台，提供部落格、論壇、相簿、使用者管理與權限等功能。其強項在於模組化與主題樣版機制，能快速打造社群網站。本文所談的新功能即是為 CS 1.1 客製的側邊欄「最新十筆回應」，改善留言發現性並提升互動。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q3, B-Q1

Q2: 什麼是 ChickenHouse.Web.CommunityServerExtension？
- A簡: 這是針對 CS 的自製擴充套件，新增或補足缺失功能。
- A詳: ChickenHouse.Web.CommunityServerExtension 是作者針對 Community Server 的自製擴充方案，以 .NET 元件與樣版整合方式，補足原系統未提供或不便使用的功能。本文新功能是讓 Blog 側邊欄能顯示最新十筆回應，透過此擴充快速部署至既有網站，不需大幅改動核心。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, B-Q2, B-Q7

Q3: 「最新十筆回應」功能是什麼？
- A簡: 在 Blog 側邊欄列出最新 10 筆已核准留言，含作者、摘要、連結。
- A詳: 此功能會在 Blog 版面的側邊欄顯示全站或部落格範圍內最新的 10 則留言（可設定），通常包含留言者、摘要（截斷字數）、留言時間與連結至原文與留言定位。目的是讓訪客能一眼掌握最新互動，減少逐篇翻找留言的成本。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, A-Q10, B-Q3

Q4: 為什麼 CS 1.1 沒內建「最新回應」側邊欄？
- A簡: 版本設計未涵蓋此 UI 構件，需透過擴充或客製取得。
- A詳: CS 1.1 著重核心社群模組與主題機制，未標配「最新留言」側欄元件。管理者可從後台看留言，但一般使用者無便捷入口。因此需透過擴充（自製控制項或樣版）來補齊，藉由查詢留言資料並渲染於側欄達成。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, B-Q2, B-Q7

Q5: 為什麼需要在 Blog 側邊欄顯示最新回應？
- A簡: 降低尋找新留言的成本，提升互動與回訪率。
- A詳: 留言發現性差會降低互動。側邊欄的「最新回應」讓訪客快速掌握討論動態，促進追蹤與參與，對站方也能提升內容活性與停留時間。與只在後台查詢相比，這是將關鍵訊息前置於前台的設計優化。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, A-Q9, A-Q6

Q6: 此功能的核心價值是什麼？
- A簡: 提升訊息可見性、互動效率與使用者體驗的即時性。
- A詳: 核心價值在即時聚合互動訊號，提高留言被看見的機率，減輕使用者逐篇檢索負擔。同時兼顧效能與可維護性（快取、設定化），讓網站在不改核心的前提下可快速強化使用者體驗。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, B-Q5, C-Q1

Q7: 「回應」「留言」「Feedback」有何差異？
- A簡: 在 CS 語境多為同義；Feedback 有時包含引用/トラックバック。
- A詳: 多數情境下「回應」「留言」指對文章的評論。CS 某些模組使用「Feedback」一詞，可能包含留言與引用（trackback/pingback）。實作時需明確界定資料來源：僅留言、或留言+引用，以影響查詢與呈現。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q3, C-Q2, C-Q9

Q8: 為何 CS 的樣版與多專案架構增加開發複雜度？
- A簡: 多層抽象與分散專案/組件，使追蹤輸出來源困難。
- A詳: CS 採多專案、多 DLL、樣版分層（主題、控制項、頁面）設計。內容輸出經過控制項、樣版、皮膚等多層轉譯，導致要找到實際渲染「幾個字」的 code 需追蹤多層抽象與組件邊界，增加客製難度與學習曲線。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, B-Q7, D-Q5

Q9: 後台檢視與側欄清單的差異是什麼？
- A簡: 後台供管理者檢閱；側欄面向所有訪客即時曝光。
- A詳: 後台列表提供完整管理能力（審核、刪除、搜尋），但僅管理者可用。側欄清單則是輕量、即時的前台視窗，面向所有訪客促進互動。兩者互補：後台強管理，前台強曝光與導覽。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, A-Q6, C-Q6

Q10: 「最新」的排序依據應該是什麼？
- A簡: 以留言建立時間降冪，僅取已核准且未隱藏者。
- A詳: 一般採留言建立時間（CreatedUtc/DateCreated）降冪排序，以反映時間線。應過濾未核准、已刪除或屬於隱私內容的留言。若平台有編輯更新，通常仍以建立時間為準，以避免舊文重排造成混淆。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q3, C-Q2, D-Q4

Q11: 為何預設顯示 10 筆？是否可設定？
- A簡: 10 筆兼顧資訊量與版面；可用設定值調整。
- A詳: 10 筆能在常見側欄寬度內提供足夠脈動感且不致冗長。實務上應將筆數參數化（web.config、資料庫或後台設定），以依站點規模與使用者回饋調整為 5、10、20 等不同數量。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q9, C-Q4, D-Q2

Q12: 這項功能適合放在哪些頁面與版位？
- A簡: 放於 Blog 全站側欄或文章頁側欄，提升全局能見度。
- A詳: 常見做法是放在 Blog 站台的主側欄（全站共用 master/skin），於首頁、列表與文章頁皆可見，以提供一致的導覽。也可限定於文章頁顯示，依需求權衡版面密度與導覽集中度。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q6, B-Q2, D-Q7

Q13: 實作時的資安與隱私注意事項有哪些？
- A簡: 僅顯示已核准內容，過濾 HTML，避免洩露私區資訊。
- A詳: 僅載入已通過審核且未被刪除的留言；輸出時以 HTML 編碼避免 XSS；避免顯示私人群組或草稿下的留言；尊重使用者隱私（不顯示 email/IP）；對外連結加 rel 屬性；必要時遮蔽敏感詞。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, D-Q4, C-Q8

Q14: 此功能與樣式/主題要如何整合？
- A簡: 使用主題 CSS class 與樣板結構，維持風格一致。
- A詳: 以既有主題的 CSS 命名規則包覆元件（例如 .widget .latest-comments），遵循樣版區塊層級與間距設定；避免內嵌樣式，將配色與字級交由主題控制；必要時提供覆蓋用的獨立樣式檔以便主題切換時重用。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q7, B-Q1, D-Q7

Q15: 此功能為何需要快取？
- A簡: 降低資料庫負載與延遲，維持側欄穩定快速。
- A詳: 「最新留言」屬於高讀低寫場景，快取能顯著降低每次頁載查詢的成本。可採用時間到期或相依性失效策略，平衡即時性與效能。側欄元件常在每頁重複渲染，快取能累積效益。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, C-Q5, D-Q8

Q16: 為什麼作者說「追到真正的 code 不簡單」？
- A簡: 因多層樣版與多 DLL 抽象，渲染路徑分散難追。
- A詳: CS 將視圖、控制項、主題與服務分散在多個專案與組件。最終輸出往往由多層包裝控制項與樣板組合而成。要修改或插入功能，須先釐清渲染管線與插點，這正是作者強調的困難來源。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, B-Q2, B-Q7

Q17: 自行擴充與等待官方版本的取捨是什麼？
- A簡: 自行擴充快拿到價值；官方穩定但等待與限制多。
- A詳: 自行擴充可立即解痛點、量身定制，但需承擔維護與升級相容成本。等待官方提供，穩定性與支援較佳，但時程不可控且功能彈性有限。可折衷：以擴充實作，注意隔離層，降低未來替換成本。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q11, D-Q6, C-Q10

Q18: 功能可延伸到哪些內容型別（如相簿回應）？
- A簡: 可擴充至相簿、論壇回覆，成為全站最新互動清單。
- A詳: 除 Blog 留言外，可統一聚合 Gallery 圖片回應、Forum 回覆等，形成全站「最新互動」清單。需在資料層提供不同來源的查詢與映射，並在 UI 标示來源類型與導向連結的正確錨點。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: C-Q9, B-Q3, D-Q9

### Q&A 類別 B: 技術原理類

Q1: CS 的樣版與主題系統如何運作？
- A簡: 以皮膚/樣版定義版面，控制項渲染，支援主題切換。
- A詳: CS 以樣版檔與皮膚（skin）定義頁面區塊，透過伺服端控制項將資料渲染至區塊。主題切換會載入不同樣式與佈局檔。核心原理是分離資料與呈現，使擴充可透過插入控制項或替換樣版達成外觀與功能擴展。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, C-Q6, D-Q7

Q2: 在 CS 中嵌入側邊欄元件的流程為何？
- A簡: 決定位址→建立控制項→註冊→樣版放置→資料繫結。
- A詳: 先確定版位（master/skin 區塊），建立 ASP.NET 使用者控制項（.ascx）或伺服端控制項（.dll），在頁面/樣版註冊並放入側欄區域，於 Page_Load 取資料（快取優先），繫結至 Repeater 或 ListView，最後交由樣式渲染。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q1, C-Q6, B-Q8

Q3: 取得最新十筆回應的資料流是什麼？
- A簡: 資料庫查詢→過濾核准→排序→回傳簡化模型渲染。
- A詳: 從資料庫以 SQL 取出最新留言，WHERE 篩核准/未刪除，ORDER BY 建立時間 DESC，TOP N 控制數量。將結果映射為輕量 ViewModel（含作者、摘要、連結），傳給 UI 綁定。可在服務層封裝查詢與快取邏輯。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q2, C-Q3, B-Q5

Q4: 資料庫要如何支援「最新回應」高效查詢？
- A簡: 建索引於建立時間與外鍵，僅取必要欄位。
- A詳: 在留言表的 CreatedDate、Approved、PostId 建複合索引，查詢時 SELECT 僅必要欄位，避免大欄位（如全文）造成 IO；以 TOP N、ORDER BY 利用索引，確保穩定低延遲；必要時以物化檢視/快取中介層減輕負載。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q2, D-Q2, D-Q10

Q5: 快取策略與失效機制如何設計？
- A簡: 時間到期+事件失效並用，權衡即時性與效能。
- A詳: 使用 ASP.NET Cache/MemoryCache 以絕對過期（如 3-5 分鐘）降低抖動；若能接上發佈事件（新增留言）則主動清除。亦可使用 CacheDependency（檔案/自定）或輕量訊息機制；注意多機部署需分散式快取或同步策略。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q5, D-Q8, A-Q15

Q6: 安全機制（審核、XSS 防護）背後機制是什麼？
- A簡: 後台審核旗標控可見，輸出統一 HTML 編碼。
- A詳: 審核透過資料列 Approved/IsPublic 欄位控制；查詢層過濾未核准；輸出層採 HttpUtility.HtmlEncode 或白名單清洗避免 XSS；連結採 rel="nofollow noopener"；注意防止 HTML 注入與腳本事件屬性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q8, D-Q4, A-Q13

Q7: 多專案/多 DLL 架構下的擴充點在哪？
- A簡: 以服務介面、控制項插入與樣版鉤點延伸。
- A詳: 透過介面定義服務層（ICommentService）、以自有組件提供實作；UI 端以使用者控制項或伺服端控制項作為插入點；樣版層藉標記或 Zone 放置。保持界面穩定，降低對核心組件的硬相依。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q8, B-Q8, D-Q6

Q8: 組件分工該如何切割？
- A簡: 資料存取、網域服務、UI 呈現三層責任分離。
- A詳: DAL 專職 SQL/連線與對映；Service 封裝業務規則（過濾核准、快取）；UI 控制項只處理繫結與樣式。此分層利於測試與未來替換資料來源或樣式，降低維護成本。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q1, C-Q3, B-Q3

Q9: 設定管理該如何設計？
- A簡: 以 web.config/appSettings 或自定設定表驅動。
- A詳: 將顯示筆數、是否含引用、快取時間等參數化。初期可用 web.config appSettings；規模成長後可改為資料庫設定表與後台管理 UI。讀取設定時提供預設值與邊界驗證，避免不合理數值影響效能。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: C-Q4, A-Q11, D-Q2

Q10: 在複雜架構中如何做日誌與追蹤？
- A簡: 注入記錄器，於關鍵路徑標註事件與耗時。
- A詳: 使用 ILogger/Trace 於資料查詢、快取命中/失效、繫結渲染記錄關鍵事件與耗時；於例外路徑捕捉堆疊；提供診斷開關。多 DLL 情境下以一致的 CorrelationId 串聯請求，利於跨層追查。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: D-Q1, D-Q2, B-Q5

Q11: 升級相容性該如何規劃？
- A簡: 抽象依賴、少動核心、版本檢測與功能旗標。
- A詳: 使用介面/抽象層隔離 CS 版本差異；避免修改核心組件，採外掛式；於啟動時檢測版本，根據結果調整 API 呼叫或關閉部分功能；對樣版改動保持最小侵入，方便升級時比對合併。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: D-Q6, A-Q17, C-Q10

Q12: 國際化/在地化如何處理？
- A簡: 文案放入資源檔，依文化自動載入對應語系。
- A詳: 將標題、空狀態提示、日期格式等放入 .resx 資源檔；控制項於渲染時依 Thread.CurrentUICulture 取對應字串；日期以本地化格式顯示；避免將文案硬編於樣板或程式碼中。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: C-Q7, D-Q3, A-Q14

### Q&A 類別 C: 實作應用類（10題）

Q1: 如何以 UserControl 實作「最新十筆回應」？
- A簡: 建立 .ascx 控制項，查詢留言、快取結果、繫結列表。
- A詳: 步驟：1) 建立 LatestComments.ascx（含 Repeater/ListView）；2) 於 code-behind 讀取快取，若無則查 DB；3) 綁定資料並輸出 HTML；4) 加入至側欄樣版。範例：<%@ Control %> + Repeater ItemTemplate 顯示作者、摘要、時間與連結。注意分層與例外處理。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, C-Q3, C-Q5

Q2: 如何撰寫 SQL 取得已核准的最新 10 筆留言？
- A簡: 以 TOP 10、WHERE Approved=1、依 CreatedDate DESC 排序。
- A詳: 具體 SQL（依實際資料表名調整）：SELECT TOP 10 c.CommentID,c.Body,c.Created,c.Author,p.PostID,p.Title FROM dbo.Comments c JOIN dbo.Posts p ON p.PostID=c.PostID WHERE c.Approved=1 AND c.IsDeleted=0 ORDER BY c.Created DESC; 可加入站台/部落格範圍條件。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, B-Q4, D-Q2

Q3: 如何用 ADO.NET 讀取並繫結到 Repeater？
- A簡: 以 SqlConnection/SqlCommand 取 DataReader 綁定控制項。
- A詳: 程式碼片段：using(var cn=new SqlConnection(conn)){var cmd=new SqlCommand(sql,cn);cn.Open();using(var rd=cmd.ExecuteReader()){rpt.DataSource=rd;rpt.DataBind();}} 再於 ItemTemplate 使用 <%# Eval("Author") %>、摘要方法截斷內容字數。注意連線管理與例外處理。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q2, B-Q8, D-Q1

Q4: 如何在 web.config 設定顯示筆數與快取時間？
- A簡: 使用 appSettings，如 LatestComments.Count、CacheMinutes。
- A詳: 範例：<appSettings><add key="LatestComments.Count" value="10"/><add key="LatestComments.CacheMinutes" value="5"/></appSettings> 程式讀取：int count=int.Parse(ConfigurationManager.AppSettings["LatestComments.Count"]??"10"); 以此控制 TOP N 與快取期限。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q9, A-Q11, C-Q5

Q5: 如何加入快取避免每次查詢？
- A簡: 以 Cache/MemoryCache 儲存結果，時間到期或事件失效。
- A詳: 片段：var key=$"LatestComments:{count}";var data=Cache[key] as DataTable;if(data==null){data=LoadFromDb(count);Cache.Insert(key,data,null,DateTime.Now.AddMinutes(cacheMin),Cache.NoSlidingExpiration);}rpt.DataSource=data; 可加自訂失效觸發（留言新增時移除快取）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, D-Q8, A-Q15

Q6: 如何把控制項加到側欄樣版？
- A簡: 在主版/皮膚註冊控制項，置入側欄 Zone。
- A詳: 在 .ascx 或 .master 加：<%@ Register Src="~/Controls/LatestComments.ascx" TagPrefix="ch" TagName="LatestComments" %> 然後在側欄區塊：<ch:LatestComments runat="server" ID="LatestComments1" /> 部署後確認樣版載入順序與命名空間正確。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q2, A-Q12, D-Q7

Q7: 如何處理樣式與 HTML 結構？
- A簡: 使用語意化列表與主題樣式類別，避免內嵌樣式。
- A詳: HTML 建議：<div class="widget latest-comments"><h3>最新回應</h3><ul class="list"><li><a href="...">作者</a><span class="excerpt">...</span><time>...</time></li>...</ul></div> CSS 放入主題檔案，遵循既有排版與字級，確保深/淺色主題皆清晰。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q14, B-Q1, D-Q3

Q8: 如何過濾未核准或敏感內容？
- A簡: SQL WHERE 篩 Approved=1 並於輸出做 HtmlEncode。
- A詳: SQL 過濾核准/刪除狀態；應用層再次檢查權限；輸出階段對作者名、內容摘要做 HtmlEncode 或白名單過濾；可加入敏感詞遮蔽；避免顯示 email、IP 等個資；提供「更多」連結避免長文露出。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, D-Q4, A-Q13

Q9: 如何納入相簿（Gallery）等其他回應來源？
- A簡: 抽象資料來源，統一映射，合併排序渲染。
- A詳: 設計 IFeedbackSource 供不同模組實作（Blog、Gallery、Forum），各自提供「取最新 N 筆」方法；服務層合併結果並依 CreatedDate 排序取前 N；UI 加入來源標籤。初期也可用 UNION ALL 合併不同表。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q18, B-Q3, D-Q9

Q10: 如何打包、部署與回滾？
- A簡: 打包 DLL/ASCX/CSS，備份樣版，支援設定開關回退。
- A詳: 建置輸出控制項 DLL、.ascx、樣式與設定範例；部署至 bin、Controls、主題資料夾；修改樣版前先備份；提供 appSettings 開關（EnableLatestComments=false）以便緊急停用；出問題時回復備份並檢查相依版本。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q5, D-Q6, A-Q17

### Q&A 類別 D: 問題解決類（10題）

Q1: 側邊欄清單顯示空白怎麼辦？
- A簡: 檢查資料來源、快取鍵、資料繫結與樣版可見性。
- A詳: 症狀：完全不顯示或空容器。可能原因：SQL 無資料（範圍/核准條件過嚴）、快取鍵不一致、DataBind 遺漏、控制項被 CSS 隱藏。解法：直接跑 SQL 驗證、暫停快取、加日誌、開發工具檢視 DOM。預防：加空狀態提示與監控。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q3, B-Q10, C-Q5

Q2: 頁面載入變慢的原因與解法？
- A簡: 查詢未命中索引或無快取；加索引與快取改善。
- A詳: 症狀：TTFB 增加、側欄渲染慢。原因：缺索引、TOP N + ORDER BY 掃描、每請求直打 DB、N+1 查詢。解法：加索引、只取必要欄位、導入快取、降低筆數、避免在 UI 迴圈中再查詢。預防：壓測與監控。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q4, B-Q5, C-Q2

Q3: 文字亂碼或編碼不正確怎麼處理？
- A簡: 統一 UTF-8，設定 web.config globalization 與編碼。
- A詳: 症狀：作者名或內容出現問號/亂碼。原因：資料庫與頁面編碼不一致。解法：資料庫欄位使用 NVARCHAR，頁面 <meta charset="utf-8">，web.config globalization requestEncoding/responseEncoding 設 UTF-8。預防：避免混用 Latin1。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q7, B-Q12, C-Q3

Q4: 顯示了未核准或垃圾留言怎麼辦？
- A簡: 修正查詢條件與輸出編碼，加入審核與過濾。
- A詳: 症狀：出現未核准/垃圾內容。原因：WHERE 遺漏 Approved=1、快取含舊資料、未做 HtmlEncode。解法：補條件、清空快取、加入 XSS 防護與敏感詞；導入審核流程。預防：測試與單元測試覆蓋。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, C-Q8, A-Q13

Q5: 佈署後出現找不到 DLL 或類型錯誤？
- A簡: 檢查 bin 相依、版本衝突與註冊標記一致性。
- A詳: 症狀：Parser Error、Type not found。原因：DLL 未部署、版本不符、命名空間改動、註冊標記 TagPrefix/TagName 錯誤。解法：比對 bin、啟用 AssemblyBinding Log、修正 Register 標記。預防：自動化部署與檢查清單。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q6, C-Q10, A-Q8

Q6: 升級 CS 後控制項失效怎麼辦？
- A簡: 檢查 API/樣版變更，加入相容層或功能旗標。
- A詳: 症狀：版位消失或錯誤。原因：樣版區塊命名變更、資料結構調整。解法：建立相容抽象，條件編譯或配置切換不同實作；重新對應樣版區域。預防：升級前差異比對與沙箱驗證。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q11, A-Q17, C-Q10

Q7: 更換主題後小工具不見了怎麼辦？
- A簡: 新主題未放置控制項或區塊命名不一致。
- A詳: 症狀：換皮膚後不顯示。原因：新主題的側欄模板未包含控制項、區塊 ID 不同。解法：在新主題樣板重加 Register 與控制項標記，對齊區塊命名。預防：主題切換清單化，提供共享片段。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, C-Q6, A-Q14

Q8: 新增留言後清單不更新？
- A簡: 快取未失效；縮短過期或加入事件驅動清除。
- A詳: 症狀：發新留言仍顯示舊資料。原因：僅時間快取，未即時失效。解法：縮短快取時間、於留言新增後呼叫清除快取、使用分散式快取訊號。預防：設計快取鍵與失效策略，提供手動刷新。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, C-Q5, A-Q15

Q9: 連結導向錯誤或無法定位到留言錨點？
- A簡: 連結拼接錯誤或路由改動，校正 URL 與 anchor。
- A詳: 症狀：點擊開啟錯文或不在留言位置。原因：URL 生成漏參數、anchor ID 與前端不一致、路由變更。解法：統一用平台 URL Helper、檢查留言 anchor 命名規則；升級路由時更新生成邏輯。預防：自動化連結測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q1, C-Q9, B-Q2

Q10: 查詢偶發逾時或鎖表如何處理？
- A簡: 最小化查詢、適當隔離層級與索引優化。
- A詳: 症狀：高峰時逾時。原因：全表掃描、與發文寫入互鎖。解法：新增覆蓋索引、讀取使用 READ COMMITTED SNAPSHOT 或 NOLOCK（權衡一致性）、縮短交易時間、分離讀寫。預防：監控與定期重整索引。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q4, C-Q2, D-Q2

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是 Community Server（CS）？
    - A-Q2: 什麼是 ChickenHouse.Web.CommunityServerExtension？
    - A-Q3: 「最新十筆回應」功能是什麼？
    - A-Q4: 為什麼 CS 1.1 沒內建「最新回應」側邊欄？
    - A-Q5: 為什麼需要在 Blog 側邊欄顯示最新回應？
    - A-Q6: 此功能的核心價值是什麼？
    - A-Q7: 「回應」「留言」「Feedback」有何差異？
    - A-Q9: 後台檢視與側欄清單的差異是什麼？
    - A-Q10: 「最新」的排序依據應該是什麼？
    - A-Q11: 為何預設顯示 10 筆？是否可設定？
    - A-Q12: 這項功能適合放在哪些頁面與版位？
    - B-Q1: CS 的樣版與主題系統如何運作？
    - B-Q2: 在 CS 中嵌入側邊欄元件的流程為何？
    - C-Q6: 如何把控制項加到側欄樣版？
    - C-Q7: 如何處理樣式與 HTML 結構？

- 中級者：建議學習哪 20 題
    - B-Q3: 取得最新十筆回應的資料流是什麼？
    - B-Q4: 資料庫要如何支援「最新回應」高效查詢？
    - B-Q5: 快取策略與失效機制如何設計？
    - B-Q6: 安全機制（審核、XSS 防護）背後機制是什麼？
    - B-Q8: 組件分工該如何切割？
    - B-Q9: 設定管理該如何設計？
    - B-Q10: 在複雜架構中如何做日誌與追蹤？
    - C-Q1: 如何以 UserControl 實作「最新十筆回應」？
    - C-Q2: 如何撰寫 SQL 取得已核准的最新 10 筆留言？
    - C-Q3: 如何用 ADO.NET 讀取並繫結到 Repeater？
    - C-Q4: 如何在 web.config 設定顯示筆數與快取時間？
    - C-Q5: 如何加入快取避免每次查詢？
    - C-Q8: 如何過濾未核准或敏感內容？
    - D-Q1: 側邊欄清單顯示空白怎麼辦？
    - D-Q2: 頁面載入變慢的原因與解法？
    - D-Q3: 文字亂碼或編碼不正確怎麼處理？
    - D-Q4: 顯示了未核准或垃圾留言怎麼辦？
    - D-Q5: 佈署後出現找不到 DLL 或類型錯誤？
    - A-Q13: 實作時的資安與隱私注意事項有哪些？
    - A-Q14: 此功能與樣式/主題要如何整合？

- 高級者：建議關注哪 15 題
    - A-Q8: 為何 CS 的樣版與多專案架構增加開發複雜度？
    - A-Q15: 此功能為何需要快取？
    - A-Q17: 自行擴充與等待官方版本的取捨是什麼？
    - A-Q18: 功能可延伸到哪些內容型別（如相簿回應）？
    - B-Q7: 多專案/多 DLL 架構下的擴充點在哪？
    - B-Q11: 升級相容性該如何規劃？
    - B-Q12: 國際化/在地化如何處理？
    - C-Q9: 如何納入相簿（Gallery）等其他回應來源？
    - C-Q10: 如何打包、部署與回滾？
    - D-Q6: 升級 CS 後控制項失效怎麼辦？
    - D-Q7: 更換主題後小工具不見了怎麼辦？
    - D-Q8: 新增留言後清單不更新？
    - D-Q9: 連結導向錯誤或無法定位到留言錨點？
    - D-Q10: 查詢偶發逾時或鎖表如何處理？
    - B-Q5: 快取策略與失效機制如何設計？