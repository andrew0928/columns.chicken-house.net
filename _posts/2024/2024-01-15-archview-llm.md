---
layout: post
title: [架構師觀點] 開發人員該如何看待 AI 帶來的改變?
categories:
- 
tags: []
published: false
comments_disqus: false
comments_facebook: false
comments_gitalk: false
redirect_from:
logo: 
---

九年前 (2016)，寫過一篇文章: [.NET 開發人員該如何看待 Open Source Solutions?](/2016/05/05/archview-net-open-source/)，當時會想寫這篇的動機很單純，那是個 Microsoft 新任 CEO 剛上任的年代 (Satya Nadella, 2014 接任 Microsoft CEO), 當時 Microsoft 的策略大幅改變, 所以我寫了這篇文章來說明我的看法。

到了 2023, 整個軟體資訊業，都被 AI 翻了一輪，Microsoft 大舉跟進，又是另一個時代的翻轉。我去年本來也打算再寫一篇，無奈當時還是個 AI 的門外漢，應該寫不出什麼東西.. 不過累積了一年，加上最近想通了一些事情，就有了這一篇文章。

在開始講我的看法前，先來看看一小段我的 POC 吧，後面我的心得，跟我的觀點，都可以從這個簡單的 POC 得到驗證。想看一點 (真的就只有一點點) 技術實做的，就繼續往下看；想直接看觀點的可以跳到第二段開始。

這個 POC, 是我最近自己讀書時間嘗試的 side project, 用到了 GPTs, 也用到了過去兩年我一直在談的 API First, 用的案例是電商領域常見的購物 API, 掛上 Chat GPT, 讓 AI 可以扮演 [安德魯小舖]() 專業的店長，你可以跟他講你的需求 (我刻意提出許多 API 不支援的要求來刁難 AI)，結果 AI 超乎我想像，還真的能幫我把適當的商品加入購物車，並且用對話的方式幫你成立訂單的 demo ...

<!--more-->

# 1, 安德魯小舖 AI Demo

在之前的 side project, 我研究了購物網站的 domain model, 也開了對應的 API, 這次 PoC 我單純想試看看 ChatGPT Custom Action 的能力能到哪裡, 於是花了點時間，打造了 "安德魯小舖" 這個 GPTs, 並且把購物網站的 API 掛上去, 我期待這樣整合的結果，安德魯小舖 GPT 就能扮演真的店長, 我能跟他聊天，他能回答我問題，也能推薦我該買什麼，幫我結帳。

想看完整 [對談紀錄]() 的可以看這邊，購物網站 [API 規格]() 我也一起放上來，我把這情境中我覺得超出我期待的地方說明一下:


首先，對話一開始，我就問了店裡有賣什麼:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-17-09.png)

其中看到 "已與 xxxxxx.xxxx.xxx 進行對話"，就代表 GPTs 背後已經在呼叫你的 API 了，箭頭往下拉可以看到背後 POST 了什麼資訊.. 這邊還如預期，GPTs 中規中矩的呼叫了 /api/products, 把取得的商品資訊 (json) 轉成清單顯示給我看。 GPTs 蠻細心的地方是，商品資訊還會自動幫我摘要.. 我原本寫的內容比較囉嗦... 為了方便對照，底下是 API 原生傳回的內容:

```json

[
  {
    "id": 1,
    "name": "18天台灣生啤酒 355ml",
    "description": "18天台灣生啤酒未經過巴氏德高溫殺菌，採用歐洲優質原料，全程0-7°C冷藏保鮮，猶如鮮奶與生魚片般珍貴，保留最多啤酒營養及麥香風味；這樣高品質、超新鮮、賞味期只有18天的台灣生啤酒，值得您搶鮮到手!",
    "price": 65
  },
  {
    "id": 2,
    "name": "可口可樂® 350ml",
    "description": "1886年，美國喬治亞州的亞特蘭大市，有位名叫約翰•潘伯頓（Dr. John S. Pemberton）的藥劑師，他挑選了幾種特別的成分，發明出一款美味的糖漿，沒想到清涼、暢快的「可口可樂」就奇蹟般的出現了！潘伯頓相信這產品可能具有商業價值，因此把它送到傑柯藥局（Jacobs' Pharmacy）販售，開始了「可口可樂」這個美國飲料的傳奇。而潘伯頓的事業合夥人兼會計師：法蘭克•羅賓森（Frank M. Robinson），認為兩個大寫C字母在廣告上可以有不錯的表現，所以創造了\"Coca‑Cola\"這個名字。但是讓「可口可樂」得以大展鋒頭的，卻是從艾薩•坎德勒（Asa G. Candler）這個具有行銷頭腦的企業家開始。",
    "price": 18
  },
  {
    "id": 3,
    "name": "御茶園 特撰冰釀綠茶 550ml",
    "description": "新升級!台灣在地茶葉入，冰釀回甘。台灣在地茶葉，原葉沖泡。如同現泡般的清新綠茶香。",
    "price": 25
  }
]

```

接著我就開始出難題給 GPTs 了... 我的 API 只有提供商品單價，或是你加入購物車後，會有 API ( /api/carts/{cart-id}/estimate ) 會傳回結帳金額的試算結果。這段 code 背後有實做折扣條件的計算。背後的規則是:

> 18天台灣生啤酒 有第二件六折優惠

不過這規則並沒有 API 揭露，因此需要推測，並且加入購物車試看看才能知道結果。所以我出了難題給 GPTs:


![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-21-19.png)


結果還蠻神奇的，GPTs 的理解跟推理能力還不錯，看的懂我的要求，也看得懂 API 的能力範圍，於是自己推演了邏輯，一連串呼叫了好幾次 API 幫我確認結果，最後給了我建議的採購項目。不得不說，超乎我預期，做的很正確。

(不過，這結果沒有 100% 穩定可靠，我在測試的過程也碰過很瞎的答案.. 這後面再聊)

我繼續刁難他。過去在做 Chat Bot 的經驗，對談只是在下指令，要讓 Chat Bot 了解你的意圖是難上加難。一句話你拆成幾句來講，通常前面就被忘掉了... 因此我刻意追加了指令，在前面的結果修正多加兩件，而品名我也刻意用同義字，只講了啤酒，沒有講精準的產品品名.. 

結果不辜負我的期待，GPTs 的處理相當正確，呼叫了對應的 API，也給我正確的結果，並且進行了結帳的流程，呼叫了 /api/checkout/create (開始結帳) 的 API..

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-27-18.png)


結帳過程很順利。我的 API 設計本來就只要求拿到支付 ID 就當作結帳完成，而 API 背後我也沒真的去檢查 ID 對不對，簡單的說你只要給個 ID 就能過關。GPTs 也正確地替我呼叫結帳完成 API, 完成結帳。並且顯示訂單內容給我:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-29-09.png)


到這裡為止，購物的主要流程都很順利地結束了。我給 GPTs 100 分，因為他替我 "腦補" 補上了我 API 沒有涵蓋的功能，這點對我來說還蠻震撼的，留一些感想在後面觀點在聊，我繼續往下 demo ...


繼續測試 GPTs 的解讀跟處理能力... 我繼續挑戰他的對談能力，這次告訴它預算，條件比照辦理，但是有小孩不能喝酒。我刻意句子沒有講不要買酒，只是隱諱地告訴他我的期待，需要靠他自己聯想，該把購物車內的酒類商品都拿掉，並且調整數量符合我的預算跟條件 (不同商品購買數量要接近一致):

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-33-35.png)

碰到我這種奧客，果然錢很難賺 XDD，這次也順利結帳，成立第二張訂單，過程我就略過了 (有興趣自己看對談紀錄)。


接下來，身為一位常客 (也才買兩次)，來詢問一下買過了什麼也是很合理的... 問了訂購紀錄，GPTs 也幫我辦到了，同時也很盡責地幫我把資訊彙整了一下才回給我。我貼一下 GPTs 的回應:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-37-28.png)

我也補一下 API 回應的 raw data (json) 結果，讓大家可以對比一下..
(測試完成我就清掉了，這 API ( /api/member/orders ) 結果是我事後另外補的，資訊不大一樣各位就別計較了 XDD)

```json

{
  "totalOrders": 2,
  "totalAmount": 2172.0,
  "orders": [
    {
      "id": 1,
      "buyer": {
        "id": 1,
        "name": "andrew"
      },
      "lineItems": [
        {
          "title": "商品: 18天台灣生啤酒 355ml, 單價: 65 x 12 件 = ¤780.00",
          "price": 780
        },
        {
          "title": "商品: 可口可樂® 350ml, 單價: 18 x 11 件 = ¤198.00",
          "price": 198
        },
        {
          "title": "商品: 御茶園 特撰冰釀綠茶 550ml, 單價: 25 x 11 件 = ¤275.00",
          "price": 275
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        },
        {
          "title": "優惠: 18天台灣生啤酒 355ml 第二件六折, 折扣 ¤26.00",
          "price": -26.0
        }
      ],
      "totalPrice": 1097.0
    },
    {
      "id": 2,
      "buyer": {
        "id": 1,
        "name": "andrew"
      },
      "lineItems": [
        {
          "title": "商品: 可口可樂® 350ml, 單價: 18 x 25 件 = ¤450.00",
          "price": 450
        },
        {
          "title": "商品: 御茶園 特撰冰釀綠茶 550ml, 單價: 25 x 25 件 = ¤625.00",
          "price": 625
        }
      ],
      "totalPrice": 1075
    }
  ]
}

```

我的 API 很囉唆的把每個折扣都列出來了，但是 GPTs 回給我的訊息，把它彙整 summary 結果給我了，還蠻貼心的，這種程度的訊息處理，沒有 AI 的輔助，自己刻 Chat Bot 會刻到哭出來吧...


接著，繼續為難店長 (咦?)，我很清楚我的 API 只有傳回訂單內容，我就要求 GPTs 幫我家總一下到底每種商品我買過幾件...

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-21-46-37.png)

結果，如我預期做得很不錯，不但沒有重新打一次 API 重新取得結果之外，也正確地理解我的要求，幫我算好統計結果了。最後我要求把條列的內容換成表格，也一樣做到了 (看起來是用 markdown)


Demo 內容就到此先告一段落，背後很多技術細節，跟我處理過程踩到的地雷，就先跳過 (有機會我再寫另一篇來聊聊實做過程)。如果你有興趣想知道，可以在底下留言問我，或是在 facebook 留言詢問也可以。

程式碼我就直接附上 [GitHub Repo]() 了。我的目的只是 PoC, 所以裡面有很多 Anti Patterns, 請直接忽略...



# 2, 軟體開發的改變

接下來，我想聊聊 AI (尤其是指 LLM, 大型語言模型) 普及後，對軟體開發這領域會帶來那些改變。我其實是 AI 的門外漢，在 2023 年 ChatGPT 爆紅之前，其實我一直覺的 AI 是離我很遠的數據科學。相較其他資訊領域，AI 完全是跟我沒有太多交集的一個領域，我大概就是只懂科普那樣的程度而已。

因此，我想談的不是 AI 本身的科學跟演算法，或是語言模型本身的改進什麼的，我想談的是 LLM 成熟後，會在未來的軟體架構與生態系造成什麼樣的改變。對於像我這樣純軟體開發領域的人 (非 AI 專家)，該怎麼善用 LLM 帶來的改革? 就像作業系統的成熟，不需要每個人都了解 Kernel 怎麼運作，但是每個人都該了解該怎麼在上面開發應用一樣的意思。

目前的應用程式架構，基本上還是以三層式的架構為主，有 UI / Business / Data 這三層:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-20-09-38-03.png)

然而複雜一點的系統，開始會切割為多個服務，再透過 API 互相整合:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-20-09-38-50.png)

這些整合，主要都是透過後端 API ( server to server ) 的型態發生；也有在前端整合的做法，不過直接共享 DB 的類型也有，但是越來越不是主流的做法，我就不畫了。

然而，我看到的改變，會是這樣 (個人觀點):

![](/wp-content/images/2024-01-15-archview-llm/2024-01-20-09-40-47.png)

使用者其實也越來越無法負擔這麼多 Application 了，Copilot 的出現正好適合當作應用程式 (群) 的入口，類似當年搜尋引擎的出現這樣。我覺得最大的改變，就在於 LLM 介入了；同時整個軟體開發的版圖跟比例，會有一大部分往 LLM 偏移了，UI / UX 會往 OS ( Copilot ) 集中，而後端的應用也會往 API 集中，Business Logic 的部分會降低，只剩下最核心關鍵的部分會被放大。

這板塊偏移的同時，應用程式之間的整合也會開始改變。主要應用 (作業系統層級) 會開始以 Copilot 為主要操作介面，而背後的 LLM 服務則會開始下沉，變成跨應用 (由作業系統提供) 或是跨網路，由網路基礎建設提供 ( PaaS )。而應用程式的 "安裝"，也開始會在作業系統層級的框架下，對 Copilot 註冊，成為他的 Plugins 的一環。註冊時會告知 Copilot 他有多少功能 ( API Spec ), 以及搭配對應的 Prompt 告訴 LLM 他能負責什麼，最終由 LLM 來扮演全系統的協作控制者，使用者可以直接 (自然語言對話) 或是間接 (使用者操作，背後附帶 Prompt 提示) 來跟 LLM 溝通協作。

我認為會有這些改變，我的理由是: 

> LLM 在掌握使用者的 "意圖" 這件事情，做的遠比過去 UX 領域在做的效果好太多。

UX 做的不只是 UI 好不好看好不好操作而已，也包含 UI 的設計有沒有 "猜中" 使用者想要解決的問題? 猜得越準，UX 體驗越好，因為 UX 好的 Application，你想要做的事情，都能被簡化成一個按鈕就能搞定。UI 引導你的 "下一步"，如果猜得夠精準，你就會覺得很好用，只要一路按下一步就好了；如果猜不準，你就會覺得這設計很煩人。重點不是在 UI，而是在猜測使用者操作軟體的 "意圖"。

但是，現在這一切，完全被 LLM 用另一種方式達成了。體驗過 Chat GPT 的都知道，不用我多說，大家都驗證過了。

就如同前面我示範的 demo 一樣。對等於介面很漂亮的購物網站，安德魯小舖 GPTs 的作法完全是走另一個路線，幾乎沒有傳統的使用者介面 (除了認證時有登入畫面之外)，主要就是透過對話，用自然語言就能完成交易，背後都是透過 API 完成商業流程，而這操作過程中你完全不會感覺到有任何不適應，或是需要學習的門檻，這就是我想像的軟體未來的變革。

也許你會說，買個東西還要打一堆字很麻煩? 那我再補一段一次到位的 demo:

![](/wp-content/images/2024-01-15-archview-llm/2024-01-19-23-37-59.png)

如果你想要一次到位，安德魯小舖 GPTs 一樣辦的到。只是以後，你不一定要 "親自" 輸入這些文字需求，以後的前端工程師，可能只要單純的把畫面刻好，背後也不大需要呼叫 API 了，只要 UI 整理好 Prompt, 往後丟給 LLM 去傷腦筋就夠了。這樣的改變不會完全取代目前的前後端開發方式，但是就如我一直強調的，一定會有板塊的移動，有一定的比例會改成這樣的開發方式。

對於軟體開發人員，尤其是主導整個軟體設計的角色 (產品長，產品經理，技術長，
架構師，技術總監等等這類角色)，更應該開始了解，拿捏你的服務，那些該用 LLM 來改善，那些該繼續用傳統的開發方式改善 (但是你還是可以用 AI 來改善效率，例如善用 GitHub Copilot)。過去，我們會用很多 UI 設計，加上流程的設計來改善 UX，這時，所有決定軟體設計的角色，都應該重新思考，該如何善用 LLM 來改善 UX?

談到這邊，我自己是做完這個 PoC 後才深切有這體悟, 各位有興趣的話，拿你擅長的領域，也試著做一次看看，別只專注 code 怎麼寫，體驗一下這做法跟過去的不同，你會了解我感受到的變革是怎麼一回事的。目前大家都還在摸索階段，各種工具與服務也還在百家爭鳴的階段，不過我預估不用太久，Chat GPT 才出來一年就已經催生這麼多 AI 的應用了，未來發展只會越來越快，我覺得不出三年，世界就會改變了。

身為架構師，看到這變化，還能親身參與，其實我是很興奮的 XDD, 不過在高興之餘，也是得努力跟上才行，這也是我會自己做這 POC 主要的原因。

安德魯小舖 GPTs 的實做細節，我這篇不打算談 (其實內容沒什麼特別的)，實做開發比我強的太多了，各位可以自己找找。想要討論或是詢問我很歡迎 (直接在底下留言就可以了)。我直接附上相關的程式碼，有興趣的各位可以自己參考:

相關資訊:
- [安德魯小舖 GPTs]():  
>有 Chat GPT plus 訂閱的人可以進去玩玩, 帳號直接填你喜歡的就好, 密碼只是作作樣子, 亂打都會過。不保證 SLA, 我隨時會把背後的 API 收掉, 背後也沒有資料庫, App Service 重新啟動資料就會清掉..
- 安德魯小舖 API Spec [Open API Spec]()
- 安德魯小舖 API Source Code [GitHub Repo]()






# 3, 看懂 Microsoft 的技術布局

回到開頭講的 2016 那一篇文章吧，當時 .NET 開發人員 (越資深的體會越深刻，就是一路跟著 Microsoft 的技術路線走過來的那群人)，從一切都是 Microsoft 生態的環境 ( Windows, .NET Framework, COM+, SQL server, IIS server, Visual Studio, Office, Active Directory .. ), 突然間 .NET Core 橫跨 Linux ( 而且效能還比 windows 好 ), Container ( 完全是 Linux 生態系的技術 ) 也突然席捲軟體部署的方式, Microsoft 突然之間從 Steve Ballmer 年代的抨擊 Open Source 是毒瘤, 到 Satya 開始講 Microsoft Love Linux / Open Source ..

回顧歷史，我長期都是走 Microsoft 技術路線討生活的，我自己看到這樣改變的時刻也不少，每隔 5 ~ 8 年都會碰到一波。例如:

- **2000, .com 年代**:  
Microsoft 有追上這波, ASP / IIS / COM / .NET / Visual Studio.NET 技術跟工具就是那年代發展出來的)
- **2008, cloud / mobile 年代**:  
我覺得 Microsoft 當時只是有跟上而已, 並不算領導廠商. Azure 中規中矩, mobile 則...
- **2014, cloud first, mobile first 年代**:  
container 當道, 世界大幅的往 cloud, open source, linux, container 發展, Microsoft 換了 CEO 後有跟上這潮流, Azure 也開始走出自己的路線, .NET Core 也帶領開發人員跳出傳統的 Windows 體系, 開發工具除了 VS 之外也發展出 VS code, GitHub 也被 Microsoft 收編..
- **2023: GenAI 橫空出世的年代**:
  (對我這種外行人來說的確是這樣), Microsoft 投資 Open AI 有押對寶, Azure Open AI service 領先, Bing / Copilot 等服務都快速地推出, Semantic Kernel 開發框架也推出, Microsoft 瞬間在 AI 的技術，服務，工具，開發框架，生態系都跑在前面..

現在 (2023)，看來又是那樣的時刻了，帶來這些改變的是 AI 已經成熟到跨入主流技術了，看過去 2023 一年的發展就知道，這趨勢不可逆了。突然之間，我開始也能體會，Microsoft 在部一個什麼樣的局了。這段我想來聊聊我的看法:

一路以來，表面上看來 Microsoft 就是壓對寶，投資 Open AI 賺了一輪，不過現在想想，事情沒那麼簡單。曾經有那麼一陣子，作業系統 (OS) 的角色越來越不重要了，我從 Windows 8 之後就開始對 OS 升級無感了，Windows Server 也是如此 (最後有感升級是 2016, 當年為了部署 windows container)。但是現在我開始期待 Windows 12 了 (如果真的叫這名字的話)，我看懂的三個關鍵是:

1. **Azure Open AI Service**  
部署於雲端的 AI 服務, 背後的關鍵就是各種模型
1. **Copilot**  
部署於 OS ( 使用者端 ) 的使用者入口, 會演變成整個 OS / Device 的 controller
1. **Semantic Kernel**
會發展成未來 Application 主要的開發框架

這三者的關係則是緊密相扣，互相發展加成。一個一個來看彼此之間的關聯...

## 大型語言模型 (LLM) 服務

Microsoft 身為 Open AI 的大股東, 對 GPT 模型有最優先的掌握度。你想使用 GPT4 的模型，只有兩個管道，一個是買 Open AI 的 API 服務，另一個就是買 Azure AI Service ... 這資源讓 Microsoft 能優先於其他對手端出 AI 相關的應用 ( 就看 Microsoft 各種 Copilot, 在 2023 通通都出現了一樣 )。

這些 LLM 遲早會不斷的縮小，小到足以在終端設備 (手機或是 PC) 端就能離線執行，同時終端設備的計算能力也能追上 LLM 的執行需要的話 (我就假定這發展 Microsoft 也會領先好了)，那麼 Windows 應該又會開始變成所有人的首選了。回到前面我的 Demo, 最讓我覺得驚喜的改革，是軟體開始有能力了解使用者的 "意圖" 了。想看看如果 LLM 已經能跑在本機端，應該不可能每個 APP 都裝一套，而是整個作業系統會開始提供這樣的服務。

從這邊想，開始就能理解過去 Wintel 組合的模式又要出現了，只是廠商可能會換，但是 OS 有 LLM 的能力，而 PC 有對應的 NPU 也勢在必行，未來的 Wintel 是否還是 Intel 我就不知道了，會是 AMD / nVidia / 高通也都說不準。但是現在市場上開始喊 AI PC, 大概就是這走向了。

作業系統的發展，向來都是需要應用程式互相搭配的，接下來就來聊聊下一個: Copilot

## 輔助工具 / 引導工具 (Copilot)

前面我做的 Demo, 主體是在 Chat GPT 的平台下，用 Custom GPT 能力，串上我自己開發的 API 組合出來的 application. 使用者操作的應用程式，不是直接用我的 API 或是我的 APP，而是 Open AI 的 Chat GPT, 而 Microsoft 在發展的 Microsoft Copilot, 或是 GitHub Copilot, 其實都是走同樣的路線。

當你對 Copilot 上癮之後，你開始會懶得自己去開 APP 來用了。你會用各種方式去告訴 Copilot 你想做什麼，然後由 Copilot 替你決定要上網搜尋，或是轉發 API，或是替你叫用某個 APP，或是給你什麼資訊或建議.. Copilot 將會扮演整個設備的中控中心，代替你調度所有你設備本身的資源，應用程式，或是連上網使用雲端的服務。

想像一下，如果像我 Demo 這樣的應用，未來主流的服務都用同樣的方式整合在 Chat GPT 上，會是什麼樣的光景? 想想就覺得可怕，因為現在看來已經是完全可行的技術了，只差整合而已。只是我不覺得 Open AI 的 Chat GPT 會變成以後大家必定使用的 "入口"，夠格扮演這角色的還是作業系統大廠 Microsoft (Windows) / Apple ( iOS / MacOS ) / Google ( Android / ChromeOS ) 比較有機會。而現在看來領先的就是 Microsoft Windows + Copilot 最被看好


## 開發框架 (Semantic Kernel)

最後一個，開發框架。我再強調一次，我這個 Demo 讓我驚艷，但是我不覺得未來的平台會是 Chat GPT, 只是 Chat GPT 門檻最低，讓我最快能完成 PoC 而已。在做這個 side project 時，我體會到一件事:

未來軟體開發，會是圍繞著 LLM 為核心，在外圍搭建 UI, 服務, 靠 LLM 統控操作流程 (orchestration), 探究為何 LLM 做得到? 他就是專精在自然語言的處理，只是 Chat GPT 很巧妙地運用他來整合語言對談與 API 而已。

我在設計 安德魯小舖 GPT 的過程中，最關鍵的兩件事:

1. 開發 API, 並且提供 swagger 定義檔, 餵給 GPTs 設定，讓他知道我有哪些 API 任他使用
2. 善用 Prompt, 告訴 GPTs 該怎麼回應使用者的詢問，而 API 本身也用自然語言告訴 GPTs 他是幹嘛用的，讓 LLM 能理解何時該呼叫他

這兩者打通之後，LLM 就搖身一變，變成控制中心了，也因此，未來的 APP 或是 Service, 應該都是為了成為 LLM 的助手而生的。

所以，應用程式都會沒落了嗎? 不會的，他還是會存在，但是超大型的應用應該會越來越少，超複雜的多步驟流程也會逐漸消失，UX 的改善大部分都會落在 LLM 身上，而 APP 與各自的 UI 則會專注在更精確範圍內的應用了，例如填表單，或是特定的觸控操作等等。

那麼，以後的軟體開發框架會是? 想想過去 20 年來的主流框架吧，2000 年流行的是三層式架構，Presentation / Business / Data, 到 Cloud 年代主流的 MVC ( Model / View / Control , 這邊泛指通用的 MVC, 不是特地指 ASP.NET MVC ), 到了 AI 年代, 以 LLM 為核心, 外面包了一層供 LLM 協作的技術堆疊開始成形了, 現在看到的 Semantic Kernel 就最有這樣的架式了 (我後面談 "整合" 的部分再來細談)

Semantic Kernal 我就不在這多做介紹了，基本上他就是把能善用 LLM 的軟體開發方式抽象化，變成一個能抽換擴充的機制。用了他，你底層的 LLM 到底是 Open AI, 或是其他的語言模型或服務就沒那麼重要了，反正被抽象化了，你開發應用就好好利用他就行，你只要想辦法給定清楚明確的 Prompt 就行，語言模型在本地，或在雲端，版本升級就不是那麼的重要了。目前，Semantic Kernel 看到的還是在 Application 內的 AI 應用開發框架，作業系統層級的通訊協定還沒看到，不過我猜也快了，如果真的有 windows 12, 應該可以看到一些蛛絲馬跡。


## 整合三者的應用模式

講到這邊，我開始能串起來了。應用程式只要用 Semantic Kernel 開發, 甚至變成 OS 內建的服務，安裝軟體會變成安裝 Plugins / Planner, 而 AI OS / AI PC 則提供了足夠的 LLM 運算能力，讓你的 Application 能充分使用這些 AI 資源；最後 Copilot 變成作業系統的標準 (主要) 操作介面，統合起本地端與雲端的各種資源...

我想，這就是 Microsoft 投入這麼多資源想要達成的目標吧! 這符合 Microsoft 一直強調 Productivity 生產力的方向 (有什麼東西對生產力的幫助會比 Chat GPT + GitHub Copilot 還強大?)，AI 模型的技術也鞏固了 Azure / Windows 的發展，作業系統會再度成為 Microsoft 的強力武器；最後 Semantic Kernel + GitHub (Copilot), 別忘了還有 Visual Studio / VS Code, 也會讓 Microsoft 重新對軟體開發技術站上主導地位.

我想，這就是 Microsoft 在打的如意算盤吧! 不得不佩服這些作藍圖規畫的人，不知道 Satya 在幾年前就預想到今天的情境? 我則是後知後覺，都浮上了檯面一整年了，我才看懂這個局 (也才寫了這篇文)



# 4, 架構師、資深人員該怎麼看待 AI ?

回到個人，看懂了是一回事，那麼你 (包含我) 自己該怎麼面對? 該做什麼準備? 我自己的看法是:

基本上躲不掉了，就去面對吧! 同樣的以我這次的 Demo 來說，我看到了幾點，尤其是越資深的人員，對軟體的設計越有話語權掌控權的人越該注意..  你必須好好的思考 LLM 該用在什麼地方。

LLM 雖然已經到了可用的地步，但是他現在還是個很寶貴的運算資源，運算成本還是很高的 ( Chat GPT 即使你買了訂閱，速度還是常常很慢跑不出來 )，你不可能甚麼小事都丟給她.. 基本上你還是得把 LLM 用在刀口上。我列舉幾點:

## 1, LLM / API 的邊界:

LLM 很有彈性，能理解語意，運算成本很高；相對寫 code 必須有明確規格，難以理解語意，運算成本相較 LLM 非常低。試想 你寫一行 code 算 1 + 1 = ?, 可能是幾個 CPU 指令就完成的事情，你問 Chat GPT 1 + 1 = ?, 不知道要砍掉多少顆樹才算得出來.. 

以我的 demo 為例，請 GPTs 替我評估預算，過程中我就吃了不少苦頭，即使用上 GPT4, 我仍然有一定的機率會碰到 GPTs 回給我的答案不是最好的答案，但是我跟他抱怨後他重算一次就對了 (傳說中的 AI 也會偷懶?)

如果預算評估，對你是很重要的任務，必須精準執行，無法忍受 LLM 有一定的出錯機率的話，你就該考慮這部份別依賴 AI，該自己寫 API 讓 AI 呼叫才對。這些判斷，需要有經驗的人來操刀，架構師是合適的角色，要能看懂這些分界與區別，你才能做出正確的判斷。

## 2, API 的設計必須精準合理:

有聽過我 .NET Conf 2023 的演講，我的主題就是這個。只是在做這個 demo 之前，我只能說好的 API 有很多好處，但是我還無法講出有哪些狀況下，這些是絕對必要的? 直到我做了這個 demo... 未來的 API 會越來越重要，服務不再是 UI first, 而是 API First...

因為，掛上 LLM 後的 API ( Plugins ), 呼叫你 API 的不再是其他開發者了, 你已經無法 "預測" 或是 "約束" 對方該怎麼呼叫。你只剩兩條路可以選擇，一個是把你的 API 設計的合情合理，完全符合現實世界的運作邏輯 (就是我常講的 OOP 精神: 模擬世界 加以處理)，你只要用 Prompt 就足以交代 AI 該怎麼使用 API。另一個就是把你的 API 做到邏輯無懈可擊，滴水不漏。不論 AI 用什麼順序呼叫，傳遞什麼參數給你，都不會發生意料之外的結果。這個非常吃嚴謹的設計，我曾在 API First 不斷強調 "有限" 狀態機的重要性，就是預防這種錯誤。因為狀態機的變化是 "有限" 的，你才能在這範圍內精準地控制各種行為，不會暴走，這樣的 API 設計才是 AI Friend 的設計。

因此，API 不再是能動就好，而是要精確，可靠，合理，做到 AI Friendly，才是能在未來世界有競爭力的服務。OOP，DDD 等等領域相關的設計，會越來越重要。因為你沒掌握這些設計原則，你幾乎不可能設計出 AI Friendly 的 API 規格的。


## 3, UI 應該拆解成獨立的 Task, 並且應要能與 Copilot 搭配

這次的 demo, 也讓我體認到這件事。這個 side project 我花了三個禮拜，但是有兩個禮拜都卡在 "我賭氣不想實做 OAuth..."  XDDD

因為我原本的 API 就有實做簡單的認證機制，有 Login, 要給帳號密碼才會給你 Access Token, 然後其他 API 有必要參數，必須提供能通過驗證的 Access Token 才能呼叫。結果我想，我就 Prompt 多做補充說明，讓 GPTs 弄懂就好了...

結果全然不是這麼回事，不合理的 UI 流程跟 API 設計，會大大阻礙 AI 的理解，認證授權這類行為，就是屬於需要精確執行的，你讓 LLM 來負責這環節就是不智之舉，我花了兩個禮拜嘗試各種方案要搞定他 (很長的故事，以後有機會另外寫文章來聊聊)，最後都是失敗收場。

最後，我花了一天，自己刻了個符合 OAuth2 的介面出來，再修修補補一個晚上就搞定了。你看我的 安德魯小舖 GPTs, 版本已經來到 v5.0.0, 大概就知道我經歷多少失敗了 XDD, 不過, 這些門檻都不是有多困難的技術要克服, 而是你要想清楚該怎麼善用 AI  而已.. 想清楚 Copilot 或是 Chat GPT 掌控 LLM 的主要操作介面，充分配合發揮它的威力來設計你的軟體服務跟 UI，會是下個世代的重要課題

## 4, 挑選正確地軟體開發框架，有計畫地累積你的服務與元件

第四個，是搞懂 AI 世代的開發框架，目前我看到最具代表性的就是 Microsoft Semantic Kernel. 當然就像 MVC, 是抽象的架構, 而 ASP.NET Core MVC 是一套廣為使用的開發框架，而你該掌握的是你的 Application 該有哪些 Model? 有哪些 View? Controller? 不是一開始就毫無設計，直接套用 ASP.NET Core MVC 硬幹...

在 AI 的世界裡, Semantic Kernel 區分了 Kernel, Skill, Planner, Memory, Connector, 而我在設計 安德魯小舖 GPTs 時，嚴格的來說也是用這框架去設計的，只是 GPTs 給了我很低的門檻，我幾乎只是靠 Skill (掛上我的 Custom Action) 跟 Planner (只靠 Prompt 描述) 就完成了，但是事後想想，其實也是 Semantic Kernel 的抽象化架構。

身為架構師，你應該替你的服務或是產品，仔細思考長遠的發展中，你該怎麼樣在這樣的框架下，逐步累積你的元件。


# 5, 開發人員該怎麼看待 AI ?

回到開發人員，我想這是比例最大的一個族群了。這些角色重視的是要有實做能力，因此我在這邊就列舉一些我認為在 AI 世代，要成為一個稱職的開發者，必須具備或是強化的能力:

## 熟悉能提高工作效能的 AI 相關工具

這整篇其實我沒講太多工具，不過回顧 2023 年，被談的最多的就是 "工具" 吧。我大都在講 AI 會怎麼改變整個軟體的生態與結構，談的是那些軟體不善用 AI 根本做不出來 (例如我這個 demo, 沒有 AI 根本不可能) 的服務與應用。但是這改變不會明天就到位，會在未來幾年逐步發酵。目前談的最多的，是善用 AI 的新工具，來加速你目前的工作效率。

短期內 (至少還有一到三年吧)，軟體開發仍然會是以目前主流的架構為主，但是每個人手上的工具應該都會升級，例如接下來你會問 Chat GPT, 而不是查 Stackoverflow,,, 你會開始善用 GitHub Copilot, 而不是不斷的查文件, 然後複製貼上。寫文件或是寫 email 也是，開始有越來越多工具可以幫你彙整、抓重點、翻譯、修改建議等等，這些都是用新工具更有效率做好現在的事 的範圍。

未來這種工具會越來越多的，別多想，只要在你負擔的起的範圍內就盡量使用吧。但是享受它的同時，請切記你要累積你的基礎知識，別囫圇吞棗，你不要 GitHub Copilot 給你的建議，你完全看不懂他是幹嘛的就按下 Tab, 請你務必看懂他，如果看不懂，也請多問問 GitHub Copilot Chat / Chat GPT, 給你更多的說明。


##  熟悉開發 AI 應用程式必要的 Tech Stack

除了用 AI 工具提升自己效率之外，如果你團隊的架構師已經看懂這局勢了，你們也勢必會往 AI 應用程式的開發框架發展。這時，身為開發者，必定會需要具備一些這類技術的實做能力。我列舉幾個我認為重要的:

1. **Prompt Engineers**,
  雖然離用自然語言寫完全部的程式還很遠，但是就如同我這次的 demo, 我只寫了能做關鍵動作的 API, 其他都是靠 LLM 跟 Prompt 完成的。未來世界你必須有 Prompt 的輸出能力，你才能做好 LLM 跟 API 之間的黏著劑
1. **Vector Database / NoSQL Database**,
  No SQL 是基本的，我就不再多說了，另外為了搭配 RAG 等內容的索引跟儲存，挑一個合適的向量資料庫，並且熟悉他的管理與操作是必要的
1. **Semantic Kernel 的實做與開發能力**,
  前面也聊過很多了，不再多說。當這已經是主要的開發框架時，用他的規範，累積 Plugins, Planners 等等能掛上 Semantic Kernel 的原件，將會是 AI 世代的軟體開發團隊資產。


## 深化領域的設計與開發能力

這部分，就回到了我過去兩年不斷的在談 API First, 要先從領域的角度開出正確的 API spec 開始的論調。領域的 API 重要性會越來越大，過去談了很久的 Headless, 終究沒有變成 "必要" 的設計，還是有很多產品服務，把 UI 跟流程的設計擺在第一位，API 只是 option. 

不過，如果真的到了我想像的世代，那就要反過來了，你的服務沒有 API, 無法變成 LLM 的 Plugins 的話，那你的服務就要變成孤島了。LLM 才是真正的 "Headless" 的推手, 使用 API 的 "Head" 會是 LLM, 而不是只有其他的 Application.


回到 "領域的設計與開發"，講白了就是 API / DDD, 或是你要說微服務也行 (但是必須在正確的 DDD 設計前提下拆分出來的微服務才算數)。UI 不會消失，但是改善 UX 的任務勢必會有越來越多的比例轉向 Copilot / LLM 來負責，而 UI 的比重降低 (被 Copilot 分掉)，流程的比重降低 (被 LLM 的解析能力分掉，例如我這次 demo 的預算規劃等等，已經不在 API 的範圍內了)，剩下的 API 開發只會剩下核心關鍵的部分，而且會越來越重要，比重也會越來越大。

所有的領域都會開始去蕪存菁，不需要經驗照著範本寫的程式碼，以後都會消失了，會留下來的都是需要高度經驗與精準的開發能力的。前面提到精確的 API 設計就是其中之一，而架構師設計出來的規格，身為開發人員，你也應該要有對等的工藝水準來把它做出來。

這些不是新東西，而是過去開發  API 本來就會需要面對的知識與技巧。我預期這會越來越重要，會是以後 Backend Developer 的主戰場，如果你還停留在刻畫面，搭配 CRUD API 的開發方式的話，盡早讓自己升級吧! 我有很多這方面的文章，可以多看看 XDD


# 6, 結論