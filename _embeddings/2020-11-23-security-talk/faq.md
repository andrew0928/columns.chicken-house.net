# [架構師觀點] 資安沒有捷徑，請從根本做起!

# 問答集 (FAQ, frequently asked questions and answers)

## Q: 為什麼資安議題應被視為「品質要求」而非一般「功能需求」？
資安屬於系統品質的一環，目的是在極端或未知條件下仍能保護資料與服務；它不是驗收功能的「正向表列」，而是必須避免任何未授權行為的「負向表列」。若只把資安當功能點，事件發生時將讓企業陷入信任危機與法規風險。

## Q: 儲存使用者密碼時，正確且簡單可行的設計是什麼？
在使用者設定密碼時，只儲存「加鹽後的雜湊值 (salt + hash)」，驗證時再對輸入密碼做同樣運算並比對結果。因為 Hash 為單向運算，資料庫即使被竊取也無法還原原始密碼。

## Q: 為什麼公開且經驗證的加解密演算法能帶來安全保證？
1. 這些演算法（如 RSA）已經過數學與業界長期驗證，安全性依賴「金鑰」而非隱藏演算法。  
2. 只要選用足夠金鑰長度並妥善保管金鑰，現有計算能力在可行時間內無法破解，數學性質提供了保證。

## Q: 自行土法煉鋼設計加密機制有何風險？
統計分析及程式碼可見性會讓自訂對照表、簡易替換等「秘技」迅速被破解；加上缺乏數學理論與社群驗證，等同把安全性建立在「別人看不到」的假設上，非常脆弱。

## Q: 「品質是內建的，不是測試出來的」這句話對資安意味著什麼？
資安品質取決於設計與開發過程是否把正確機制「做進去」。測試只能揭露缺點，無法在事後補足整體安全性；若設計階段偷工減料，最終只能得到「堪用」而非「高品質」的產品。

## Q: 在分散式架構中，如何安全地共用登入 Session？
常用作法是發行如 JWT 的 Token。各服務收到請求時先本地驗證簽章與過期時間，即可信任 Token 內容，省去跨服務查詢的網路成本。

## Q: 為何每個 Request 都必須驗證 JWT Token？
若略過驗證就形成「保護死角」，攻擊者可利用未受檢請求竄改或重播 Token。雖增加 CPU 運算，但遠比跨網路通訊耗時小，且能確保每一次呼叫都在安全範圍內。

## Q: 權限管理最常見的安全地雷是什麼？
只在 UI 或個別頁面做檢查，或僅於第一層入口判斷；一旦有任一功能遺漏，機密資料即可被繞過存取，形成「老鼠屎式漏洞」。

## Q: 預防權限管控漏洞的核心做法有哪些？
1. 先定義全域且一致的安全機制，例如 RBAC/PBAC/ABAC。  
2. 透過單一身分識別 (如 Token) + 統一授權檢查，避免每支功能各自為政。  
3. 收斂資料出口，將檢查邏輯集中在 API 或共用服務層，以降低遺漏機會。

## Q: 若在時程壓力下犧牲資安措施，可能產生什麼後果？
短期看似節省成本，長期將以信譽、法律責任與後續維護成本加倍償還；一旦客戶或社群失去信任，即使事後補救也難以挽回形象。