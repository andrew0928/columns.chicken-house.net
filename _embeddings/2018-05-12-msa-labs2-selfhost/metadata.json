{
  "title": "\u5BB9\u5668\u5316\u7684\u5FAE\u670D\u52D9\u958B\u767C #2, IIS or Self Host ?",
  "published": true,
  "categories": [
    "\u7CFB\u5217\u6587\u7AE0: .NET \u002B Windows Container, \u5FAE\u670D\u52D9\u67B6\u69CB\u8A2D\u8A08",
    "\u7CFB\u5217\u6587\u7AE0: \u67B6\u69CB\u5E2B\u89C0\u9EDE"
  ],
  "tags": [
    "microservice",
    "\u7CFB\u5217\u6587\u7AE0",
    "ASP.NET",
    "\u67B6\u69CB\u5E2B",
    "Docker",
    "Windows Container",
    "DevOps",
    "Service Discovery",
    "Consul"
  ],
  "tech-stacks": [
    ".NET Framework",
    ".NET Core",
    "ASP.NET",
    "ASP.NET MVC Web API",
    "OWIN",
    "Kestrel",
    "Nancy FX",
    "Cassini Dev Server",
    "IIS",
    "Windows Service",
    "Windows 10",
    "Windows Server 1709",
    "Windows Server 1803",
    "Hyper-V Containers",
    "Docker",
    "Windows Containers",
    "Consul",
    "Reverse Proxy",
    "API Gateway",
    "PowerShell",
    "Win32 API",
    "SetConsoleCtrlHandler",
    "WM_QUERYENDSESSION",
    "Windows Forms (WinForms)",
    "C#",
    "Visual Studio",
    "GitHub",
    "Microsoft IIS ServiceMonitor",
    "w3svc",
    "w3wp"
  ],
  "keywords": [
    "\u5FAE\u670D\u52D9",
    "\u5BB9\u5668\u5316",
    "IIS",
    "Self Host",
    "Windows Service",
    "Service Discovery",
    "Consul",
    "Docker",
    "ASP.NET Web API",
    "OWIN \u81EA\u6211\u5BC4\u5BBF",
    "Kestrel",
    "App Pool",
    "Health Check",
    "Heartbeats",
    "Shutdown \u4E8B\u4EF6",
    "Windows Container",
    "Orchestration",
    "Reverse Proxy",
    "\u6548\u80FD",
    "Benchmark",
    "Registry",
    "Deregister",
    "\u751F\u547D\u9031\u671F",
    "Console Application",
    ".NET Framework",
    ".NET Core"
  ],
  "generator": "BlogIndex.SyncPost v0.3.0.0, gpt-5",
  "references": [
    "/2017/05/28/aspnet-msa-labs1/",
    "https://www.facebook.com/andrew.blog.0928/videos/509145696127380/",
    "/2018/05/10/tips-handle-shutdown-event/",
    "https://stackify.com/kestrel-web-server-asp-net-core-kestrel-vs-iis/",
    "https://hub.docker.com/r/microsoft/iis/",
    "https://github.com/Microsoft/iis-docker/blob/master/windowsservercore-1709/Dockerfile",
    "https://github.com/Microsoft/IIS.ServiceMonitor",
    "https://forums.asp.net/t/1908235.aspx?Self\u002Bhosting\u002Bor\u002BIIS\u002Bhosted\u002B",
    "http://blog.bitdiff.com/2012/06/performance-comparison-iis-75-and-iis-8.html",
    "https://github.com/aspnet/AspNetWebStack/blob/master/src/System.Web.Http/Dispatcher/DefaultAssembliesResolver.cs",
    "https://docs.microsoft.com/en-us/windows/console/setconsolectrlhandler",
    "https://github.com/andrew0928/IP2C.NET.Service/tree/3.2.0.0"
  ],
  "summary": "\u96D6\u7136\u5FAE\u670D\u52D9\u8DDF\u5BB9\u5668\u5316\u662F\u5169\u56DE\u4E8B\uFF0C\u4E0D\u904E\u5169\u8005\u7684\u642D\u914D\u662F\u7D55\u4F73\u7D44\u5408\u554A\uFF0C\u6240\u4EE5\u6211\u6C7A\u5B9A\u5148\u82B1\u9EDE\u7BC7\u5E45\uFF0C\u5148\u4EA4\u4EE3\u5982\u4F55\u5C07 web api \u5BB9\u5668\u5316\u90E8\u7F72\u7684\u554F\u984C (self-host or IIS host)\u3002\u90E8\u7F72\u9019\u4EF6\u4E8B\uFF0C\u904E\u53BB\u90FD\u662F operation team \u89E3\u6C7A\u6389\u4E86\uFF0C\u4E0D\u9700\u8981 development team \u50B7\u8166\u7B4B\u3002\u73FE\u5728\u5FAE\u670D\u52D9\u9700\u8981\u66F4\u5BC6\u5207\u7684\u6574\u5408\uFF0C\u5FC5\u9808\u8981\u540C\u6642\u80FD\u638C\u63E1 development \u8DDF operation \u7684 know how, \u624D\u80FD\u6B63\u78BA\u7684\u62FF\u634F\u8A72\u6368\u6389\u90A3\u4E9B\u6771\u897F\u3002\u9019\u7BC7\u5C31\u662F\u5F9E\u9019\u89D2\u5EA6\uFF0C\u544A\u8A34\u4F60 IIS \u8207 Self Host \u5169\u7A2E\u958B\u767C\u8207\u90E8\u7F72\u7684\u6A21\u5F0F\u8A72\u5982\u4F55\u53D6\u6368\u3002\u6211\u5148\u8AAA\u660E\u4E00\u4E0B\u63A1\u7528 Self-Host \u7684\u8003\u91CF\uFF0C\u540C\u6642\u4E5F\u6703\u793A\u7BC4\u4E00\u4E0B\u5982\u4F55\u958B\u767C\u4E00\u500B\u901A\u7528\u7684 Self-Host class library, \u5FAE\u670D\u52D9\u7684\u61C9\u7528\u4E0A\uFF0C\u4F60\u52E2\u5FC5\u6703\u6709\u5F88\u591A\u5927\u91CF\u7684\u670D\u52D9\u9700\u8981\u958B\u767C\uFF0C\u5148\u628A\u9019\u500B\u901A\u7528\u7684 Self-Host \u67B6\u69CB\u641E\u5B9A\uFF0C\u63A5\u8457\u7D71\u4E00\u8655\u7406\u5176\u4ED6\u5FAE\u670D\u52D9\u7684\u5404\u7A2E infrastructure (\u5982\u4E0B\u7BC7\u4ECB\u7D39\u7684 consul) \u7684\u6574\u5408\uFF0C\u53EF\u4EE5\u66FF\u6574\u500B\u5718\u968A\u7701\u4E0B\u4E0D\u5C11\u529F\u592B\u3002\n\n\u5728\u4E0A\u4E00\u7BC7 \u5BB9\u5668\u5316\u7684\u5FAE\u670D\u52D9\u958B\u767C #1, IP\u67E5\u8A62\u67B6\u69CB\u8207\u958B\u767C\u7BC4\u4F8B (/2017/05/28/aspnet-msa-labs1/) \u6211\u62FF IP \u5730\u5340\u67E5\u8A62\u670D\u52D9\u7576\u4F5C\u7BC4\u4F8B\uFF0C\u7528\u5BB9\u5668\u9A45\u52D5\u958B\u767C\u7684\u89C0\u5FF5\uFF0C\u5BE6\u4F5C\u4E86\u5FAE\u670D\u52D9\u7248\u672C\u7684 IP2C Service\u3002\u6211\u63D0\u5230\u7684 \u0022Container Driven Development\u0022 \u6982\u5FF5\uFF0C\u5C31\u662F\u5047\u8A2D\u4F60\u5C07\u4F86 \u0022\u4E00\u5B9A\u0022 \u6703\u7528\u5BB9\u5668\u5316\u7684\u65B9\u5F0F\u4F86\u90E8\u7F72\u7684\u8A71\uFF0C\u90A3\u9EBC\u5728\u67B6\u69CB\u8A2D\u8A08\u4E4B\u521D\u5C31\u80FD\u76E1\u53EF\u80FD\u7684\u5C0D\u5BB9\u5668\u6700\u4F73\u5316\u3002\u9019\u908A\u7684\u6700\u4F73\u5316\uFF0C\u4E0D\u662F\u8981\u4F60 \u591A\u505A \u4E00\u4E9B\u4EC0\u9EBC\uFF0C\u53CD\u800C\u662F\u8981\u4F60\u591A\u601D\u8003\u54EA\u4E9B\u662F\u591A\u9918\u7684\u90E8\u5206\uFF0C\u76F4\u63A5\u62FF\u6389\u6539\u7528\u5BB9\u5668 (container or orchestration) \u4F86\u66FF\u4EE3\u3002\u9069\u5EA6\u7684\u7C21\u5316\uFF0C\u53EF\u4EE5\u8B93 Operation \u7684\u5718\u968A\u66F4\u5BB9\u6613\u63A5\u624B\u7DAD\u8B77\u4F60\u7684\u670D\u52D9\uFF0CDeveloper \u4E5F\u80FD\u66F4\u5C08\u6CE8\u628A\u7CBE\u529B\u7528\u5728\u6838\u5FC3\u7684\u696D\u52D9\u4E0A\u3002\n\n\u9019\u6B21\u6211\u6703\u91CD\u69CB\u5148\u524D\u7684\u7BC4\u4F8B\u7A0B\u5F0F\uFF0C\u9032\u4E00\u6B65\u7684\u64F4\u5927 \u0022Container Driven Development\u0022 \u7684\u6982\u5FF5\uFF0C\u5047\u8A2D\u5C07\u4F86 \u0022\u4E00\u5B9A\u0022 \u6703\u7528 container \u7684\u65B9\u5F0F\u90E8\u7F72\u3002\u540C\u6A23\u7684\u4F86\u770B\u770B\uFF0C\u4F60\u53EF\u4EE5\u5982\u4F55\u5EFA\u69CB\u9019\u6A23\u7684 application?"
}