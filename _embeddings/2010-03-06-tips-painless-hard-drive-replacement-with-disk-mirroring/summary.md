# [Tips] 用「磁碟鏡像」無痛更換硬碟

## 摘要提示
- 硬碟升級: 作者將 RAID1 的兩顆 750 GB 硬碟換成 1.5 TB 硬碟，想降低停機風險。  
- 傳統搬移: 手動複製或使用 Ghost/True Image 需長時間停機且有 AF 硬碟效能疑慮。  
- Mirror 功能: 運用 Windows Server 內建磁碟鏡像，在線把資料同步到新碟。  
- Extend Volume: 鏡像解除後，以「擴充磁區」吃下剩餘空間，立即得到更大容量。  
- 動態磁碟: 全程必須把磁碟轉成 Dynamic Disk，對其他 OS 的相容性有限。  
- 系統版本: Mirror 僅見於 Server 版 Windows；Extend Volume 最好用 2008 以上。  
- 零中斷服務: 除了實體裝卸硬碟需關機，其餘步驟 SQL、IIS 等服務全程在線。  
- 實作流程: 五步驟—加碟、建鏡、同步、拆鏡、擴充—滑鼠點一點即可完成。  
- 成本低廉: 不用額外軟體，不受 Advanced Format 校正問題困擾。  
- 經驗分享: 作者以實測截圖示範，提供簡單、懶人的硬碟升級做法。

## 全文重點
作者分享一個在 Windows Server 環境中「幾乎不必停機」替換硬碟的做法。情境是伺服器原先以兩顆 750 GB 組成 RAID1，承載網站、SQL 資料庫與多個分享資料夾，如要以傳統「關機→換碟→大量複製→重建服務」的方式，不但耗時也影響線上業務；改用 Ghost / True Image 等 clone 工具，又會因 Advanced Format 新碟需後續校正而麻煩。  
作者遂利用 Windows Server 內建的軟體 RAID 功能：先把新硬碟裝入機器，將原碟與新碟建立 Mirror，系統自動進行 Resync，同步期間所有服務照常運作；同步完成後解除鏡像，讓新碟單獨承載資料，再以 Extend Volume 把未分配空間併入現有分割區，容量瞬間翻倍。全流程只有插拔硬碟那一刻需關機，其餘時間網站與資料庫完全不中斷，且無須改動任何分享權限或服務設定。  
方法簡便但仍有侷限：必須把磁碟轉成 Dynamic Disk，其他 OS 或工具未必識別；桌面版 Windows 不支援鏡像，2003 Server 又只能做 Span、看起來分割區會分段。即便如此，對只靠 Windows Server 的環境而言，此做法仍以最低成本換得最大便利，適合懶人與怕麻煩的管理者參考。

## 段落重點
### 前言：更換硬碟的需求
作者的伺服器承載多種關鍵服務，硬碟容量不足需從 750 GB 升級至 1.5 TB，要求在不中斷服務的前提下完成，於是尋找省事且停機最短的方法。

### 嘗試的傳統方法與缺點
1) 直接複製檔案需長時間停止網站與資料庫；2) 使用 Ghost 或 True Image 雖可對拷，但執行期間仍得關機，且遇到 Advanced Format 硬碟要再做效能校正，顯得麻煩又浪費時間。

### 鏡像＋Extend Volume 的思路
Windows Server 內建 Mirror Set 既能在線複製磁碟，又可搭配 Extend Volume 放大分割區。概念是「先鏡像把資料搬到新碟→拆鏡→擴容」，過程中服務可持續運作。

### 實作步驟分解
1. 查看原本磁碟組態。  
2. 關機安裝新硬碟，開機後 Device Manager 出現新碟。  
3. 對舊碟與新碟建立 Mirror，等待 Resync 完成。  
4. 中斷鏡像，使新硬碟接手原分割區。  
5. 透過 Extend Volume 將剩餘空間合併入 D:，容量立即增加。

### 優點與限制
優點：停機時間僅限插硬碟；全程服務在線；不需第三方軟體；避免 AF 硬碟後續校正。  
限制：必須使用 Dynamic Disk；Mirror 僅限 Windows Server；2003 以前版本無完整 Extend 支援；其他作業系統難以識別動態磁碟。

### 結語
透過 Windows Server 的軟體 RAID 功能，管理者可用最低成本、最少停機時間完成硬碟升級。作者自稱不專業，歡迎讀者提供更優方案，但此「懶人作法」已在實務上證明簡單可靠。