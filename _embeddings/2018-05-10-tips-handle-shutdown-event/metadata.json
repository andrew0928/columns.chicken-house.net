{
  "title": "Tips: \u5728 .NET Console Application \u4E2D\u8655\u7406 Shutdown \u4E8B\u4EF6",
  "published": true,
  "categories": null,
  "tags": [
    "microservice",
    "Docker",
    "Windows Container",
    ".NET",
    "Container",
    "Tips",
    "\u4F5C\u696D\u7CFB\u7D71"
  ],
  "tech-stacks": [
    ".NET",
    ".NET Framework 4.7.2",
    "C#",
    "Windows",
    "Windows 10 1709",
    "Windows 10 1803",
    "Windows Server 2016",
    "Windows Server 1709",
    "Windows Server 1803",
    "Windows Container",
    "Docker",
    "Dockerfile",
    "Windows Service",
    "Windows Forms",
    "Console Application",
    "Win32 API",
    "Kernel32.dll",
    "P/Invoke",
    "SetConsoleCtrlHandler",
    "HandlerRoutine",
    "SystemEvents",
    "WndProc",
    "Windows Message Pump",
    "WM_QUERYENDSESSION",
    "AutoResetEvent",
    "Task Parallel Library (Task)",
    "Visual Studio",
    "IIS",
    "Consul",
    "Azure Container Registry",
    "Windows Server Core"
  ],
  "keywords": [
    "console application",
    "shutdown event",
    "docker stop",
    "windows container",
    "service discovery",
    "SetConsoleCtrlHandler",
    "HandlerRoutine",
    "P/Invoke",
    "Kernel32",
    "CTRL_C_EVENT",
    "CTRL_BREAK_EVENT",
    "CTRL_CLOSE_EVENT",
    "CTRL_LOGOFF_EVENT",
    "CTRL_SHUTDOWN_EVENT",
    "Windows message",
    "hidden window",
    "message pump",
    "WndProc",
    "WM_QUERYENDSESSION",
    "SystemEvents",
    "microservice",
    "CDD",
    "Container Driven Development",
    "windows service",
    "windows form",
    "docker run",
    "docker logs",
    "docker build",
    "docker push"
  ],
  "generator": "BlogIndex.SyncPost v0.3.0.0, gpt-5",
  "references": [
    "/images/2018-05-10-tips-handle-shutdown-event/2018-05-12-03-39-50.png",
    "https://www.consul.io/",
    "https://www.facebook.com/andrew.blog.0928/videos/509145696127380/",
    "https://msdn.microsoft.com/zh-tw/library/55d3thsc.aspx?f=255\u0026MSPPError=-2147217396",
    "https://docs.microsoft.com/en-us/windows/console/setconsolectrlhandler",
    "https://docs.microsoft.com/en-us/windows/console/handlerroutine",
    "https://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx",
    "https://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx?f=255\u0026MSPPError=-2147217396",
    "/images/2018-05-10-tips-handle-shutdown-event/2018-05-11-01-59-31.png",
    "/(wp-content/images/2018-05-10-tips-handle-shutdown-event/2018-05-11-02-00-43.png)",
    "/images/2018-05-10-tips-handle-shutdown-event/2018-05-11-02-05-29.png",
    "/images/2018-05-10-tips-handle-shutdown-event/2018-05-12-11-21-21.png",
    "/categories/#%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0:%20.NET%20\u002B%20Windows%20Container,%20%E5%BE%AE%E6%9C%8D%E5%8B%99%E6%9E%B6%E6%A7%8B%E8%A8%AD%E8%A8%88"
  ],
  "summary": "\u6703\u5BEB\u9019\u7BC7\u5BE6\u5728\u6709\u9EDE\u610F\u6599\u4E4B\u5916\uFF0C\u539F\u672C\u6211\u53EA\u662F\u60F3\u5BEB service discovery \u4F7F\u7528 consul \u7684\u61C9\u7528\u6848\u4F8B\u554A\uFF0C\u70BA\u4E86\u914D\u5408\u6211\u4E4B\u524D\u63A8\u5EE3\u7684 CDD (Container Driven Development, \u5BB9\u5668\u9A45\u52D5\u958B\u767C) \u7684\u60F3\u6CD5\uFF0C\u6240\u6709\u7684\u670D\u52D9\u958B\u767C\uFF0C\u53EA\u8981\u642D\u914D container \u5C31\u90FD\u80FD\u7C21\u5316\u6210 console application \u6A21\u5F0F\u5C31\u597D\uFF0C\u7D50\u679C\u904E\u7A0B\u5C31\u78B0\u5230\u9019\u500B\u5751...\u3002\u89E3\u6C7A\u7684\u904E\u7A0B\u4E2D\uFF0C\u4E5F\u610F\u5916\u6316\u51FA\u4E0D\u5C11 google \u4E0D\u5230\u7684\u7D30\u7BC0\uFF0C\u52A0\u4E0A\u9019\u500B\u554F\u984C\u6C92\u641E\u5B9A\u4E4B\u524D\uFF0C\u6211\u8981\u5BEB\u7684\u5167\u5BB9\u8DDF\u7BC4\u4F8B\u5BE6\u5728\u5BEB\u4E0D\u4E0B\u53BB\u554A.. \u65BC\u662F\u5C31\u591A\u4E86\u9019\u7BC7...\n\nWindows \u7562\u7ADF\u662F\u500B\u4EE5 GUI \u7AC4\u8D77\u4F86\u7684 OS, \u6709\u5F88\u591A\u6771\u897F\u9084\u662F\u6839\u6DF1\u8482\u56FA\u7684\u7D81\u5728 windows \u4E0A\u3002\u9019\u6B21\u78B0\u5230\u7684\u554F\u984C\u6700\u5F8C\u9084\u662F\u642C\u51FA windows message, \u8996\u7A97\u7684\u904B\u4F5C\u57FA\u790E\u624D\u89E3\u6C7A\u6389\u7684, \u611F\u89BA\u7E5E\u4E86\u9EDE\u9060\u8DEF, \u6211\u4E5F\u64D4\u5FC3\u8DDF windows form \u9019\u9EBC\u9F90\u5927\u7684\u6A5F\u5236\u7D81\u4F4F\u4E86\uFF0C\u6703\u7522\u751F\u5F88\u591A\u4E0D\u5FC5\u8981\u7684\u76F8\u4F9D\u6027? \u5982\u679C\u4F60\u77E5\u9053\u6709\u66F4\u597D\u7684\u505A\u6CD5\uFF0C\u9EBB\u7169\u7559\u500B\u8A00\u6307\u9EDE\u4E00\u4E0B~ :)"
}