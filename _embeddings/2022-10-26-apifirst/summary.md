# 架構師觀點 - API First 的開發策略

## 摘要提示
- API First: 以 API 規格為先的開發流程，可在寫任何一行程式前先驗證商業需求。
- 團隊期待: 由產品導向轉為 API 導向，決定 DX 與 UX 的先後順序與投資比例。
- 康威定律: API 規格同時也是組織協作介面，影響團隊劃分與溝通效率。
- 商業價值: 標準化 API 能促成整合、規模化及生態系，創造 API 經濟。
- 架構師角色: 在敏捷環境中守護長期目標，抽象化需求並制定「核心機制」。
- 產品／客製平衡: 以模組化核心 + 低門檻包裝（SDK、BFF 等）降低前端複雜度。
- 團隊 M 型化: 深耕 API 的專家與大量易上手的應用開發者並存。
- 文化與能力: 透過讀書會與案例吸收，如《Continuous API Management》等，培養治理與設計能力。
- 成功關鍵: 找到真正代表領域問題的 API「公式」，保持介面長期穩定前相容。
- 失敗陷阱: 只顧命名與規範而忽略 Domain，將導致「通過檢查卻無效用」的 API。

## 全文重點
本文改寫自 DevOpsDays Taipei 2022 Keynote，作者以自身經驗說明「API First」為何成為現代軟體開發不可忽視的策略。核心觀念在於將 API 視為「合約」，在開發最初就鎖定並驗證其是否正確描述商業領域問題，之後所有程式撰寫、部署與維運皆圍繞此合約展開。作者首先引導讀者檢視團隊現況：是 UI 先行、還是 API 先行；功能先做再暴露 API，還是先定 Contract 同步開發；API 僅為附屬工具，抑或能獨立成商業模式。這些答案決定組織對 API First 的「期待值」。

從技術面觀之，API 既是系統間通訊協定，也是團隊協作介面，與康威定律相互呼應。因此若想提升協作效率，就必須限制不良依賴（共用 DB 等），並以 API 為唯一溝通管道。Jeff Bezos 2002 年的 AWS 內部備忘錄即為經典範例：所有服務必須對外提供 API，否則一律開除。這項鐵則逼迫團隊提早面對分散式系統挑戰，亦奠定 AWS 今日的雲服務基礎。

在商業層面，標準化 API 能帶來規模化、生態系與新客群，形成「API 經濟」。作者以零售切入餐飲的案例說明：若 API 結構良好，只需加上少量特殊零件，即可快速延伸到異業場景，猶如樂高在標準積木外補充主題零件。

但 API First 不等於「多開 API」。真正難題是劃分 API 與 APP 邊界，避免將流程複雜度塞入後端。常見做法是維持簡潔 API，透過 SDK、模板或 BFF 降低前端門檻，以取得模組化與客製化的平衡。此時便需一位能抽象化 Domain 的角色——架構師。架構師在敏捷環境中負責：看見長期路徑、制定核心機制、溝通架構並支援開發；他透過抓出「設計公式」把多元需求收斂成穩定 API，維持介面長期前相容，以折扣規則引擎為例即是將所有商品、會員、優惠券先組成購物車，再交由演算核心處理，達到高擴充低修改。

最後作者點出文化與能力建設的重要：所有轉型都須先解決人與流程。團隊可透過讀書會系統性吸收經驗，推薦閱讀《Continuous API Management》、《API Design Patterns》與《Software Engineering at Google》。第一本解釋 API 治理與生命週期；第二本提供卅種設計模式；第三本則展現 Google 規模下的工程文化。唯有同時具備動機、能力與文化，API First 才能落地而不流於口號。

## 段落重點
### 寫在前面
作者說明本文源自 DevOpsDays Taipei 2022 Keynote；因演講時間有限，改以文字形式補足。文章將分為「期待」、「開發策略」、「案例」與「總結」，本篇為第一部分，主攻期望與角色定位。

### 1 你的團隊有多「期待」推行 API First
透過產品、技術、經營三面向的選擇題，幫助讀者判斷團隊是產品導向還是 API 導向。API First 代表先顧 DX 再顧 UX，先訂合約再寫程式，並把 API 當成商業產品來經營。

#### 1.1 了解團隊現在的狀態
解析回答背後揭露的文化與成熟度；指出不良溝通管道（共用 DB 等）會抵銷 API First 效益；提醒應由服務提供方還是使用方擬定規格並落實前相容。

#### 1.2 老闆期待的 API 經濟
從標準化到生態系的路徑說明 API 的長期商業價值；以樂高與零售跨餐飲案例比喻：核心積木 + 特製零件 = 大規模又客製化的服務模式。

#### 1.3 架構師在敏捷團隊該扮演的角色
引用多篇國內外文章，說明架構師須在「快速交付」與「長期目標」之間取得平衡；他負責抽象化需求、定義核心機制、統一介面並支撐多團隊協作。以折扣規則引擎示例，說明如何藉「設計公式」穩定 API。

#### 1.4 改變團隊的文化與能力
推行 API First 需同步調整組織文化及技能。作者分享公司以讀書會吸收《Continuous API Management》、《API Design Patterns》、《Software Engineering at Google》三書經驗，培養治理、設計與工程文化，並點出團隊 M 型化趨勢：深度 API 專家與大量低門檻應用開發者並行。

### 第一部分小結
彙整本篇核心：API First 的動機、期望、商業價值與關鍵角色已說明完畢；下一篇將聚焦 Contract 驅動流程與狀態機設計法。附上投影片、直播與共筆連結供延伸閱讀。