# 換新系統了!! CS 2.0 Beta 3

## 摘要提示
- 個人改造 CS 1.0: 為了保留自行加上的眾多功能與修正，作者長期維持在 Community Server 1.0。
- 系統升級契機: 伺服器升級且作業系統改為 Windows Server 2003 x64，觸發相容性問題。
- 相容性限制: IIS 6 在 x64 無法同時執行 32/64 位元模式，ASP.NET 1.1 僅支援 32 位元。
- 微軟支援現況: 微軟未提供 .NET Framework 1.1 的 64 位元版，限制了部署選項。
- 實務影響: 為了舊版 CS 1.0，IIS 必須整體切回 32 位元模式，抵銷升級效益。
- 取捨決策: 暫時捨棄自改功能，改用官方 CS 2.0 Beta 3 以解決平台相容問題。
- 使用感受: 官方版在底層與整體性改進上效果顯著，雖少部分客製仍整體滿意。
- 過往改造紀錄: 列出多篇先前針對編輯器、相簿與擴充套件的改造文章。
- 技術參考: 引用微軟 KB 894435 說明 x64 上 ASP.NET 1.1/2.0 切換與限制。
- 後續規劃: 未來將逐步分享新版使用心得與改進重點。

## 全文重點
作者原本對軟體升級一向手癢躍躍欲試，但 Community Server（CS）這套部落格系統例外，從 1.0 上線後便未再動過，主因是他投入大量時間客製與擴充，包含加強 .TEXT 編輯介面、改造 CS 的 Blog Editor、啟用相簿與自製擴充等，累積了許多貼合自身需求的功能。事情的轉折在於基礎環境全面升級：伺服器更新、作業系統改為 Windows Server 2003 x64。此時相容性問題浮現：IIS 6 雖支援 32 與 64 位元兩種模式，但在 x64 平台上無法並行兩者；ASP.NET 1.1 僅能跑在 32 位元模式，ASP.NET 2.0 則可跑在 32 或 64 位元模式。偏偏 CS 1.0 只能在 ASP.NET 1.1 下運作，Microsoft 又未提供 .NET 1.1 的 64 位元 Runtime。實務上意味着，若要繼續使用 CS 1.0，整個 IIS 必須被迫以 32 位元模式運行，等於犧牲了新系統的 64 位優勢與升級意義。面對這樣的技術限制與維運權衡，作者決定暫時放下先前客製化的眾多功能，改而採用官方的 CS 2.0 Beta 3。儘管因此失去一些既有的修補與個人化調整，但新版在架構與根本性改善方面表現不錯，實際使用感受良好。作者認為官方版本才有能力在底層做出全面性優化，帶來更穩定與長期可維護的方向。至於哪些改進最有感、哪些功能取回或替代的方式，將留待之後逐步分享。文末亦附上微軟 KB 894435 的技術說明，以供理解與處理 x64 平台上 ASP.NET 1.1 與 2.0 在 IIS 6 的切換限制；同時整理了過去相關改造文章連結，作為背景與參考。

## 段落重點
### 升級前的堅持與客製化累積
作者平時樂於嘗鮮，但對 CS 1.0 例外，因投入大量客製開發而避免升級，包含強化 .TEXT 編輯介面、重製 Blog Editor（兩篇）、相簿功能啟用，以及多個 Community Server Extension 的新增功能。這些改造累積成一套高度符合自身需求的工作流，使得升級成本不只是版本替換，更涉及功能重現與維護風險，因此長期維持在 1.0。

### x64 平台相容性限制與實務困境
伺服器與作業系統升級至 Windows Server 2003 x64 後，IIS 6 的 32/64 位元模式不能並行，ASP.NET 1.1 僅支援 32 位元，2.0 則可跑 32 或 64 位。由於 CS 1.0 只能在 ASP.NET 1.1 上運作，而微軟並未提供 .NET 1.1 的 64 位元 Runtime，導致若要延續 CS 1.0，須讓整個 IIS 退回 32 位元模式。此舉抵銷了新硬體與作業系統升級的優勢，帶來維運與效能上的無奈與不經濟。作者引用微軟 KB 894435 說明此限制，凸顯問題非個案設定，而是平台級制約。

### 升級取捨、採用 CS 2.0 Beta 3 與初步評價
在評估維持舊版的代價與平台升級的效益後，作者決定暫時放棄先前的客製功能，轉用官方 CS 2.0 Beta 3。雖然因此失去過去針對編輯體驗與功能細節的修補，但新版在底層與整體性上有更根本的改進，實際使用感受不錯。作者認為官方版本能從架構層面解決許多長期痛點，後續將逐步分享新版的亮點與具體改善，同時把舊有改造文章作為背景資料保留，未來視需求再行評估取回或替代方案。

## 資訊整理

### 知識架構圖
1. 前置知識：
   - ASP.NET 版本差異（1.1 vs 2.0）
   - Windows Server 2003 x64 與 IIS 6 的架構與限制
   - 32 位元與 64 位元執行模式的概念與互斥性
   - Community Server（CS）平台版本相容性
   - 自訂外掛/擴充功能與官方版本升級的取捨

2. 核心概念：
   - 平台相容性：CS 1.0 需 ASP.NET 1.1（僅 32 位元），CS 2.0 可用 ASP.NET 2.0（支援 x64）
   - IIS 6 位元模式限制：同一台 x64 Windows 上無法同時跑 32 與 64 位元模式
   - 升級動機：OS 與 Server 升級至 x64 後導致舊版 CS 無法在理想模式下運作
   - 功能取捨：放棄自訂修改，改採官方新版以獲得根本性改進與相容性
   - 維運策略：以官方版為主、日後再逐步補回必要調整

3. 技術依賴：
   - CS 1.0 → 依賴 ASP.NET 1.1（僅 32 位元） → 迫使 IIS 以 32 位元模式執行
   - CS 2.0 Beta 3 → 依賴 ASP.NET 2.0（可 32/64 位元） → 可在 x64 Windows 正常運作
   - IIS 6 模式切換（KB 894435） → 控制整體執行位元模式，影響全站應用程式池

4. 應用場景：
   - 從 32 位元環境遷移到 64 位元 Windows Server 的部落格/社群系統升級
   - 維持既有自訂功能 vs 採用官方新版的決策評估
   - 需要同機並存多版本 .NET Web 應用的環境規劃
   - 在 x64 環境下優先選擇支援 ASP.NET 2.0（或以上）之產品版本

### 學習路徑建議
1. 入門者路徑：
   - 了解 32/64 位元差異與 IIS 6 位元模式限制
   - 認識 ASP.NET 1.1 與 2.0 的基本差異與部署需求
   - 了解 Community Server 版本與 .NET 版本相容矩陣

2. 進階者路徑：
   - 實作 IIS 6 上的位元模式切換與應用程式池配置
   - 評估並規劃從 CS 1.0 升級至 CS 2.0 的資料與設定遷移
   - 將自訂功能模組化，評估在新版上的替代或重寫方案

3. 實戰路徑：
   - 建立測試環境，驗證 CS 2.0 Beta 3 在 x64 + ASP.NET 2.0 的行為
   - 擬定回滾計畫與停機窗口，執行正式環境升級
   - 程式化監控升級後效能與相容性，逐步補回必要的小改動

### 關鍵要點清單
- IIS 6 位元模式互斥：x64 Windows 上不能同時跑 32 與 64 位元模式 (優先級: 高)
- ASP.NET 1.1 限制：僅支援 32 位元模式，無 64 位元 Runtime (優先級: 高)
- CS 1.0 相容性：只能在 ASP.NET 1.1 下運作，限制升級彈性 (優先級: 高)
- ASP.NET 2.0 優勢：可在 32/64 位元運作，配合新版 CS 解鎖 x64 能力 (優先級: 高)
- 升級動因：OS 升級到 Windows Server 2003 x64 迫使應用升級 (優先級: 高)
- 官方版本取向：官方新版可做底層改進，長期維護性優於大量私改 (優先級: 中)
- 自訂功能取捨：短期犧牲自訂功能以換取穩定與相容性 (優先級: 中)
- 部署策略：全伺服器位元模式的選擇會影響所有站台 (優先級: 高)
- 測試先行：升級至 Beta 版需先在測試環境驗證風險 (優先級: 中)
- 回滾計畫：升級過程需具備快速回復舊版的方案 (優先級: 高)
- 延後優化：先確保核心功能可用，非必要改動稍後進行 (優先級: 中)
- 文件依據：參考 KB 894435 了解模式切換操作與限制 (優先級: 中)
- 擴充重構：將過去修改模組化，利於新版重用或替代 (優先級: 中)
- 效能期望：x64 + ASP.NET 2.0 在資源與效能上具潛在收益 (優先級: 低)
- 使用者體驗：官方新版在整體體驗與穩定性上更有保證 (優先級: 中)