# Memory Management ‑ (I). Fragment ?

# 問答集 (FAQ, frequently asked questions and answers)

## Q: 有了作業系統的虛擬記憶體機制之後，程式設計師是否就完全不必擔心「記憶體不夠」的問題？
虛擬記憶體確實讓開發人員比較不必直接面對「實體記憶體不足」的困擾，因為它可以用硬碟空間（swap）來換取額外的記憶體空間。然而它仍受硬體位元數的位址空間限制：例如 32 位元程式最多只能使用 4 GB 位址空間。因此「不用擔心」並非絕對，依舊得注意位址空間的硬性上限與效能影響。

## Q: 為什麼說虛擬記憶體可以間接解決「實體記憶體 Fragment（外部碎片）」的問題？
在分頁機制下，邏輯（虛擬）位址空間可被切成一頁一頁的 page，這些 page 映射到的實體記憶體 frame 不必連續。就像一個看似連續的大檔案其實散落在硬碟的不同區塊一樣，連續的虛擬位址可以對應到不連續的實體記憶體。於是即使實體 RAM 被切得零散，也不會影響程式對「連續記憶體」的需求，從而迴避了外部碎片的問題。

## Q: 作者提出的實驗──連續配置 4 KB 區塊直到記憶體用盡、再交錯釋放一半後嘗試配置 5 KB──最終會成功還是失敗？不同 OS 或 64 / 32 位元環境結果相同嗎？
本文沒有直接給出結果，而是把它當成「大挑戰」留給讀者自行動手實測或猜測；實際行為可能因作業系統、配置演算法、甚至 32 / 64 位元環境的差異而有所不同。