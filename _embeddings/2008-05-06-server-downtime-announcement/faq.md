# 停機公告

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是停機公告？
- A簡: 停機公告是事前通知服務暫停的訊息，載明時間、影響範圍、原因與聯絡方式。
- A詳: 停機公告是營運與維運人員在計畫性維護、搬遷或異動前，主動發布的服務中斷通知。內容通常包含起迄時間、影響對象與服務、預期風險、聯絡窗口與回復機制。本文示例為自宅伺服器因機櫃與環境因素需在兩個週末其一停機，提前提醒受影響讀者、託管客戶、DNS、VPN 與家用網路使用者預做準備，屬於良好的期望管理。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q16, B-Q4

Q2: 什麼是維護時窗？與停機有何差異？
- A簡: 維護時窗是允許變更的時間區間；停機是實際不可用時段，兩者可重疊不必相等。
- A詳: 維護時窗（Maintenance Window）是經同意、允許進行變更的時段，用於執行備份、升級、搬遷等工作，可能包含風險緩衝。停機則是服務實際不可用的時間。良好做法是公告時窗上限，並力求將停機時間縮短於時窗內。本文以兩個可能週末為時窗示意，讓使用者提前安排，並留有作業不確定性的緩衝。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, B-Q4, D-Q5

Q3: 為什麼需要事前公告停機？
- A簡: 降低干擾、提升信任與可預期性，讓使用者可事先規劃替代方案。
- A詳: 事前公告有三大價值：期望管理、風險緩解與信任建立。期望管理避免「突發不可用」帶來的焦慮；風險緩解讓受影響者可提前備份、調整 TTL、改用備援連線；信任建立來自透明溝通與負責態度。本文作者提前一至二週預告，明列受影響族群，讓讀者、託管與 VPN 使用者有心理與作業準備，屬成熟運維文化的表徵。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, B-Q4, C-Q1

Q4: 本文中誰會受到影響？
- A簡: 忠實讀者、家用與鄰居 Wi‑Fi 使用者、網站託管客戶、DNS 託管客戶與用 VPN 的同學。
- A詳: 影響對象包含：1) 部落格讀者（網站不可達）；2) 在家中或借用家中 Wi‑Fi 的鄰居（網路中斷）；3) 在該主機上做網站託管者（HTTP/HTTPS服務中斷）；4) 將 DNS 託管於該主機者（解析受阻、影響下游）；5) 透過該點做 VPN 上網的同學（通道不可用）。此分群有助於制定差異化溝通與緩解措施。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q6, A-Q7, C-Q8

Q5: 這次停機的可能時間為何？
- A簡: 兩個週末其一，2008/05/10–11 或 2008/05/17–18，具不確定性與緩衝。
- A詳: 文中明確指出停機將落在兩個週末之一：2008/05/10–11 或 05/17–18。這種以「備選時窗」公告的方式，讓相關方能在兩個時窗都預作安排，同時讓維運端保留因實際現場變因（如拆裝、走線、環境限制）而調整的彈性，降低臨時延期的負面感受。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, B-Q10, D-Q5

Q6: 什麼是網站託管與 DNS 託管？有何差異？
- A簡: 網站託管提供內容服務；DNS 託管提供網域名稱解析。前者依賴後者。
- A詳: 網站託管（Web Hosting）指在伺服器上對外提供 HTTP/HTTPS 內容，如部落格或應用。DNS 託管（DNS Hosting）則負責域名到 IP 的解析服務，是所有網路服務的入口。兩者常共存，但職責不同：DNS 出問題，網站即便正常也無法被找到；網站掛了，DNS 仍可解析但服務不可用。停機時需分別評估影響與緩解方案。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, B-Q2, D-Q2

Q7: 什麼是 VPN？為何會受停機影響？
- A簡: VPN 是建立加密通道的技術；伺服器停機將中斷通道，遠端無法連線。
- A詳: VPN（Virtual Private Network）透過協定（如 OpenVPN、IPsec、WireGuard）在公網上建立加密隧道，提供安全的遠端存取。若伺服器端為 VPN 終端或路由點，停機將中斷握手與資料轉發，影響所有依賴該通道的使用者。公告可讓用戶改道備援通道或調整工作安排，避免中斷。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q3, C-Q9, D-Q3

Q8: 什麼是機櫃？把伺服器放雜物間有何風險？
- A簡: 機櫃是安裝設備的機架；雜物間易受散熱、灰塵與走線擁擠影響操作。
- A詳: 機櫃（Rack/Cabinet）用於固定伺服器與網通設備並整理線纜。置於雜物間雖節省空間，但面臨散熱不良、灰塵累積、電源與線纜管理困難，以及操作空間不足等風險。文中提及「拔機器很麻煩」，顯示實體環境對維護工時與風險的直接影響，需透過標籤、束線、散熱與照明改善。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q10, C-Q7, D-Q6

Q9: 為何拔機器很麻煩會導致停機時間拉長？
- A簡: 空間狹窄與線纜複雜增加作業時間與失誤風險，需更長緩衝。
- A詳: 狹小空間與線纜混亂會讓拆裝、標記、回插與測試變慢。任何一條電源或網路線錯插，都可能延長故障定位時間。此類「現場摩擦成本」常被低估，導致停機超時。解法是事前拍照、標籤線纜、制定步驟與回復清單，並安排足夠緩衝時窗與照明工具。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q7, D-Q5, D-Q6

Q10: 什麼是影響評估（Impact Assessment）？
- A簡: 系統性盤點受影響服務、使用者與相依關係，估算風險與對策。
- A詳: 影響評估透過列出所有服務、其上游與下游依賴（如 DNS→Web、VPN→路由）、涉眾分群（讀者、託管客戶、家用）與關鍵時段，估算停機帶來的可用性與體驗風險。評估結果反過來指導公告內容、時窗安排、TTL 調整與備援方案，並決定是否需要分階段作業。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q11, C-Q8, D-Q1

Q11: 什麼是溝通對象優先順序？為何「客戶第一」重要？
- A簡: 依受影響程度與合約義務排序通知；客戶優先可降低商業風險。
- A詳: 溝通優先序以「影響深度×責任義務」排序。付費或承諾 SLA 的客戶通常優先，其次是內部使用者與一般讀者。先通知高風險對象，可讓其安排備援，降低損失與抱怨。本文以「客戶永遠第一」詼諧呈現此原則，實為專業服務的基本。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q4, C-Q8, D-Q10

Q12: 什麼是服務可用性與連續性？有何差異？
- A簡: 可用性是當下能否使用；連續性是長期不中斷能力。停機影響兩者。
- A詳: 可用性（Availability）描述某一時間點服務是否可用，常以百分比表示；連續性（Continuity）則關乎長期持續提供服務的能力，重視備援、備份與災復。計畫性停機短期降低可用性，但若能減少風險與提升長期穩定，反而有助連續性。關鍵在於透明公告與控制停機時間。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q12, D-Q5, D-Q8

Q13: 為什麼要在停機前調整 DNS TTL？
- A簡: 降低 TTL 可讓解析快過期，縮短切換與恢復的等待時間。
- A詳: DNS 快取遵循 TTL。停機前數天將關鍵記錄 TTL 降低（如 1 小時），讓用戶端與遞迴 DNS 更快捨棄舊解析，有助於臨時改指向維護頁或回復時快速生效。作業要配合遞增 SOA 序號並於完成後恢復較高 TTL，以減少查詢負載。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, C-Q5, D-Q2

Q14: 自宅自建服務的核心價值與風險是什麼？
- A簡: 價值在彈性與學習；風險是可用性受限於家用電力、網路與環境。
- A詳: 自託管帶來高度可控性、低成本與技術成長，但在電力穩定、ISP 品質、實體空間（如雜物間散熱）、安全與監控上受限，難達企業級 SLA。適合非關鍵或學習用途，須以公告、備份、簡單備援與良好記錄降低風險與影響。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q6, B-Q12, D-Q8

Q15: 什麼是回復計畫（Rollback Plan）？
- A簡: 在變更失敗時，能迅速回到已知穩定狀態的具體方案與步驟。
- A詳: 回復計畫包括：變更前的完整備份與校驗、可逆的設定變更、回復步驟清單、決策門檻（何時觸發回復）、與回復後驗證。實體環境變更（搬動機器）更需明確的回接拓撲與標籤，確保走線無誤。沒有回復計畫，停機風險與超時機率大幅上升。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: C-Q2, C-Q7, D-Q7

Q16: 一則良好的停機公告應包含哪些要素？
- A簡: 時窗、影響、原因、聯絡方式、緩解建議、進度更新與回報。
- A詳: 完整公告建議包含：1) 明確起迄或備選時窗；2) 受影響服務與對象清單；3) 停機原因與預期影響；4) 聯絡窗口；5) 使用者可採取的因應（如提前備份、改用備援）；6) 更新機制（進度、延長、恢復）；7) 事後回報連結。本文已呈現時窗與對象，若再補足其餘要素更完善。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: C-Q1, D-Q10, A-Q3

Q17: 小規模環境需要 SLA 嗎？可用「最佳努力」替代嗎？
- A簡: 可用最佳努力，但應清楚範圍與期望；關鍵用戶需定義簡易 SLA。
- A詳: 在自宅或小規模環境，正式 SLA 不易達成，但可用「最佳努力」加上明確邊界：服務範圍、支援時段、回應時間與溝通方式。若服務他人（託管、DNS），建議建立輕量級 SLA 或服務約定，至少涵蓋維護公告節奏與恢復目標，避免誤解。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, A-Q12, D-Q10

Q18: 什麼是復盤（Post-mortem）？為何停機後要做？
- A簡: 復盤是回顧事件的學習文件，找根因與改進，避免再犯。
- A詳: 復盤著重事實時間線、影響、根因分析、做得好的與可改進之處，以及具體改進行動與責任人。對計畫性停機而言，也需檢視公告是否充分、作業是否超時、驗證是否完整。無責備文化能促進誠實與持續改善，提升未來維護品質與用戶信任。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: D-Q5, D-Q10, B-Q4

### Q&A 類別 B: 技術原理類

Q1: DNS 託管如何運作？
- A簡: 透過權威 DNS 伺服器提供區檔，遞迴解析器依 TTL 快取記錄完成解析。
- A詳: 技術原理說明：域名解析從根伺服器到 TLD，再到權威 DNS 伺服器，取得區檔中的 A/AAAA/CNAME 等記錄。關鍵步驟：設定 SOA、NS、A 記錄；遞增序號；調整 TTL；同步主從；開放 53/TCP,UDP。核心組件：權威 DNS（BIND/PowerDNS）、遞迴解析器、區檔與序號。停機時權威節點不可用會導致新查詢失敗，快取在 TTL 內仍可用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, A-Q13, C-Q5

Q2: 網站託管如何運作？
- A簡: Web 伺服器透過 HTTP/HTTPS 提供內容，常經 NAT/防火牆轉發到內部主機。
- A詳: 技術原理說明：瀏覽器發出 DNS 解析，取得 IP 後連線到 80/443 埠，由 Nginx/Apache 回應內容，可能再到應用與資料庫。關鍵步驟：域名指向、TLS 憑證、反向代理、靜態/動態資源處理、健康檢查。核心組件：Web Server、App、DB、反代、WAF、NAT/Port-Forward。家用架構常由路由器將外部連線轉發至內網伺服器。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, B-Q6, C-Q4

Q3: VPN 連線如何運作？
- A簡: 透過握手建立加密隧道，封裝原始封包穿越公網，兩端解封裝通訊。
- A詳: 技術原理說明：以 OpenVPN 為例，TLS 握手驗證雙方，協商金鑰後以對稱加密。關鍵步驟：認證（證書/金鑰）、握手、虛擬介面（tun/tap）、路由下發、心跳保活。核心組件：伺服器進程、用戶端、PKI、路由規則、NAT。停機時伺服器端口不可達導致握手失敗，現有通道在保活逾時後中斷。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q7, C-Q9, D-Q3

Q4: 計畫性維護的執行流程為何？
- A簡: 前期評估與公告→備份與降風險→執行變更→驗證恢復→回報與復盤。
- A詳: 技術原理說明：以變更管理生命週期控制風險。關鍵步驟：1) 盤點影響、公告時窗；2) 備份驗證、降 TTL、凍結變更；3) 現場作業（斷電、移機、配置）；4) 服務驗證（DNS/HTTP/VPN）；5) 恢復公告、復盤。核心組件：變更單、備份系統、監控與驗證腳本、溝通渠道與回復計畫。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q1, A-Q16, C-Q1

Q5: 降低 TTL 與 DNS 傳播機制如何影響停機？
- A簡: 低 TTL 讓新記錄快生效，縮短切換與恢復等待；需正確遞增序號。
- A詳: 技術原理說明：遞迴解析器依 TTL 快取，TTL 到期才會重查。關鍵步驟：在停機前 N 天降低重點記錄 TTL；修改區檔後遞增 SOA 序號；reload 服務。核心組件：SOA 序號、$TTL、A/AAAA/CNAME 記錄、權威服務。注意部分 ISP 仍有最小快取或忽略低 TTL 的情況，需預留緩衝。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, C-Q5, D-Q2

Q6: 家用網路服務的典型架構為何？
- A簡: 外網→家用路由/NAT→交換器→AP/伺服器，並以端口轉發對外提供服務。
- A詳: 技術原理說明：ISP 提供公網或 CGNAT，家用路由進行 NAT、防火牆與 DHCP；交換器連接有線設備；AP 提供 Wi‑Fi；伺服器承載 DNS/Web/VPN。關鍵步驟：設置固定內網 IP、Port-Forward、動態 DNS（若無固定外網）、基本防火牆。核心組件：路由器、交換器、AP、伺服器、UPS。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q2, C-Q7, D-Q4

Q7: 伺服器啟停順序與相依性如何設計？
- A簡: 先基礎（網路、DNS），再資料服務（DB），最後應用與 Web；關機相反。
- A詳: 技術原理說明：以依賴拓撲避免啟動錯序。關鍵步驟：開機先確保交換、路由與 DNS 可用，再啟 DB、緩存（Redis），最後 App/Web 與負載均衡；關機時先 Drain 流量，再停 App→DB→DNS→網路。核心組件：systemd 依賴、健康檢查、啟動腳本。良好順序可縮短恢復時間並避免資料損毀。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q7, D-Q1, D-Q6

Q8: 監控與日誌如何支援維護？
- A簡: 監控即時告警與趨勢，日誌提供根因線索；兩者驗證恢復品質。
- A詳: 技術原理說明：以 Pull/Push 模式收集指標與日誌。關鍵步驟：建立存活檢測（ICMP、TCP、HTTP）、合成交易、日誌集中化與關鍵字告警；維護前降噪或暫停告警；恢復後用儀表板驗證 SLO。核心組件：Prometheus/Zabbix、Grafana、ELK/EFK、Alertmanager。小型環境也可用簡易探測腳本。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: C-Q6, D-Q1, D-Q8

Q9: 供電與 UPS 的保護機制如何運作？
- A簡: UPS 提供短暫續電與保護，配合自動關機避免資料損毀。
- A詳: 技術原理說明：UPS 將市電轉換與穩壓，斷電時以電池供電。關鍵步驟：容量評估、關聯關機腳本（NUT/apcupsd）、定期自檢與電池更換。核心組件：UPS 主機、監控軟體、受保護插座。搬移作業前關閉 UPS 輸出、標記回接，避免誤斷供電。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q7, D-Q6, D-Q8

Q10: 線纜與散熱在雜物間的風險機制是什麼？
- A簡: 線纜擁擠與散熱不足導致誤拔、阻塞、過熱降速或保護性關機。
- A詳: 技術原理說明：氣流受阻使溫度升高，硬體為保護降頻或關機；線纜拉力與彎折造成接觸不良。關鍵步驟：前後留風道、理線槽、上標籤、使用帶鎖扣網線與電源；安排溫度監控。核心組件：理線器、溫濕度計、帶鎖電源線。事前優化可顯著降低停機延誤。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, C-Q7, D-Q6

Q11: 影響度量與使用者分群機制如何設計？
- A簡: 依服務依賴與業務情境分群，設量化指標衡量影響深度與廣度。
- A詳: 技術原理說明：以服務目錄與依賴圖建立映射。關鍵步驟：列服務清單、標記使用者群（客戶、讀者、家用、VPN）、定義指標（停機時長、請求失敗率、受影響人數）、關鍵時段。核心組件：CMDB、依賴圖、儀表板。量化有助設定優先順序與公告內容。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q4, A-Q10, D-Q10

Q12: 小型自託管環境的最小可行變更管理架構是什麼？
- A簡: 輕量變更單、公告節奏、備份驗證、回復計畫與簡易驗證清單。
- A詳: 技術原理說明：以最小流程控制風險。關鍵步驟：記錄變更目的/範圍/風險、公告與確認、前置備份與 TTL、實施與驗證、回報與復盤。核心組件：文件（筆記/看板）、腳本化備份與驗證、通訊群組。成本低、收益佳，特別適合本文情境。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q15, C-Q1, D-Q9

### Q&A 類別 C: 實作應用類（10題）

Q1: 如何撰寫並發布一則良好的停機公告？
- A簡: 明確時窗、影響對象、原因、聯絡方式與更新機制，透過多渠道發布。
- A詳: 具體實作步驟：1) 蒐集影響清單與時窗；2) 撰寫公告含FAQ與緩解建議；3) 指定聯絡窗口；4) 排程更新與恢復通知。關鍵程式碼片段或設定：無（文字模板）。注意事項與最佳實踐：提前至少5–7天、重點對象直達（信件/群組）、公開頁面備份鏈接與狀態頁，並標示可能變動的「或」時窗，如本文示例。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, A-Q3, D-Q10

Q2: 如何備份網站與資料庫以支援回復計畫？
- A簡: 使用檔案打包與資料庫匯出，備份至異地並校驗還原。
- A詳: 具體實作步驟：1) 停更或進入唯讀；2) 打包網站檔案；3) 匯出資料庫；4) 上傳異地；5) 測試還原。關鍵程式碼片段或設定：tar -czf site.tgz /var/www/site; mysqldump -u user -p db > db.sql; sha256sum 產生校驗。注意事項與最佳實踐：含憑證與設定檔；標記版本與時間；測試還原到臨時環境；加密備份。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q15, D-Q7, C-Q8

Q3: 如何備份 BIND/PowerDNS 的 DNS 區檔？
- A簡: 複製區檔與主設定、記錄 SOA 序號，並離線保存與校驗。
- A詳: 具體實作步驟：1) 停止變更；2) 備份 /etc/bind/named.conf* 與 /var/cache/bind/*.zone；3) 記錄 SOA 序號；4) 離線保存。關鍵程式碼片段或設定：cp -a /etc/bind /backup/bind-YYYYMMDD; rndc freeze; rsync -a /var/lib/bind /backup/; rndc thaw。注意事項與最佳實踐：確保權限；備份 KSK/ZSK（DNSSEC 如有）；備份清單與還原測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, A-Q13, D-Q2

Q4: 如何在 Nginx 設定維護模式（顯示維護頁）？
- A簡: 以 try_files 或返回靜態頁，或用 map 只對外部顯示維護頁。
- A詳: 具體實作步驟：1) 上傳 maintenance.html；2) 調整 server 區塊；3) reload。關鍵程式碼片段或設定：if (-f /var/www/maintenance.enable) { return 503; } error_page 503 @maint; location @maint { root /var/www; try_files /maintenance.html =503; }；touch maintenance.enable 啟用。注意事項與最佳實踐：允許白名單 IP 繼續測試；設置 Retry-After 標頭。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, D-Q1, C-Q6

Q5: 如何調整 DNS TTL 並快速恢復？
- A簡: 提前降 TTL，修改區檔遞增 SOA，reload；恢復後再調回。
- A詳: 具體實作步驟：1) 編輯區檔，設 $TTL 3600 或更低；2) 遞增 SOA 序號；3) rndc reload；4) 停機；5) 恢復後調回 86400。關鍵程式碼片段或設定：$TTL 3600; @ IN SOA ns1.example.com. admin.example.com. (2025082601 3600 900 604800 300)。注意事項與最佳實踐：預留1–3天讓低 TTL 生效；避免過低導致查詢暴增；核對序號。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, B-Q5, D-Q2

Q6: 如何測試 DNS、HTTP 與 VPN 的服務狀態？
- A簡: 用 dig/curl 檢查解析與回應，用 systemctl 或客戶端測 VPN 連線。
- A詳: 具體實作步驟：DNS：dig +trace example.com；HTTP：curl -I https://example.com；VPN：systemctl status openvpn-server 或 openvpn 客戶端連線測試。關鍵程式碼片段或設定：dig @ns1 A example.com; curl -sSfL https://example.com/health; ping -c3 vpnhost。注意事項與最佳實踐：多地測試；避免本地快取誤判；用健康檢查端點與最小權限帳號測 VPN。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q8, D-Q1, D-Q3

Q7: 如何安全地關機、拔線、移動並重新上電伺服器？
- A簡: 有序停服務與電源，標籤拍照、理線防誤插，通電後依序驗證。
- A詳: 具體實作步驟：1) 通知並 Drain 流量；2) 停 App/Web/DB；3) 正常關機；4) 拍照與標籤線纜；5) 移機與整理散熱；6) 依序回接；7) 上電與服務驗證。關鍵程式碼片段或設定：systemctl stop nginx mariadb；ip addr show 拍照記錄。注意事項與最佳實踐：防靜電；確保電力與UPS；預備備用網線與電源線。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, B-Q10, D-Q6

Q8: 如何通知不同利害關係人（讀者、鄰居、託管用戶、VPN 同學）？
- A簡: 依對象選擇渠道與訊息深度，客製影響與建議，提供狀態更新。
- A詳: 具體實作步驟：1) 讀者：部落格置頂與RSS；2) 託管與DNS：Email/訊息群組直達；3) 鄰居 Wi‑Fi：張貼或訊息；4) VPN 用戶：群組提醒與替代方案。關鍵程式碼片段或設定：無。注意事項與最佳實踐：清楚時窗、影響與備援；提供回報與即時更新連結；使用簡潔標題與時區。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q11, C-Q1, D-Q10

Q9: 如何為 VPN 使用者提供暫時替代方案？
- A簡: 預先配置備用端點、商業 VPN 或遠端桌面跳板，並提供使用指引。
- A詳: 具體實作步驟：1) 架設雲端備援 VPN（WireGuard/OpenVPN）；2) 分發臨時設定與金鑰；3) 提供代理或RDP跳板；4) 設定生效與失效時間。關鍵程式碼片段或設定：wg genkey | tee server.key | wg pubkey > server.pub；發佈 client.conf。注意事項與最佳實踐：限制權限與時間；加密傳遞設定；公告切換時間點。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q3, D-Q3, A-Q7

Q10: 如何建立備援網路與遠端管理通道？
- A簡: 使用行動網路當備援WAN、啟用帶外管理（IPMI/ILO）與遠端電源控制。
- A詳: 具體實作步驟：1) 準備4G/5G路由器作失敗切換；2) 啟用伺服器 IPMI 與安全存取；3) 智能插座或PDU做遠端斷電重啟；4) 測試切換。關鍵程式碼片段或設定：路由器設定雙 WAN failover；IPMI 設定非預設密碼與 ACL。注意事項與最佳實踐：隔離管理網、限制來源IP、演練切換。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q6, D-Q6, D-Q1

### Q&A 類別 D: 問題解決類（10題）

Q1: 停機後網站無法連線怎麼辦？
- A簡: 檢查網路、服務與反代設定，逐層測試並回復到已知穩定版本。
- A詳: 問題症狀描述：瀏覽器逾時或 502/503。可能原因分析：路由器轉發遺失、Nginx/Apache 未啟動、應用或 DB 未起、TLS 憑證路徑錯。解決步驟：1) 檢查外網到內網連通（nmap/port）；2) systemctl status 啟動服務；3) 檢查反代 upstream；4) 查看日誌。預防措施：建立啟動順序、健康檢查、變更前拍快照與回復腳本。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, C-Q6, B-Q7

Q2: DNS 解析異常或仍指向舊位址怎麼辦？
- A簡: 核對區檔、SOA 序號與 TTL，清快取並核查權威回應。
- A詳: 問題症狀描述：dig 查到舊 IP，或部分地區解析失敗。可能原因分析：TTL 未降、SOA 未遞增、權威未 reload、上游快取固著。解決步驟：1) dig @權威核對記錄；2) 檢查 SOA 與 $TTL；3) rndc reload/flush；4) 提醒用戶清本地快取。預防措施：事前降 TTL、變更清單納入序號檢查、以多地探測驗證。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, B-Q5, C-Q5

Q3: VPN 無法連線或頻繁斷線如何排查？
- A簡: 檢查伺服器進程、埠對外可達、憑證時效與路由下發。
- A詳: 問題症狀描述：連線卡在握手或掉線。可能原因分析：服務未啟動、防火牆阻擋、憑證過期、NAT/路由錯。解決步驟：1) systemctl status/openvpn.log；2) 檢查埠對外（netstat/nc）與轉發；3) 憑證有效期；4) 客戶端抓 log。預防措施：監控保活率、到期前提醒、備援端點與健康檢查腳本。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, C-Q9, C-Q6

Q4: 停機後家用 Wi‑Fi/有線無法上網怎麼辦？
- A簡: 先確定 ISP 與路由器狀態，再檢查 DHCP、LAN 連接與 DNS 設定。
- A詳: 問題症狀描述：全網設備離線或僅部分可用。可能原因分析：路由器未啟、WAN 線鬆脫、DHCP 未開、DNS 設定指向內部已關閉的伺服器。解決步驟：1) 重啟路由與光貓；2) 核對線纜；3) 查 DHCP 範圍與租約；4) 臨時改用公用 DNS。預防措施：標籤線纜、拍照記錄、路由設定備份與導入演練。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q6, C-Q7, A-Q4

Q5: 停機時間超過預期如何處置？
- A簡: 立即溝通延長公告、提供進度與替代方案，必要時啟動回復計畫。
- A詳: 問題症狀描述：維護逾時影響擴大。可能原因分析：現場困難、誤插線、不可預期硬體問題。解決步驟：1) 立刻公告延長並說明原因；2) 提供替代連線或狀態頁；3) 設定止損點並回復到原狀；4) 完成後復盤。預防措施：充足緩衝、演練、標籤與照明、清單化操作與同儕檢查。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q2, A-Q15, A-Q18

Q6: 伺服器移動後無法開機怎麼辦？
- A簡: 先查供電與接線，再檢查硬體（RAM/硬碟/線纜）與 BIOS/RAID 狀態。
- A詳: 問題症狀描述：無電、蜂鳴、無顯示或找不到開機裝置。可能原因分析：電源線鬆脫、RAM 位移、SATA/RAID 線鬆、CMOS 設定重置。解決步驟：1) 檢查 UPS/插座；2) 重新插拔 RAM/線纜；3) 進 BIOS 看磁碟；4) 檢查 RAID 狀態。預防措施：搬運前固定配件、標籤線纜、拍照、帶備用線與開機U盤。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q9, B-Q10, C-Q7

Q7: 發現備份缺失或毀損如何應對？
- A簡: 嘗試從其他副本還原，採取邏輯匯出或檔案修復，並立即修補流程。
- A詳: 問題症狀描述：無法解壓、校驗不符或缺檔。可能原因分析：備份腳本錯、磁碟滿、未測試還原。解決步驟：1) 尋找次要副本（雲端/舊快照）；2) 嘗試資料庫邏輯導出；3) 使用 fsck/修復工具；4) 道歉與公告影響。預防措施：3‑2‑1 備份、定期演練還原、監控備份成功率與校驗。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: C-Q2, A-Q15, A-Q18

Q8: 維護後性能變差的原因與處理？
- A簡: 可能散熱不良、資源競爭或錯誤設定，透過監控與回退逐一排查。
- A詳: 問題症狀描述：延遲升高、吞吐下降。可能原因分析：雜物間散熱惡化降頻、線纜品質差、CPU/GPU限速、DB 參數改動、磁碟模式變更。解決步驟：1) 觀察指標（CPU/溫度/IO）; 2) 檢查散熱與線纜; 3) 比對前後設定; 4) 回退調整。預防措施：基線指標、變更比對、散熱評估與壓測。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q8, B-Q10, C-Q7

Q9: 維護後遺漏記錄導致難以追溯怎麼辦？
- A簡: 以日誌與版本追蹤重建時間線，補齊變更紀錄並導入輕量流程。
- A詳: 問題症狀描述：不確定改了什麼。可能原因分析：臨時決策未記錄。解決步驟：1) 蒐集系統日誌、shell 歷史、網路拓撲照片；2) 比對設定版控（git diff）；3) 補寫變更單與時間線。預防措施：要求「邊做邊記」，設定版控，製作變更清單與核對表。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q12, C-Q1, A-Q18

Q10: 停機溝通失誤導致使用者不滿如何挽回？
- A簡: 立即致歉與說明，提供補救與時間表，事後復盤改善機制。
- A詳: 問題症狀描述：未事先知會或資訊不完整。可能原因分析：忽略特定對象、公告要素缺失、更新不及時。解決步驟：1) 針對受影響群發說明信；2) 提供替代與補救（延長服務、備援說明）；3) 設定狀態頁持續更新；4) 復盤改善。預防措施：溝通清單、公告模板、狀態頁與多渠道同步。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, C-Q8, A-Q3

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是停機公告？
    - A-Q2: 什麼是維護時窗？與停機有何差異？
    - A-Q3: 為什麼需要事前公告停機？
    - A-Q4: 本文中誰會受到影響？
    - A-Q5: 這次停機的可能時間為何？
    - A-Q6: 什麼是網站託管與 DNS 託管？有何差異？
    - A-Q7: 什麼是 VPN？為何會受停機影響？
    - A-Q16: 一則良好的停機公告應包含哪些要素？
    - B-Q6: 家用網路服務的典型架構為何？
    - C-Q1: 如何撰寫並發布一則良好的停機公告？
    - C-Q6: 如何測試 DNS、HTTP 與 VPN 的服務狀態？
    - D-Q4: 停機後家用 Wi‑Fi/有線無法上網怎麼辦？
    - D-Q1: 停機後網站無法連線怎麼辦？
    - D-Q10: 停機溝通失誤導致使用者不滿如何挽回？
    - A-Q14: 自宅自建服務的核心價值與風險是什麼？

- 中級者：建議學習哪 20 題
    - B-Q1: DNS 託管如何運作？
    - B-Q2: 網站託管如何運作？
    - B-Q3: VPN 連線如何運作？
    - B-Q4: 計畫性維護的執行流程為何？
    - B-Q5: 降低 TTL 與 DNS 傳播機制如何影響停機？
    - B-Q7: 伺服器啟停順序與相依性如何設計？
    - B-Q8: 監控與日誌如何支援維護？
    - B-Q9: 供電與 UPS 的保護機制如何運作？
    - B-Q10: 線纜與散熱在雜物間的風險機制是什麼？
    - A-Q8: 什麼是機櫃？把伺服器放雜物間有何風險？
    - A-Q9: 為何拔機器很麻煩會導致停機時間拉長？
    - A-Q10: 什麼是影響評估（Impact Assessment）？
    - A-Q11: 什麼是溝通對象優先順序？為何「客戶第一」重要？
    - A-Q12: 什麼是服務可用性與連續性？有何差異？
    - A-Q13: 為什麼要在停機前調整 DNS TTL？
    - C-Q2: 如何備份網站與資料庫以支援回復計畫？
    - C-Q4: 如何在 Nginx 設定維護模式（顯示維護頁）？
    - C-Q5: 如何調整 DNS TTL 並快速恢復？
    - D-Q2: DNS 解析異常或仍指向舊位址怎麼辦？
    - D-Q3: VPN 無法連線或頻繁斷線如何排查？

- 高級者：建議關注哪 15 題
    - B-Q11: 影響度量與使用者分群機制如何設計？
    - B-Q12: 小型自託管環境的最小可行變更管理架構是什麼？
    - C-Q7: 如何安全地關機、拔線、移動並重新上電伺服器？
    - C-Q9: 如何為 VPN 使用者提供暫時替代方案？
    - C-Q10: 如何建立備援網路與遠端管理通道？
    - D-Q5: 停機時間超過預期如何處置？
    - D-Q6: 伺服器移動後無法開機怎麼辦？
    - D-Q7: 發現備份缺失或毀損如何應對？
    - D-Q8: 維護後性能變差的原因與處理？
    - D-Q9: 維護後遺漏記錄導致難以追溯怎麼辦？
    - A-Q15: 什麼是回復計畫（Rollback Plan）？
    - A-Q18: 什麼是復盤（Post-mortem）？為何停機後要做？
    - B-Q4: 計畫性維護的執行流程為何？
    - B-Q8: 監控與日誌如何支援維護？
    - A-Q17: 小規模環境需要 SLA 嗎？可用「最佳努力」替代嗎？