# Canon Digital Camera 記憶卡歸檔工具 - Release Notes

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是 DigitalCameraFiler？
- A簡: 一款以 EXIF 自動歸檔相機記憶卡內容的 .NET 主控台工具。
- A詳: DigitalCameraFiler 是一個為數位相機記憶卡量身打造的歸檔工具。它會掃描指定目錄，支援 JPEG、Canon RAW（.crw）及 Canon MJPEG 影片（.avi），依 EXIF（拍攝時間、機型、光圈、快門等）組合成檔名與路徑，並自動建立目錄。工具為主控台程式，便於批次與自動化整合。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q4, A-Q8

Q2: 為什麼需要記憶卡歸檔工具？
- A簡: 自動化以時間/機型命名與分類，減少手動整理成本與錯誤。
- A詳: 手動整理相片與影片耗時且易錯。歸檔工具可依 EXIF 產生有意義的目錄與檔名（如日期/機型/原檔名），避免重複命名與混亂。搭配批次自動化，可快速將記憶卡內容轉入既定結構，提升長期保存、搜尋與備份效率。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, A-Q8, A-Q16

Q3: 這工具的核心價值是什麼？
- A簡: 以 EXIF 驅動的命名與分類，讓歸檔可控、可重複、標準化。
- A詳: 核心價值在於把拍攝時的真實資訊（時間、相機型號等）轉譯為檔案系統結構。藉由 .NET 格式化字串與 EXIF list 的組合，歸檔規則可讀可維護，支援不同媒體類型差異化處理（轉正、轉檔、EXIF 複製），同時維持自動建立目錄與批次整合能力，形成穩定流程。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, B-Q10, B-Q11

Q4: 支援哪些檔案類型與處理差異？
- A簡: JPEG 轉正；Canon RAW（.crw）以 .thm 取 EXIF 並轉 .jpg；Canon MJPEG（.avi）依 .thm 歸檔。
- A詳: 工具支援三類：1) JPEG：讀 EXIF Orientation，自動轉正後歸檔。2) RAW：支援 Canon .crw，搭配 .thm 取得 EXIF；除歸檔 .crw，並會轉出 .jpg 與複製 .thm 的 EXIF。3) 影片：支援 Canon MJPEG .avi，依對應 .thm 內 EXIF 歸檔。三者共用 EXIF list，pattern 可各自指定。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q9, A-Q10, A-Q11

Q5: 何謂主控台（Console）應用？為何採此形式？
- A簡: 無 GUI 的命令列程式，易與批次與排程整合，自動化友好。
- A詳: 主控台應用以命令列運行，不提供視覺化界面，著重以參數與設定檔驅動。此形式可輕鬆搭配批次檔、排程或其他腳本工具，將「插卡→執行→歸檔」串成固定流程，減少人為干預，提升可靠性與可重現性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, C-Q2, C-Q7

Q6: 什麼是 EXIF？與歸檔有何關係？
- A簡: EXIF 是相片/影片的拍攝中繼資料，用來組構命名與目錄。
- A詳: EXIF（Exchangeable Image File Format）包含拍攝時間、相機型號、光圈、快門、方向等中繼資料。工具以 EXIF 變數組合出檔名與路徑，使歸檔具備語意性（如日期、機型、原檔名），並支援不同格式（JPEG/RAW/VIDEO）共用變數來源，提高一致性與可配置性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, B-Q4, B-Q11

Q7: 為什麼用 EXIF 做檔名與路徑有優勢？
- A簡: 反映拍攝事實、避免亂序與重名，利於搜尋與長期維護。
- A詳: EXIF 源自拍攝當下，比檔案系統時間更可靠。用日期、機型、原檔名（或其他變數）拼組路徑，可跨多張卡、多相機保持一致命名，減少手動更名與重名風險。這讓檔案結構可預期、可追溯、可批次備份與同步，滿足長期資產管理需求。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, A-Q18, B-Q25

Q8: 什麼是 pattern 與 EXIF list？
- A簡: pattern 是 .NET 格式字串；EXIF list 提供索引對應的變數序列。
- A詳: pattern 採 .NET 格式化字串，例如 {0:yyyy-MM-dd}；花括號內數字對應 EXIF list 的序位。EXIF list 是逗號分隔的變數名稱序列（序號自 0 起），命名時由 pattern 引用。這讓「命名規則」與「資料來源」明確分離，便於維護與重用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q10, B-Q11, C-Q3

Q9: JPEG、RAW、VIDEO 的歸檔邏輯有何不同？
- A簡: JPEG 轉正；RAW 依 .thm 取 EXIF 並轉 .jpg；VIDEO 依 .thm 歸檔。
- A詳: JPEG：先判斷 Orientation 自動旋轉，再依 pattern 歸檔。RAW：僅支援 Canon .crw，搭配 .thm 讀 EXIF，歸檔 .crw 並額外產生 .jpg，且將 .thm 的 EXIF 複製至該 .jpg。VIDEO：支援 Canon MJPEG .avi，沒有內嵌 EXIF，改用對應 .thm 的 EXIF 執行歸檔。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q4, A-Q10, A-Q11

Q10: Canon RAW 的 .crw 與 .thm 各扮演什麼角色？
- A簡: .crw 是影像主檔；.thm 提供 EXIF 與縮圖供歸檔與轉檔用。
- A詳: 在 Canon 相機工作流程中，.crw 儲存高動態原始資料，而 .thm（縮圖檔）承載 EXIF 中繼資訊。工具以 .thm 讀取 EXIF 來決定歸檔位置與命名，並在將 .crw 轉出 .jpg 時，把 .thm 的 EXIF 也複製到新 .jpg，確保導出的 JPEG 保留拍攝資訊。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, B-Q6, B-Q8

Q11: Canon MJPEG .avi 的 .thm 有何用途？
- A簡: .avi 無內嵌 EXIF，使用對應 .thm 的 EXIF 作為歸檔依據。
- A詳: Canon 的 MJPEG 影片（.avi）通常缺少內嵌 EXIF，因此相機會伴隨 .thm 檔儲存拍攝時間與其他中繼資料。工具在處理 .avi 時，會尋找同名 .thm 以取得 EXIF，據以決定影片的目的路徑與檔名，確保影片與照片有一致的歸檔結構。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q9, D-Q6

Q12: 何謂「自動建立不存在的目錄」？
- A簡: 依 pattern 產生的路徑若不存在，工具自動建立之。
- A詳: 當 pattern 展開後形成的目的資料夾尚未存在，工具會在寫入檔案前自動建立所需的整條路徑。這使命名策略可自由設計而不需手動預建目錄，降低作業摩擦，亦可避免因目錄缺失而中斷流程的風險。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q13, C-Q3, D-Q8

Q13: 工具的執行環境需求為何？
- A簡: 為 .NET 主控台程式，建議在 Windows/.NET Framework 執行。
- A詳: 本工具以 .NET 為基礎，提供 Windows 環境下的主控台執行體驗。依釋出年代與相依元件，需安裝相容的 .NET Framework 版本方可啟動。由於為命令列工具，亦便於與 Windows 批次、排程或其他命令列工具整合。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q1, D-Q1

Q14: 與一般相片管理軟體相比的差異？
- A簡: 著重後勤歸檔自動化與標準化，非互動瀏覽修圖工具。
- A詳: 一般相片管理軟體著眼瀏覽、編修與資料庫管理；DigitalCameraFiler 聚焦「以 EXIF 為基礎的檔名/路徑自動化」，利於後續備份、搜尋與跨工具使用。它不提供 GUI 與編修，強項在可配置的命名規則與批次作業，適合建立長期可維運的檔案結構。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, A-Q16, C-Q7

Q15: 為何不提供 GUI？
- A簡: 為簡化鏈結與自動化，命令列更適合批次與排程整合。
- A詳: 工具目標是「把歸檔流程程式化」。命令列介面能被批次檔、CI/CD 或排程直接呼叫，且維護成本低、部署簡單。對以自動化為主的工作流，此方式更穩定且可重現。若需 GUI，可另行包裝或搭配其他工具使用。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, A-Q16, C-Q7

Q16: 搭配批次與排程有何優勢？
- A簡: 可將插卡即歸檔流程自動化，降低人工干預與錯誤率。
- A詳: 以批次檔將常用參數與路徑固定，配合排程或事件觸發（如插入記憶卡）即可自動執行歸檔。這減少每次手動輸入與判斷，降低操作誤差，並確保長期維持同一命名規則，讓備份與同步工具可穩定運作。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q7, B-Q17, D-Q10

Q17: 如何查詢可用的 EXIF 變數名稱？
- A簡: 直接執行工具不帶參數，會列出所有可用變數名。
- A詳: 本工具提供「列出 EXIF 變數」的便利功能。於命令列執行可執行檔且不提供任何參數時，工具會輸出支援的變數清單。據此可在 EXIF list 中挑選並排序，再於 pattern 以索引引用，避免拼字錯誤與未知欄位。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q21, C-Q4, D-Q4

Q18: 常見 EXIF 變數（如 DateTime、Model、FileName）代表什麼？
- A簡: DateTime=拍攝時間；Model=相機型號；FileName=原檔檔名。
- A詳: DateTime 用於表示拍攝當時刻，常搭配格式化（如 yyyy-MM-dd）。Model 表示相機型號（如 Canon PowerShot G2），可用於分流多機資料。FileName 是原始檔名（如 IMG_1234.jpg），常用於避免重名。這些變數可依需求組合出兼顧語意與唯一性的結構。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, C-Q5, B-Q11

Q19: pattern 中的索引與格式化如何理解？
- A簡: {索引:格式} 對應 EXIF list 的序位與顯示格式。
- A詳: 在 pattern 內，花括號的數字是 EXIF list 序號（0 起算），冒號後接顯示格式（如 {0:yyyy-MM-dd}）。例如 pattern c:\photos\{0}\{1}-{2} 搭配 EXIF list「DateTime,Model,FileName」，即可按拍攝時間/機型/原檔名產生路徑與檔名。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q10, C-Q3, C-Q5

Q20: 如何避免檔名或目錄命名衝突？
- A簡: 在 pattern 中加入能區辨的變數（如原檔名）以提高唯一性。
- A詳: 為降低重名風險，建議 pattern 同時含日期（精度足）、機型與原檔名等變數。例如「{DateTime:yyyy-MM-dd}\{Model}-{FileName}」。如仍可能重複，可再加入序號或更高精度時間（秒、毫秒）。命名規劃應在導入前先以樣本驗證。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q5, B-Q25, D-Q3

Q21: 什麼是 Orientation 自動轉正？
- A簡: 依 EXIF Orientation 值旋轉 JPEG，使照片方向正確。
- A詳: 相機常以 EXIF Orientation 標註拍攝方向。工具在處理 JPEG 時先讀取該值，必要時執行旋轉，將影像存為正向版本再歸檔。這可避免後續瀏覽時的方向錯誤與手動修正，確保輸出結果一致且省時。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, D-Q7, C-Q2

Q22: RAW 轉 JPEG 的目的與好處是什麼？
- A簡: 產出通用格式供快速瀏覽分享，同時保留 RAW 作為母檔。
- A詳: CRW RAW 檔利於後製，但不便快速預覽或分享。工具在歸檔同時轉出 JPEG，並將 EXIF 從 .thm 複製到該 .jpg，讓快速檢索與瀏覽更容易，同時保留 RAW 作為高品質來源，兼顧效率與品質。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, B-Q7, B-Q8

Q23: 為什麼要把 .thm 的 EXIF 複製到轉出的 JPEG？
- A簡: 讓新 JPEG 保有拍攝中繼資料，維持後續管理一致性。
- A詳: 轉檔後若不保留 EXIF，將喪失時間、機型等重要資訊，影響排序與搜尋。工具將 .thm 的 EXIF 同步到轉出的 JPEG，確保新檔與原始拍攝資訊對齊，維持後續的歸檔、備份與跨工具使用的一致性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, C-Q6, D-Q9

Q24: 為何目前僅明確支援 Canon 格式？是否可擴充？
- A簡: 針對 Canon 實務情境設計；理論上可擴展新增處理器。
- A詳: 工具依 Canon 實際工作流設計（CRW+THM、MJPEG+THM）。其他品牌可能有不同 RAW/影片與中繼資料策略。就架構精神而言，可在原始碼層面新增處理邏輯以支援更多格式；實作需解析相應 EXIF 與流程。後續擴充取決於需求與開發規劃。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q16, B-Q9, D-Q5

Q25: 不帶參數執行工具會發生什麼？
- A簡: 會列出支援的 EXIF 變數名稱供設定參考。
- A詳: 執行工具且不傳入任何參數時，工具會輸出可用 EXIF 變數清單。這有助於確認變數拼字與了解可用欄位，再將其配置於 EXIF list，讓 pattern 以索引引用，避免運行時找不到變數造成命名失敗。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q17, B-Q21, C-Q4

### Q&A 類別 B: 技術原理類

Q1: DigitalCameraFiler 的整體運作流程如何？
- A簡: 掃描來源→判斷類型→讀 EXIF→套用 pattern→建立目錄→輸出。
- A詳: 原理為自上而下流程：1) 掃描指定目錄與子目錄。2) 依副檔名辨識 JPEG/CRW/AVI。3) 讀取 EXIF：JPEG 直接讀；CRW/AVI 由同名 .thm 取。4) 以 EXIF list 與 pattern 格式化出目的路徑與檔名。5) 自動建立路徑。6) 進行必要處理（轉正、轉檔、EXIF 複製），最後寫入指定位置。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q2, B-Q10

Q2: 來源目錄掃描機制為何？
- A簡: 遞迴掃描指定路徑，逐一比對支援類型再處理。
- A詳: 工具以檔案系統 API 遞迴列舉指定目錄樹，取得檔案清單。對每個檔案先以副檔名判別是否支援，再進一步讀取所需中繼資料並執行相應流程。此設計降低不必要解析成本，保持效能與穩定性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, D-Q2, D-Q10

Q3: 檔案類型如何判斷？
- A簡: 以副檔名與已知支援清單（.jpg/.crw/.avi）比對判斷。
- A詳: 初步以副檔名辨識最具成本效益。工具包含支援清單：JPEG（.jpg）、Canon RAW（.crw）、Canon MJPEG（.avi）。匹配成功才進入後續處理，降低對非目標檔案的誤解析與資源浪費。必要時可進一步做內容驗證（概念上可擴展）。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q4, B-Q2, B-Q16

Q4: 讀取 EXIF 的原理是什麼？
- A簡: 由影像或 .thm 中解析標準 EXIF 標籤取得中繼資料。
- A詳: JPEG 多含標準 EXIF，可直接解析；Canon 的 RAW/AVI 則由 .thm 存放 EXIF。工具透過影像中繼資料 API 讀取標籤（如 DateTime、Model、Orientation），並以名稱映射成 EXIF list 可用變數，供 pattern 格式化命名使用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, B-Q6, B-Q9

Q5: JPEG Orientation 自動轉正的流程？
- A簡: 讀 Orientation→計算旋轉角度→旋轉→輸出再歸檔。
- A詳: 流程為：1) 解析 JPEG EXIF 的 Orientation 值。2) 對應旋轉角度（如 90/180/270）。3) 執行像素旋轉與必要的元資料維護。4) 產出正向影像並寫入目的位置。這確保後續瀏覽器或管理工具無需再依 Orientation 呈現，避免相容性差異。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q21, D-Q7, C-Q2

Q6: CRW 與 THM 的 EXIF 取得流程？
- A簡: 配對同名 .thm→解析 EXIF→供歸檔與轉檔流程使用。
- A詳: 對 .crw 檔，工具先尋找相同檔名的 .thm。若存在則解析其 EXIF 取得 DateTime 等欄位，供 pattern 格式化出路徑，並在轉出 .jpg 時複製該 EXIF。若 .thm 缺失，則無法取得必要中繼資料，需補齊方能正確歸檔。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, D-Q6, C-Q6

Q7: CRW 轉 JPG 的技術流程與元件？
- A簡: 讀 CRW→解碼→轉碼為 JPEG→寫出並複製 EXIF。
- A詳: 流程為：1) 以 RAW 讀取元件解碼 .crw。2) 轉換色彩與壓縮為 JPEG。3) 從同名 .thm 複製 EXIF 標籤至新 .jpg。4) 依 pattern 決定輸出位置。此步驟讓 RAW 母檔有一份通用影像用於快速瀏覽與分享，同時保留拍攝資訊。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q22, A-Q23, D-Q9

Q8: THM EXIF 複製到 JPEG 的機制？
- A簡: 讀 .thm 標籤→映射對應→寫入新 .jpg 的 EXIF 欄位。
- A詳: 在轉出 JPEG 後，將 .thm 解析出的 EXIF 名稱與值按對應規則寫入到新 .jpg 元資料區，使其具備拍攝時間、機型等資訊。此步驟確保轉檔不丟失中繼資料，維持後續歸檔與管理一致性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q23, B-Q7, D-Q9

Q9: 影片（.avi）歸檔的技術機制？
- A簡: 以同名 .thm 的 EXIF 為準，格式化出路徑後寫入。
- A詳: 由於 Canon MJPEG .avi 不含 EXIF，工具會尋找同名 .thm 檔，解析其 EXIF（如日期、機型），將這些變數帶入 pattern 格式化出目的路徑與檔名，再將 .avi 寫到該位置。若 .thm 缺失，無法取得必要資訊，流程可能中止或需人工補救。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, D-Q6, C-Q8

Q10: .NET 格式化字串如何用於命名？
- A簡: pattern 使用 {索引:格式}，以 EXIF 值格式化為路徑片段。
- A詳: 透過 string.Format 風格的語法，pattern 中每個 {n:format} 會取 EXIF list 第 n 項，並依 format 格式化。例如 {0:yyyy-MM-dd}\{1}-{2} 會輸出日期資料夾與「機型-原檔名」檔名，讓邏輯清晰、可讀且易維護。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, A-Q19, C-Q5

Q11: EXIF list 與索引映射的運作方式？
- A簡: EXIF list 0 起算；pattern 以數字索引對應該序位的變數。
- A詳: EXIF list 是逗號分隔序列，序號自 0 開始。pattern 的 {0} 對應 list 第一個變數、{1} 對應第二個，以此類推。這種鬆耦合設計讓「變數的選擇與排序」與「命名模板」可分開管理，方便在不同格式間共用變數集。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, C-Q4, D-Q4

Q12: 設定檔（App.config）讀取的流程？
- A簡: 啟動時讀取 DigitalCameraFiler.exe.config 的各節點設定。
- A詳: 工具啟動後會載入同名 .config，讀取 EXIF list 與各媒體類型的 pattern。這些設定決定命名規則與變數來源。變更設定無需重建程式，只要編輯 config 即可調整歸檔行為，符合 DevOps 可配置的精神。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q3, C-Q4, D-Q3

Q13: 自動建立不存在目錄的邏輯？
- A簡: 先解析 pattern→檢查路徑→逐層建立缺失的資料夾。
- A詳: 在決定輸出完整路徑後，工具逐層驗證資料夾是否存在，對不存在的節點呼叫建立目錄 API。建立完成才進行影像旋轉、轉碼與寫入，避免因路徑不存在而寫入失敗，保證流程原子性與穩定性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q12, D-Q8, C-Q3

Q14: 寫入指定位置的策略為何？
- A簡: 依 pattern 決定目的路徑，完成處理後寫入該位置。
- A詳: 工具先完成必要處理（如 JPEG 轉正、CRW 轉 JPEG 與 EXIF 複製），再依 pattern 展開出的目的路徑將檔案寫入。是否「搬移或複製」取決於版本實作與使用情境；建議先測試流程再導入正式資料。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q9, D-Q10, A-Q12

Q15: 錯誤處理的一般原則？
- A簡: 檢查前置條件、回報缺失、不中斷其他檔案的處理。
- A詳: 針對缺失 .thm、格式化失敗、目錄權限等情況，原則上先偵測並回報，再跳過該檔避免整體中斷。建議使用者檢閱輸出訊息，修正設定或補齊檔案後重跑，確保整體流程可恢復與可追蹤。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q3, D-Q6, D-Q8

Q16: 支援格式的擴充思路為何？
- A簡: 以類型處理器分離策略，新增解碼/EXIF 取得/命名流程。
- A詳: 概念上可為新格式新增「類型處理器」，包含：檔案辨識、EXIF 解析方式、必要前置處理（如轉檔）、與命名策略。使 JPEG/RAW/VIDEO 的模式可被複用到其他品牌或新格式，維持架構一致性與可測試性。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q24, B-Q3, B-Q4

Q17: 與排程/批次整合的技術重點？
- A簡: 固化參數與路徑，確保可重入、冪等與錯誤重試。
- A詳: 批次整合關鍵是將來源與目的固定，避免手動輸入。確保每次執行結果一致（冪等），失敗可重跑，不中斷其他檔案。搭配日誌輸出以追蹤結果，並用測試資料夾驗證設定後再導入正式流程。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q16, C-Q7, D-Q10

Q18: 效能考量有哪些？
- A簡: I/O 掃描、EXIF 解析、影像轉正與 RAW 轉碼是主要成本。
- A詳: 大量檔案時瓶頸在磁碟 I/O 與影像處理。建議：減少不必要的路徑深度掃描、先篩選檔案類型、避免網路磁碟、合理規劃 pattern（避免產生過長路徑）、並於測試資料集估計時延，適度平行處理需考量 I/O 爭用與記憶體占用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q10, C-Q9, B-Q2

Q19: 檔名安全與不合法字元如何處理？
- A簡: 命名需符合檔案系統規範，pattern 應避免非法字元。
- A詳: Windows 路徑不允許某些字元（如: * ? < > |）。設計 pattern 時應確保格式化後不含非法字元，並控制總長度避免超過系統限制。若變數值可能含特殊字元，建議先以樣本測試與調整規則，避免寫入失敗。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q8, C-Q5, B-Q25

Q20: 多機型與多張記憶卡混合處理如何保持一致？
- A簡: 在 pattern 中納入機型變數，建立統一結構。
- A詳: 透過 {Model} 等變數將多相機來源分流到一致的根結構下，例如「{DateTime:yyyy-MM-dd}\{Model}-{FileName}」。無論來源是何相機或哪張卡，都會落在可預期的路徑模式，便於批次備份與同步。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q8, A-Q18, C-Q5

Q21: 列出 EXIF 變數的內部機制？
- A簡: 無參數執行時，輸出支援變數的名稱清單。
- A詳: 工具內建列舉支援 EXIF 變數的邏輯，當偵測到未傳參數時，直接將內部映射的變數名稱輸出至主控台，供使用者在 EXIF list 與 pattern 設定時參照，降低設定錯誤率。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q17, C-Q4, D-Q4

Q22: 主控台輸出與回饋的角色？
- A簡: 顯示進度、結果與錯誤訊息，利於診斷與追蹤。
- A詳: 主控台輸出是使用者的主要回饋管道，包括處理中檔案、產出路徑與錯誤說明。建議在導入前先用少量資料觀察輸出，確認 pattern 與 EXIF list 正確，出錯可據此調整設定後再重試。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: D-Q3, D-Q6, C-Q9

Q23: 路徑長度與編碼的考量？
- A簡: 避免過長路徑與特殊字元，確保相容性與穩定性。
- A詳: Windows 路徑長度與編碼相容性有限。pattern 過度冗長或含特殊字元可能導致建立/寫入失敗。建議控制資料夾層級、使用 ASCII 友善字符，必要時先做小樣本實測驗證可行性，以免大批量失敗。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q8, B-Q19, C-Q5

Q24: 檔案完整性與安全性如何保障？
- A簡: 依檔案系統保證與流程穩定性，建議先行備份再操作。
- A詳: 工具聚焦歸檔流程，檔案完整性仰賴檔案系統與正確流程。建議：在正式導入前備份原始卡，先用小規模測試驗證 pattern 與輸出，再批量處理。若需更嚴格驗證，可於流程外加入校驗與備份策略。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q10, D-Q9, D-Q10

Q25: 理想的 pattern 設計原則？
- A簡: 兼顧語意、唯一性與簡潔；先小樣本驗證再上線。
- A詳: 推薦使用日期（含精度）、機型與原檔名，形成具語意且低重名風險的結構。例如「{0:yyyy-MM-dd}\{1}-{2}」搭配「DateTime,Model,FileName」。避免不可用字元與過長路徑，上線前以樣本測試與回滾方案確保安全。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q19, C-Q5, D-Q3

### Q&A 類別 C: 實作應用類

Q1: 如何取得與安裝 DigitalCameraFiler？
- A簡: 從提供的下載連結取得壓縮檔，解壓至任意資料夾即可使用。
- A詳: 步驟：1) 下載安裝包（ChickenHouse.Tools.DigitalCameraFiler.Binary.zip）。2) 解壓縮到非系統資料夾（如 D:\Tools\DCF）。3) 確認同目錄有 DigitalCameraFiler.exe 與 DigitalCameraFiler.exe.config。4) 於命令列切至該資料夾執行。注意：需安裝相容 .NET Framework。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q13, C-Q2, D-Q1

Q2: 如何基本執行並掃描指定目錄？
- A簡: 在命令列執行程式並指定來源目錄路徑，即可開始處理。
- A詳: 步驟：1) 開啟命令列，切到工具目錄。2) 執行如「DigitalCameraFiler.exe D:\DCIM」。3) 觀察主控台輸出，確認轉正/轉檔與輸出路徑。注意：來源需可讀、目的需可寫。最佳實踐：先用少量檔案測試驗證 pattern。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, B-Q2, D-Q2

Q3: 如何在 App.config 為各類型設定 pattern？
- A簡: 在設定檔中分別指定 JPEG/RAW/VIDEO 的 pattern 字串。
- A詳: 於 DigitalCameraFiler.exe.config 設定各類型。例如：
  - <Patterns>
    - <Jpeg>c:\photos\{0:yyyy-MM-dd}\{1}-{2}</Jpeg>
    - <Raw>c:\photos\{0:yyyy-MM-dd}\RAW\{1}-{2}</Raw>
    - <Video>c:\photos\{0:yyyy-MM-dd}\VIDEO\{1}-{2}</Video>
  - </Patterns>
  注意：路徑不存在會自動建立；請避開非法字元與過長路徑。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, B-Q12, B-Q13

Q4: 如何設定共用的 EXIF list 與 pattern 對應？
- A簡: 在 config 先定 EXIF list，再以索引於 pattern 引用各變數。
- A詳: 在設定檔加入：
  - <ExifList>DateTime,Model,FileName</ExifList>
  pattern 以 {0} 對應 DateTime、{1} 對應 Model、{2} 對應 FileName。先執行不帶參數列出可用變數，確認拼字與順序。調整後以小量資料檢驗輸出是否符合預期。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q17, B-Q11, D-Q4

Q5: 如何設計日期/機型/原檔名的命名策略？
- A簡: 採「{0:yyyy-MM-dd}\{1}-{2}」搭配「DateTime,Model,FileName」。
- A詳: 建議設定：
  - ExifList: DateTime,Model,FileName
  - Jpeg Pattern: c:\photos\{0:yyyy-MM-dd}\{1}-{2}
  這會將 IMG_1234.jpg（G2，2006/11/11）歸檔為：
  - c:\photos\2006-11-11\Canon PowerShot G2-IMG_1234.jpg
  優點：清楚、穩定、低重名。注意：控管路徑長度與非法字元。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q19, B-Q10, B-Q25

Q6: 如何為 RAW 產生同步 JPEG 並設定輸出位置？
- A簡: RAW 會轉出 .jpg 並複製 EXIF，可在 Raw/Jpeg pattern 中指定。
- A詳: 設定 Raw pattern 供 .crw，並預期工具會輸出一張同名 .jpg 至相同或子目錄（依 pattern 規劃）。例如：
  - <Raw>c:\photos\{0:yyyy-MM-dd}\RAW\{1}-{2}</Raw>
  並確保 .thm 存在以複製 EXIF。注意：先以測試資料驗證轉檔與 EXIF。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q22, A-Q23, B-Q7

Q7: 如何用批次檔自動化匯入流程？
- A簡: 建立 .bat 固化來源與目的，插卡後一鍵歸檔。
- A詳: 建立 import.bat：
  - @echo off
  - set SRC=E:\DCIM
  - cd /d D:\Tools\DCF
  - DigitalCameraFiler.exe %SRC%
  將 SRC 指向相機卡路徑。可配合排程或事件觸發。注意：先測試少量檔案，並監看主控台輸出確認無誤。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, B-Q17, D-Q10

Q8: 如何處理多相機來源的目錄分流？
- A簡: 在 pattern 中加入 {Model} 以區分不同相機型號。
- A詳: 設計如：
  - c:\photos\{0:yyyy-MM-dd}\{1}\{2}
  搭配 ExifList: DateTime,Model,FileName。不同相機會生成專屬子目錄，方便檢索與管理。注意：部分型號名稱含空白或特殊字元，請先驗證輸出合法性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q20, B-Q19, C-Q5

Q9: 如何驗證 pattern 與 EXIF list 是否正確生效？
- A簡: 以小量樣本測試，觀察主控台輸出與實際路徑結果。
- A詳: 步驟：1) 建立測試資料夾放入少量 JPEG/CRW/AVI。2) 執行工具，觀察輸出之目的路徑與檔名。3) 比對是否符合預期命名。4) 若不符，調整 EXIF list 順序或 pattern 格式。最佳實踐：逐步增加樣本涵蓋不同類型。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q22, D-Q3, D-Q4

Q10: 如何安全回滾或復原歸檔結果？
- A簡: 先備份原卡或複本運行；需回滾時以備份覆蓋還原。
- A詳: 建議流程：1) 將記憶卡內容先完整備份。2) 對備份副本運行工具以驗證設定。3) 確認正確後再對正式路徑執行。若需回滾，直接以備份復原。最佳實踐：版本化目的資料夾或使用時間戳根目錄，便於切換。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q24, D-Q9, D-Q10

### Q&A 類別 D: 問題解決類

Q1: 工具無法啟動或顯示缺少 .NET Framework，怎麼辦？
- A簡: 安裝相容的 .NET Framework，並以管理員權限重試執行。
- A詳: 症狀：點擊無反應或彈出缺少元件訊息。原因：未安裝相容 .NET Framework 或安裝不完整。解法：安裝對應版本 .NET Framework，必要時以系統管理員執行。預防：在新機先驗證執行環境，與工具包同放版本說明。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q13, C-Q1, D-Q2

Q2: 執行時提示找不到來源目錄或存取被拒？
- A簡: 確認來源路徑存在且可讀，使用者具讀權限。
- A詳: 症狀：啟動後立即失敗或跳錯路徑不存在。原因：路徑拼寫錯、裝置未掛載、權限不足。解法：檢查路徑、確認磁碟代號、以管理員權限執行。預防：用批次檔固定路徑，執行前先 dir 驗證來源可達。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q2, B-Q2, D-Q8

Q3: pattern 解析錯誤（格式不正確）如何處理？
- A簡: 檢查花括號與索引、格式字串與 EXIF list 長度。
- A詳: 症狀：執行時丟擲格式化例外或輸出路徑異常。原因：花括號未成對、索引超出 EXIF list、格式子字串不合法。解法：逐一比對 pattern 與 EXIF list，簡化為最小可行例後再擴充。預防：上線前小樣本驗證與程式碼管理設定檔。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q10, B-Q11, C-Q9

Q4: EXIF 變數名稱拼錯或不存在造成失敗怎麼辦？
- A簡: 先用無參數執行列出變數，再修正 EXIF list。
- A詳: 症狀：命名出現空白或錯誤，甚至中止。原因：變數名拼錯、該格式不含該欄位。解法：執行工具不帶參數列出支援變數，修正 EXIF list 並重試。預防：設定時以清單為準，不依記憶拼寫。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q17, B-Q21, C-Q4

Q5: 檔案缺少 EXIF（或不支援品牌）如何應對？
- A簡: 工具依 EXIF 驅動；缺失時需補齊或調整命名策略。
- A詳: 症狀：路徑無法格式化或輸出資訊不足。原因：檔案不含 EXIF、非 Canon 流程不含 .thm。解法：對 Canon 影片/RAW 補齊同名 .thm；或調整 pattern 避免必需變數。預防：導入前檢視樣本檔之 EXIF 與支援清單。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q24, B-Q4, B-Q9

Q6: 缺少 .thm 導致 RAW/AVI 無法歸檔怎麼辦？
- A簡: 補回同名 .thm 或將檔案排除，避免流程中斷。
- A詳: 症狀：.crw 或 .avi 無法取得日期/機型，命名失敗。原因：相機未產生或搬移遺失 .thm。解法：從記憶卡或備份找回同名 .thm；若無法復原，調整 pattern 避開該變數並標記需人工處理。預防：搬移時保持檔案對應關係不被破壞。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, A-Q11, B-Q6

Q7: 照片沒有被自動轉正的可能原因？
- A簡: EXIF Orientation 缺失或異常，或檔案非 JPEG。
- A詳: 症狀：輸出照片仍為側躺/倒置。原因：非 JPEG；EXIF Orientation 缺失/不正確；轉正過程失敗。解法：確認原檔為 JPEG 且含正確 Orientation；用檢視器檢查 EXIF；必要時手動旋轉。預防：上線前選取含不同方向樣本測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q21, B-Q5, C-Q9

Q8: 目錄建立失敗（權限/路徑）該如何排查？
- A簡: 檢查寫入權限、非法字元與路徑長度限制。
- A詳: 症狀：建立目錄或寫入目的地時失敗。原因：目標磁碟無寫權、pattern 產生非法字元、路徑過長。解法：以管理員執行、修改目標路徑、調整 pattern 簡化層級與字元。預防：先以測試輸出驗證可建立目錄。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, B-Q19, B-Q23

Q9: CRW 轉 JPEG 失敗時如何處理？
- A簡: 檢查 .thm 是否存在、檔案是否損毀，重試或改以 RAW 保留。
- A詳: 症狀：有 CRW 無輸出 JPEG。原因：.thm 缺失導致 EXIF 複製失敗、CRW 損毀、轉碼元件失敗。解法：補齊 .thm、以檢視器驗證 CRW 正常、重跑。若仍失敗，可先保留 RAW，後續以其他轉檔工具輔助。預防：流程前備份與樣本測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, B-Q8, C-Q10

Q10: 歸檔效能不佳的常見原因與優化？
- A簡: I/O 與影像處理耗時；可精簡掃描範圍、用本機磁碟。
- A詳: 症狀：處理時間過長。原因：大量小檔 I/O、RAW 轉碼密集、使用網路磁碟。解法：用本機 SSD、限制掃描至 DCIM 目錄、分批處理、先小樣本驗證 pattern。預防：建立固定流程與批次，避免臨時全盤掃描。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q18, C-Q7, C-Q9

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是 DigitalCameraFiler？
    - A-Q2: 為什麼需要記憶卡歸檔工具？
    - A-Q4: 支援哪些檔案類型與處理差異？
    - A-Q5: 何謂主控台（Console）應用？為何採此形式？
    - A-Q6: 什麼是 EXIF？與歸檔有何關係？
    - A-Q8: 什麼是 pattern 與 EXIF list？
    - A-Q12: 何謂「自動建立不存在的目錄」？
    - A-Q17: 如何查詢可用的 EXIF 變數名稱？
    - A-Q18: 常見 EXIF 變數（如 DateTime、Model、FileName）代表什麼？
    - A-Q19: pattern 中的索引與格式化如何理解？
    - C-Q1: 如何取得與安裝 DigitalCameraFiler？
    - C-Q2: 如何基本執行並掃描指定目錄？
    - C-Q5: 如何設計日期/機型/原檔名的命名策略？
    - D-Q2: 執行時提示找不到來源目錄或存取被拒？
    - D-Q3: pattern 解析錯誤（格式不正確）如何處理？

- 中級者：建議學習哪 20 題
    - A-Q9: JPEG、RAW、VIDEO 的歸檔邏輯有何不同？
    - A-Q10: Canon RAW 的 .crw 與 .thm 各扮演什麼角色？
    - A-Q11: Canon MJPEG .avi 的 .thm 有何用途？
    - A-Q21: 什麼是 Orientation 自動轉正？
    - A-Q22: RAW 轉 JPEG 的目的與好處是什麼？
    - A-Q23: 為什麼要把 .thm 的 EXIF 複製到轉出的 JPEG？
    - B-Q1: DigitalCameraFiler 的整體運作流程如何？
    - B-Q4: 讀取 EXIF 的原理是什麼？
    - B-Q5: JPEG Orientation 自動轉正的流程？
    - B-Q6: CRW 與 THM 的 EXIF 取得流程？
    - B-Q7: CRW 轉 JPG 的技術流程與元件？
    - B-Q8: THM EXIF 複製到 JPEG 的機制？
    - B-Q10: .NET 格式化字串如何用於命名？
    - B-Q11: EXIF list 與索引映射的運作方式？
    - B-Q13: 自動建立不存在目錄的邏輯？
    - C-Q3: 如何在 App.config 為各類型設定 pattern？
    - C-Q4: 如何設定共用的 EXIF list 與 pattern 對應？
    - C-Q6: 如何為 RAW 產生同步 JPEG 並設定輸出位置？
    - D-Q6: 缺少 .thm 導致 RAW/AVI 無法歸檔怎麼辦？
    - D-Q7: 照片沒有被自動轉正的可能原因？

- 高級者：建議關注哪 15 題
    - A-Q20: 如何避免檔名或目錄命名衝突？
    - A-Q24: 為何目前僅明確支援 Canon 格式？是否可擴充？
    - B-Q16: 支援格式的擴充思路為何？
    - B-Q17: 與排程/批次整合的技術重點？
    - B-Q18: 效能考量有哪些？
    - B-Q19: 檔名安全與不合法字元如何處理？
    - B-Q23: 路徑長度與編碼的考量？
    - B-Q24: 檔案完整性與安全性如何保障？
    - B-Q25: 理想的 pattern 設計原則？
    - C-Q7: 如何用批次檔自動化匯入流程？
    - C-Q8: 如何處理多相機來源的目錄分流？
    - C-Q9: 如何驗證 pattern 與 EXIF list 是否正確生效？
    - C-Q10: 如何安全回滾或復原歸檔結果？
    - D-Q5: 檔案缺少 EXIF（或不支援品牌）如何應對？
    - D-Q10: 歸檔效能不佳的常見原因與優化？