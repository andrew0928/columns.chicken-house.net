# Network Bridge in Windows 2003：小型網路升級與橋接實戰

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

A-Q1: 什麼是 Windows Server 2003 的 Network Bridge？
- A簡: 內建的二層橋接功能，將多張實體網卡合併為單一邏輯介面，維持同一子網與廣播域，減少設定變更。
- A詳: Network Bridge 是 Windows 2003 提供的軟體層二層交換/橋接機制。它把多張實體乙太網卡綁成一個「Network Bridge」邏輯介面，對系統與應用程式而言只有一張網卡存在。這代表原有 IP、DHCP、NAT、VPN 等設定只需綁定在橋接介面上，底層哪張卡收送封包由橋接決定。對小型環境特別有用，例如同時存在 100Mbps 與 1000Mbps 連線時，透過橋接維持單一子網，免去新增網段與路由調整。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, A-Q14, B-Q1, C-Q1

A-Q2: 橋接（Bridge）與路由/NAT 有何差異？
- A簡: 橋接運作在二層轉發 MAC 幀；路由/NAT 在三層依 IP 轉送並可重寫位址，語義與用途不同。
- A詳: 橋接是 L2 概念，根據 MAC 位址學習並轉發乙太幀，維持單一廣播域，廣播/多播會橫跨橋接口。路由/NAT 是 L3，根據 IP 與路由表決定轉送，NAT 會重寫來源/目的位址並分割廣播域。實務上，橋接讓多介面邏輯上變成同一張卡，減少重配；路由/NAT 用於網段隔離、上網分享與安全邊界。文中做法是 LAN 口橋接，RRAS 提供 NAT 與 VPN。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, B-Q3, C-Q2

A-Q3: 為什麼選擇軟體網路橋而非新增子網？
- A簡: 小規模環境可維持單一子網，免調 DHCP/靜態路由，成本低且最少更動。
- A詳: 新增子網需調整 DHCP 範圍、靜態路由、可能的 DNS 與防火牆規則，與跨子網服務發現等；在家用/小型實驗環境，工作量與風險不成比例。橋接讓 100Mbps 與 1000Mbps 介面邏輯合一，應用與服務無感移轉，RRAS/NAT/VPN 等仍照舊運作。作者最初計畫新建 GBE 子網，但評估複雜度與效益後，改採「最不用大腦」的軟體橋接。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q14, B-Q4, C-Q1

A-Q4: 在小型家庭網路中，橋接的核心價值是什麼？
- A簡: 維持單一子網、零或極少設定變更，同時獲得千兆直連的高吞吐。
- A詳: 小型環境的需求是穩定、簡單與足夠的性能。橋接不改變 IP 架構，將多實體介面合併，節省重新規劃成本。當只有少數節點需要更高頻寬（如伺服器與桌機的 GBE 大檔傳輸）時，橋接提供透明直通的 L2 連通性，同時保留原有 NAT、VPN、DNS、DHCP 等既有配置不變，達到「少動作、大收穫」的目標。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, B-Q1, C-Q4

A-Q5: 什麼是 RRAS 的 Demand-Dial VPN？
- A簡: 需用時自動撥接啟用的 VPN 連線，閒置時斷線，節省資源並自動化連線。
- A詳: 在 Windows 2003 RRAS，Demand-Dial VPN 指的是符合條件（如流量觸發）時才自動建立的 VPN 通道。其優點是無需常時連線，降低維運成本；當內部設備發往特定網段的封包出現時，RRAS 會自動撥號建立隧道連線。文中伺服器同時扮演 NAT 與 VPN Server，也以 Demand-Dial 連到公司 VPN，不受 LAN 桥接影響。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q11, C-Q2, D-Q4

A-Q6: 文中的伺服器扮演哪些網路角色？
- A簡: 同時擔任 NAT、VPN Server（並 Demand-Dial 至公司）、以及 LAN 服務（DNS/DHCP/IIS/檔案分享）。
- A詳: 作者的 Windows 2003 伺服器承擔多重職能：RRAS 提供 NAT 分享上網；作為 VPN 伺服器允許外部撥入家庭網路；並設定 Demand-Dial 自動連入公司 VPN。此外還承載常見內網服務如 DNS、DHCP、IIS、檔案分享。LAN 側兩張 NIC 透過 Network Bridge 合併，讓所有服務只要綁定橋接介面即可。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, C-Q2, D-Q2

A-Q7: 何謂「Network Bridge」邏輯介面？
- A簡: OS 建立的虛擬網卡，承接原本 LAN 介面的 IP 設定，底下掛載多張實體 NIC。
- A詳: 建立橋接後，Windows 會創建一個名為「Network Bridge」的虛擬介面，並將原實體 LAN 介面的 IP/TCP 綁定移轉到該橋接介面。實體介面只負責 L2 收送與 MAC 學習，L3 設定只對橋接介面進行。這讓應用、RRAS、DHCP 等服務以為系統仍只有一張卡，達到設定最小化與維持單一子網的效果。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, C-Q3, D-Q8

A-Q8: 為何網路卡驅動程式品質至關重要？
- A簡: 驅動穩定性決定網路可靠度與效能，差的 driver 容易出現斷線、卡死或吞吐不穩。
- A詳: 網路驅動負責 DMA、封包佇列、中斷與硬體卸載等繁複工作，品管不足會引發封包遺失、連線中斷、緩慢與系統不穩定等問題。作者偏好大廠（如 Intel）卡與驅動，因其測試完善、更新穩定；相較下部分品牌或晶片（文中提及 Marvell）在高流量時可能出現異常，需要停用重啟介面才恢復，影響可用性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q7, D-Q7

A-Q9: Intel 82559 與 Marvell GBE 有何差異（經驗面）？
- A簡: Intel 82559 穩定、驅動成熟；Marvell GBE 在高流量下曾出現無故不通的情況。
- A詳: 文中作者用過多張 Intel PRO/100 系列（82559 晶片），表現穩定、驅動成熟，長時間傳送大檔不會中斷。相較下，某些內建 Marvell GBE 在公司環境高負載運行一兩週後會出現看似正常但實際不通的狀況，需停用/啟用介面恢復。此為特定環境經驗，並非絕對，但凸顯選擇穩定驅動的重要性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, D-Q7

A-Q10: 100Mbps 與 1000Mbps 的實際差異有多大？
- A簡: 實測 100Mbps 約 90% 利用率；GBE 單檔拷貝約 30%（約 3 倍提升），多碟並行可達 60%。
- A詳: 作者實測複製大檔：傳統 100Mbps 網路在良好環境約可跑到 90% 使用率（約 90Mbps）；採用千兆直連後，單檔拷貝約 30% 使用率（約 300Mbps），在同時從不同磁碟並行讀取時更能飆到 60%（約 600Mbps）。顯示瓶頸多半轉移到磁碟 I/O，而非網路極限本身。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q5, B-Q6, C-Q5

A-Q11: 為什麼檔案傳輸常被磁碟 I/O 限制？
- A簡: 單顆磁碟順序吞吐有限，難以餵飽千兆；多磁碟並行可顯著提升總吞吐。
- A詳: 千兆網路理論上可達 1Gbps，但單顆機械碟的順序讀寫常落在 100–200MB/s 以下，且受佇列深度、快取、檔案碎片等因素影響。當以單一檔案、單一磁碟傳輸時，磁碟無法持續提供足夠吞吐，導致網路利用率停留在 30% 附近；改以多檔或跨多磁碟平行讀寫，可以較好地填滿鏈路，將利用率推升至 60% 以上。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, C-Q10, D-Q3

A-Q12: Hub、Switch、Bridge 有何差異？
- A簡: Hub 廣播重送；Switch/Bridge 依 MAC 轉發；Switch 是多埠橋接器，效能、隔離性更佳。
- A詳: Hub 是物理層裝置，將收到的訊號放大並廣播到所有埠；Switch/Bridge 運作於資料連結層，依 MAC 位址學習表轉發，減少碰撞與無謂流量。Windows 的 Network Bridge 本質是軟體橋接，相當於把主機變成兩埠交換器。Switch 支援更多埠與進階功能（如 VLAN、QoS），但概念上仍是橋接器的延伸。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, B-Q8

A-Q13: 什麼是 STP？為何與橋接相關？
- A簡: STP 是避免二層環路的協定；橋接跨多埠時可能產生迴圈，需用 STP 抑制風暴。
- A詳: Spanning Tree Protocol（IEEE 802.1D）用於在二層拓撲存在多條冗餘鏈路時，自動封鎖部分連結以消除環路，避免廣播風暴。Windows Network Bridge 支援 STP 選項，建議在可能形成迴圈的環境啟用，確保穩定性。若僅是兩埠端點對連通常無環路風險，但連到交換器環境時就需留意。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q10, C-Q6, D-Q6

A-Q14: 為什麼橋接後「啥軟體設定都不用改」？
- A簡: 因為對作業系統來說只有一張邏輯介面，原本綁定到 LAN 的設定統一搬到橋接介面。
- A詳: 建立 Network Bridge 後，系統把兩張 LAN 實體卡合併成一張虛擬卡，原本依附於 LAN 的 IP、RRAS、VPN、分享等綁定移轉到「Network Bridge」。因此既有服務不需理解底層變動，仍使用相同子網、相同介面名稱存取網路。這正是小型環境採用軟體橋接的最大價值所在。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, B-Q2, C-Q1

A-Q15: Demand-Dial 與常時 VPN 有何差別？
- A簡: Demand-Dial 依需求自動連線並閒置斷線；常時 VPN 長時間維持連線，延遲低但成本較高。
- A詳: Demand-Dial 適用於偶發或時段性需求，節省頻寬與設備資源；遇到匹配路由時觸發撥接。常時 VPN（如站台到站台）則持續維護隧道，適合需即時或頻繁交換資料的場景。文中採 Demand-Dial 連公司，家庭內部使用時不受影響，需時自動接通。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, B-Q11, D-Q4

A-Q16: 僅兩台主機需要千兆時，橋接為何合適？
- A簡: 無需新子網或交換器，直接對連 GBE 再橋接至既有 LAN，低成本高回報。
- A詳: 當只有伺服器與桌機需要高速傳輸時，購置千兆交換器與重建拓撲並不划算。直接用兩台內建千兆 NIC 對連，並將伺服器的千兆與百兆 LAN 綁為橋接，兩台之間享受 GBE 吞吐，同時對其他裝置維持單一子網通訊，既省錢又不動用既有設定。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q4, B-Q9

A-Q17: 軟體橋接的限制與代價是什麼？
- A簡: 需佔用 CPU、無法提供交換器進階功能，與 ICS 等功能有相容性限制。
- A詳: 軟體橋接由主機 CPU 處理封包轉發，重負載下可能增加 CPU/中斷壓力；不支援交換器級的 VLAN、ACL、硬體 QoS 等。部分功能（如 ICS）與橋接互斥，需改用 RRAS。在多環路環境需搭配 STP 避免風暴。對小型家庭網路，多半仍可滿足需求。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, B-Q8, D-Q1

A-Q18: 橋接對 DHCP 有何影響？
- A簡: DHCP 廣播可跨橋接傳遞，等同單一子網；但也會讓多台 DHCP 同時可見，需控管。
- A詳: 因為橋接維持單一 L2 廣播域，DHCP Discover/Offer 等廣播訊框會跨越橋接傳遞，伺服器與用戶端互見如同同網段。這讓部署更簡單，但若環境存在多台 DHCP（如路由器內建）可能產生競爭，需關閉多餘 DHCP 或以授權/防呆機制管理。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q12, C-Q8, D-Q5

A-Q19: 橋接對 VPN 通道有何影響？
- A簡: 一般不影響，VPN 路由綁定在橋接介面；需確認路由與度量值正確。
- A詳: VPN 連線屬 L3 以上，橋接僅影響 L2。當 IP 與 RRAS 綁定移到 Network Bridge 後，VPN 撥接、路由與封包封裝仍照常處理。需確認介面順序與 Metric，避免選錯出口，並檢查「遠端網路預設閘道」等選項是否符合需求。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q11, C-Q2, D-Q4

A-Q20: 什麼是「直接對連」千兆連線？
- A簡: 兩台裝置以雙絞線直接連接，不經交換器；現代 NIC 多支援 Auto MDI-X，直線即可。
- A詳: 直接對連（direct attach）是用乙太網路線將兩台設備直接相接。千兆乙太網多支援 Auto MDI-X，不需交叉線，Cat5e/6 直通線即可達成 1000Mbps。適合兩台主機間的高吞吐傳輸，搭配伺服器端橋接到既有 LAN，達到成本最低的升級。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q19, C-Q4, D-Q10

### Q&A 類別 B: 技術原理類

B-Q1: Windows 2003 Network Bridge 如何運作？
- A簡: 以 L2 橋接學習 MAC 表轉發幀，將多實體埠虛擬為單一邏輯介面，支援可選 STP。
- A詳: 系統在驅動層建立橋接篩選與虛擬迷你埠，對上呈現單一 NDIS 介面。橋接學習來源 MAC 與對應埠，之後對目的 MAC 做定向轉發；未知或廣播流量會泛洪到所有橋接埠。支援 802.1D STP 避免環路。上層 TCP/IP 只綁定在「Network Bridge」，實體 NIC 不承載 IP，僅負責幀收送。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q1, A-Q13, C-Q1

B-Q2: 建立橋接時系統的執行流程為何？
- A簡: 系統卸下實體 NIC 的 L3 綁定，創建虛擬橋接介面，重綁協定堆疊與服務到該介面。
- A詳: 建立時，Windows 會停用被選 NIC 的 IP/TCP 綁定，創建「Network Bridge」虛擬介面，並把原本 IP、路由、RRAS 等綁定遷移到橋接介面。原 NIC 僅保留 NDIS 下層角色。過程中服務可能短暫中斷，完成後應檢查 RRAS、NAT 與 DHCP 等是否已正確綁定到橋接。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q7, C-Q3, D-Q8

B-Q3: 橋接與 RRAS/NAT 如何協同運作？
- A簡: RRAS 將 LAN 側綁定改為「Network Bridge」，NAT/路由以橋接介面作為內部網路。
- A詳: RRAS 中的 NAT 需標示「內部」介面以承載私網。橋接後，此角色由「Network Bridge」承接，原來的兩張 LAN NIC 不再綁 IP。Demand-Dial 與 VPN 封裝仍由 RRAS 依路由表與介面度量選路。確保 RRAS 的綁定與服務順序更新，避免誤綁到已移除 IP 的實體介面。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q2, A-Q6, C-Q2

B-Q4: 文中網路架構的技術要點是什麼？
- A簡: 以 RRAS 提供 NAT/VPN，LAN 側兩介面橋接，GBE 直連伺服器與桌機，維持單一子網。
- A詳: 家用伺服器負責 NAT、VPN Server 與 Demand-Dial VPN。LAN 側有 100Mbps（對內網）與 1000Mbps（對桌機）的兩張 NIC 綁成橋接。伺服器與桌機之間走千兆直連，對其餘裝置仍在同一子網廣播域中，無需新增子網或調整 DHCP/路由，達成低更動的性能升級。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, A-Q6, C-Q4

B-Q5: Windows 顯示的網路使用率應如何解讀？
- A簡: 百分比是相對鏈路速率；100Mbps 的 90% 約 90Mbps，1Gbps 的 30% 約 300Mbps。
- A詳: 工作管理員的「網路使用率」以連線速率為基準。不同速率下相同百分比代表不同絕對吞吐。文中 100Mbps 連線可達 90%，而改用 GBE 後單檔約 30%（約 300Mbps）；多磁碟並行可達 60%（約 600Mbps）。因此需結合埠速率與檔案/磁碟瓶頸綜合判讀。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q10, A-Q11, C-Q5

B-Q6: 為何單一磁碟難以滿載千兆？
- A簡: 單碟順序吞吐、佇列深度與延遲限制，無法穩定提供 >300Mbps；多工/多碟可改善。
- A詳: 機械碟的盤面尋道與旋轉延遲使得持續吞吐低於千兆理論上限。單工大檔拷貝多落在 100–300Mbps 間。增加佇列深度、多檔/多執行緒、跨不同實體磁碟並行或採用 SSD/RAID，可提升餵數據能力，進而拉高鏈路利用率。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, C-Q10, D-Q3

B-Q7: 驅動卸載功能如何影響穩定性與效能？
- A簡: LSO/Checksum/Segmentation Offload 可降 CPU，但驅動不佳恐致斷線或異常。
- A詳: 現代 NIC 支援多種硬體卸載（如大封包分段、校驗卸載、RSS）。理論上可減少 CPU 與中斷。但若驅動實作瑕疵，重傳、封包重組與流控處理可能出錯，導致傳輸卡住或需重啟介面。遇到穩定性問題可嘗試關閉部分卸載或更新驅動/韌體。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, D-Q7, C-Q7

B-Q8: 橋接與 VLAN 有何不同？
- A簡: 橋接維持單一廣播域；VLAN 以標記分割 L2 廣播域。Windows 橋接不主動處理 VLAN。
- A詳: VLAN 透過 802.1Q 標記在 L2 分割廣播域並需交換器支援。Windows Network Bridge 僅進行 L2 轉發，不進行 VLAN 終結或跨 VLAN 路由。若封包本身有標記，橋接多半透明轉發，但並非 VLAN 控制點。需要 VLAN 隔離時應改由交換器/路由器配置。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q12, A-Q17

B-Q9: 異速鏈路（100 與 1000Mbps）橋接時如何協調？
- A簡: 自動協商各自速率，橋接按目的埠轉發；跨 100 埠時受其速率限制。
- A詳: 每個實體埠獨立自動協商速率與雙工。橋接依 MAC 表選擇轉發埠：伺服器與桌機間走 1Gbps 埠，對其他 100Mbps 裝置則會受百兆限制。這樣在同一子網中可以同時存在不同速率的連線，各取所需。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, C-Q4

B-Q10: Windows Network Bridge 的 STP 機制如何運作？
- A簡: 依 802.1D 選擇根橋與阻塞冗餘埠，避免二層環路；可在屬性中啟用/停用。
- A詳: 啟用 STP 後，系統會參與生成樹計算，為每連線路徑計算成本，封鎖可能造成環路的埠。拓撲變更時會有收斂時間。兩埠端點對連時可選擇停用 STP；連接到交換器或可能形成環路時建議啟用以防風暴。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, C-Q6, D-Q6

B-Q11: Demand-Dial VPN 封包路徑與路由原理是什麼？
- A簡: 路由表命中遠端網段時觸發撥接，VPN 介面建立後成為該網段的下一跳。
- A詳: RRAS 依靜態/動態路由決策，當流量目標屬於 Demand-Dial 設定的遠端網段時觸發建立隧道。成功後，系統為該網段安裝指向 VPN 介面的路由。橋接只影響 LAN 介面綁定，不改變撥接與路由機制。需確保介面度量與首選路徑正確，避免漏走或錯走。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q5, A-Q19, D-Q4

B-Q12: DHCP 封包在橋接中的流動機制？
- A簡: 透過 L2 廣播穿越橋接；伺服器/客戶端視同同網段，無需 Relay。
- A詳: DHCP Discover 為廣播（目的 MAC FF:FF:FF:FF:FF:FF），橋接不過濾廣播，會轉發至所有橋接埠。Offer/Request/ACK 亦可順利往返。因此同一子網可跨橋接發放位址，不需 DHCP Relay。多伺服器並存時需避免競爭與衝突。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q18, C-Q8, D-Q5

B-Q13: 軟體橋接的 CPU 與中斷負載如何形成？
- A簡: 封包在主機內記憶體來回搬移與篩選，流量高時增加 CPU 與中斷使用。
- A詳: 軟體橋接需在 OS 層處理幀過濾/轉發，封包自 NIC 緩衝進入主機記憶體，再由橋接模組決策並送往另一 NIC。高 PPS 或大吞吐時產生更多中斷與 DMA 操作。若主機性能不足或驅動不佳，可能出現延遲上升、CPU 飆高或丟包。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q17, D-Q9

B-Q14: 介面繫結順序與 Metric 為何重要？
- A簡: 影響預設路徑選擇與服務綁定；橋接後應確認綁定在正確介面上。
- A詳: Windows 會依介面 Metric 與路由表決定封包出口。橋接後，正確的綁定對象變為「Network Bridge」。若服務仍綁在舊實體介面，可能導致連線失敗。檢視網路連線進階設定與 RRAS 綁定，確保度量值合理，避免錯誤選路。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q2, D-Q2, D-Q4

B-Q15: 橋接對安全邊界的影響為何？
- A簡: 擴大同一廣播域，L2 攻擊面增加；需以上層策略與隔離控管風險。
- A詳: 橋接將多介面合為同一廣播域，L2 攻擊（ARP 欺騙、廣播風暴）影響範圍擴大。缺乏交換器級 ACL/VLAN 控制時，安全邊界較薄弱。對家用低風險環境影響有限；企業環境應以交換器/路由器做網段隔離與 ACL 管制。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q17, D-Q6

B-Q16: MTU/Jumbo Frame 與橋接相容性如何？
- A簡: 橋接一般透明轉發幀長，兩端 MTU 不一致可能導致碎片或失敗。
- A詳: 橋接不修改幀內容，若一端啟用 Jumbo Frame 而另一端不支援，跨該段傳輸可能失敗。兩端需一致設定，且中間設備（含橋接主機 NIC）皆需支援。建議在同一傳輸路徑內統一 MTU。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: D-Q3, C-Q7

B-Q17: Windows 如何在橋接與本機網路棧間決策？
- A簡: 先由橋接依 MAC 轉發；若目的 MAC 是本機或上層需處理，才交由 TCP/IP 棧。
- A詳: 收到幀後，若目的 MAC 為本機/廣播，橋接會上送至 TCP/IP；否則根據 MAC 表決策轉發至對應埠。此流程確保僅需本機處理的流量進棧，降低不必要負載，同時維持 L2 轉發效率。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q1, B-Q2

B-Q18: 橋接後 IP 設定搬移的原理與注意事項？
- A簡: 系統將 IP 綁定遷移到「Network Bridge」，需重新確認 RRAS/DHCP 綁定對象。
- A詳: 建橋時 OS 自動清除實體 NIC 的 IP/TCP 綁定，並將其套用於新建的橋接介面。管理員應檢查 IP、子網、閘道、DNS 是否正確；RRAS/NAT、DHCP 服務的綁定是否已指向「Network Bridge」。忽略此步驟常導致無法上網或服務中斷。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q3, D-Q2, D-Q8

B-Q19: Auto MDI-X 與纜線對千兆的影響？
- A簡: 大多數 GBE 具 Auto MDI-X，直通線即可對連；需 Cat5e/6 才穩定跑滿千兆。
- A詳: Auto MDI-X 自動判斷纜線雙絞對調，讓直通線也能器對器連接。千兆對線品質敏感，建議使用 Cat5e 以上合格線材與端接。若協商只到 100Mbps，優先檢查線材、端子與 NIC 設定（自動/強制速率）。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q20, D-Q10

B-Q20: 為何選擇大廠 NIC 有經濟性？
- A簡: 驅動成熟降低停機與故障成本，長期總擁有成本（TCO）更低。
- A詳: 網路故障常源自驅動瑕疵與相容性問題。大廠 NIC 擁有更完善的測試與維護週期，穩定性高；雖一次成本略高，但可避免隱性成本（重工、停機、資料中斷）。文中以 Intel 82559 的穩定體驗對比 Marvell 高負載問題，體現 TCO 差異。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q8, A-Q9

### Q&A 類別 C: 實作應用類（10題）

C-Q1: 如何在 Windows 2003 建立 Network Bridge？
- A簡: 於網路連線同時選取兩張 LAN 介面，右鍵「橋接」，完成後在「Network Bridge」設定 IP。
- A詳: 
  - 具體實作步驟:
    - 控制台 > 網路連線，按住 Ctrl 選取兩張 LAN 介面（如 100Mbps 與 1000Mbps）。
    - 右鍵選單點「橋接連線」。稍待系統建立「Network Bridge」。
    - 右鍵「Network Bridge」> 內容 > 設定或確認 IP/DNS。
  - 關鍵設定:
    - 橋接後原 NIC 的 IP 會被移除，改由「Network Bridge」承接。
  - 注意事項:
    - 建議先停用 ICS；建立過程網路會短暫中斷；完成後檢查 RRAS/DHCP 綁定。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, B-Q2, D-Q1

C-Q2: 橋接後如何讓 RRAS/NAT 正常運作？
- A簡: 在 RRAS 管理主控台將 LAN 內部介面改綁「Network Bridge」，確認 NAT 與路由表。
- A詳:
  - 實作步驟:
    - 開啟 RRAS 管理工具，展開「NAT/Basic Firewall」。
    - 檢查「內部介面」是否為「Network Bridge」，若否移除舊介面並加入橋接介面。
    - 檢視靜態路由/Demand-Dial 介面參照的出口是否正確。
  - 關鍵設定:
    - 介面 Metric 與繫結順序。
  - 注意事項:
    - 完成後測試內外網與 VPN 撥接；避免同時啟用 ICS 與 RRAS。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, B-Q14, D-Q2

C-Q3: 如何設定「Network Bridge」為靜態 IP？
- A簡: 使用 GUI 或 netsh 設定靜態 IP/子網/閘道與 DNS 到「Network Bridge」介面。
- A詳:
  - 實作步驟:
    - 右鍵「Network Bridge」> 內容 > TCP/IP（IPv4）> 設定靜態。
    - 或用 netsh:
      - netsh interface ip set address name="Network Bridge" static 192.168.1.2 255.255.255.0 192.168.1.1 1
      - netsh interface ip add dns name="Network Bridge" 192.168.1.1 index=1
  - 關鍵設定:
    - 確認閘道與 DNS 指向正確。
  - 注意事項:
    - 設定前先記錄原 IP；避免與網內其他設備衝突。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q18, D-Q8

C-Q4: 如何將兩台電腦直接以 GBE 對連並保持與內網相通？
- A簡: 用 Cat5e/6 直通線直連 GBE 埠，於伺服器端將 GBE 與 LAN 橋接，維持單一子網。
- A詳:
  - 實作步驟:
    - BIOS 啟用內建 LAN（若預設關閉）。
    - 用 Cat5e/6 直線連伺服器與桌機的 GBE 埠（多數支援 Auto MDI-X）。
    - 在伺服器端將 GBE 與 100Mbps LAN 橋接（見 C-Q1）。
  - 關鍵設定:
    - 驅動自動協商；速度/雙工維持自動。
  - 注意事項:
    - 若協商不達 1Gbps，檢查線材、端子與驅動（見 D-Q10）。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q16, B-Q19, D-Q10

C-Q5: 如何測量傳輸效能並辨識是網路還是磁碟瓶頸？
- A簡: 結合任務管理員、效能監視器與檔案拷貝/iperf 測試，觀察介面與磁碟計數器。
- A詳:
  - 實作步驟:
    - 觀察任務管理員的網路使用率。
    - perfmon 加入「PhysicalDisk\Disk Read/Write Bytes/sec」「Avg. Disk Queue Length」。
    - 使用 iperf 或大檔拷貝測試單/多串流。
  - 關鍵指標:
    - 網卡利用率 vs 磁碟吞吐/佇列。
  - 注意事項:
    - 單檔受磁碟限制大；多檔/多碟可提升（見 A-Q11）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, B-Q5, B-Q6

C-Q6: 如何在 Network Bridge 啟用/停用 STP？
- A簡: 在「Network Bridge」內容中勾選或取消 802.1D Spanning Tree 選項以控管環路風險。
- A詳:
  - 實作步驟:
    - 右鍵「Network Bridge」> 內容 > 勾選「啟用 IEEE 802.1D Spanning Tree」。
  - 關鍵設定:
    - 預設可能啟用或停用，視系統版本與設定。
  - 注意事項:
    - 有形成環路風險時務必啟用；單純兩端對連可考慮停用以縮短收斂。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, B-Q10, D-Q6

C-Q7: 遇到 Marvell NIC 不穩如何調整？
- A簡: 更新驅動/韌體，關閉 LSO/Checksum 等卸載，必要時啟用流控或改用 Intel NIC。
- A詳:
  - 實作步驟:
    - 裝置管理員 > NIC > 進階：停用 Large Send Offload、Checksum Offload、Interrupt Moderation。
    - 驅動/韌體更新到最新。
    - 視情況啟用 Flow Control。
  - 關鍵設定:
    - 保持自動速率/雙工，避免強制不當協商。
  - 注意事項:
    - 若長期高負載仍異常，建議改用更穩定的 NIC（如 Intel）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, B-Q7, D-Q7

C-Q8: 橋接後如何確保 DHCP 正常發放？
- A簡: 確認 DHCP 綁定在「Network Bridge」，避免多台 DHCP 競爭，檢查網段與租約範圍。
- A詳:
  - 實作步驟:
    - 在 DHCP 主控台確認伺服器已綁定至「Network Bridge」。
    - 檢查作用中作用域與範圍。
  - 關鍵設定:
    - 僅保留一台 DHCP；路由器內建 DHCP 請關閉或隔離。
  - 注意事項:
    - 用 ipconfig /renew 驗證；觀察 DHCP 伺服器回應來源是否正確。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q18, B-Q12, D-Q5

C-Q9: 如何安全移除 Network Bridge 並維持連線？
- A簡: 先記錄 IP，刪除橋接後把 IP 還原到欲保留的實體 NIC，再更新 RRAS/DHCP 綁定。
- A詳:
  - 實作步驟:
    - 記錄「Network Bridge」的 IP/DNS 等。
    - 右鍵刪除橋接。
    - 將 IP 設回保留的實體 NIC。
    - 調整 RRAS/NAT、DHCP 綁定與路由。
  - 注意事項:
    - 操作期間可能中斷；建議排程離峰時段並具本機操作權限。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q18, D-Q2

C-Q10: 如何優化大檔拷貝讓千兆利用率達 60% 以上？
- A簡: 多執行緒/多檔案、跨不同實體磁碟並行，調整快取與關閉即時掃描降低干擾。
- A詳:
  - 實作步驟:
    - 同時複製多個檔案或以多個複製程序併行。
    - 源/目的分佈於不同實體磁碟（或 RAID/SSD）。
    - 暫時關閉即時防毒掃描與索引。
  - 關鍵設定:
    - 檢查 SMB 緩衝與 TCP 自動調節（2003 限制較多）。
  - 注意事項:
    - 注意資料一致性；完成後恢復安全軟體。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, B-Q6, D-Q3

### Q&A 類別 D: 問題解決類（10題）

D-Q1: 不能建立 Network Bridge（按鈕灰色/錯誤）怎麼辦？
- A簡: 停用 ICS 並確認 RRAS 不與橋接衝突，僅選擇 LAN 介面重試，更新驅動。
- A詳:
  - 症狀: 建橋選項無法點選或出現錯誤。
  - 可能原因: ICS 啟用、非 LAN 介面（PPPoE/隧道）被選取、驅動不相容。
  - 解決步驟: 關閉 ICS；只選取實體乙太網卡；更新 NIC 驅動；先停用再啟用網卡後重試。
  - 預防: 使用 RRAS 取代 ICS；維持驅動與系統更新。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q17, C-Q1

D-Q2: 橋接後內/外網不通或不穩定怎麼排查？
- A簡: 檢查「Network Bridge」IP、RRAS/NAT 綁定與路由度量，重啟相關服務。
- A詳:
  - 症狀: 無法上網/內網，VPN 也受影響。
  - 可能原因: IP 未正確搬移到橋接、RRAS/NAT 仍綁舊介面、度量錯誤。
  - 解決步驟: 確認橋接 IP 正確（B-Q18）；在 RRAS 將內部介面改綁橋接（C-Q2）；重新啟動 RRAS。
  - 預防: 建橋前記錄設定；建橋後逐項驗證。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q14, C-Q2, B-Q18

D-Q3: 千兆效能不佳的常見原因與對策？
- A簡: 線材/協商、磁碟 I/O、CPU/卸載設定，都可能限速；逐一驗證並優化。
- A詳:
  - 症狀: GBE 僅數十到數百 Mbps。
  - 可能原因: 線材不良、僅協商到 100、單一磁碟瓶頸、驅動問題。
  - 解決步驟: 檢查速率/雙工；換 Cat5e/6 與端頭；測 iperf 排除磁碟；多檔/多碟並行；更新驅動/關閉 LSO。
  - 預防: 合格線材與穩定 NIC；定期驅動更新與健康檢查。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, A-Q11, C-Q5

D-Q4: Demand-Dial VPN 在橋接後無法自動撥接怎麼辦？
- A簡: 檢查路由表與介面度量，確保觸發網段路由指向正確，RRAS 綁定在橋接介面。
- A詳:
  - 症狀: 存取遠端網段不再觸發撥接或路由錯誤。
  - 可能原因: RRAS 綁定未更新、介面度量導致選錯出口。
  - 解決步驟: 將 RRAS 綁定改為「Network Bridge」；調整介面 Metric；檢視靜態路由與 Demand-Dial 目標。
  - 預防: 建橋後必做 RRAS 健檢；文件化路由規則。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q5, B-Q11, C-Q2

D-Q5: 橋接後 DHCP 無法發放位址怎麼辦？
- A簡: 確認 DHCP 綁定橋接介面且無多台伺服器競爭，檢查授權與範圍。
- A詳:
  - 症狀: 客戶端卡在「取得 IP」或拿到 169.254.x.x。
  - 可能原因: DHCP 綁定錯誤、服務未啟動、路由器 DHCP 衝突。
  - 解決步驟: 於 DHCP 主控台改綁「Network Bridge」；關停其他 DHCP；重啟 DHCP 服務；ipconfig /renew 測試。
  - 預防: 單一 DHCP 原則；變更拓撲後立即驗證。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q18, C-Q8, B-Q12

D-Q6: 橋接造成廣播風暴或交換器當機如何處理？
- A簡: 啟用橋接 STP、檢查是否有環路，必要時拔除冗餘鏈路或改走交換器。
- A詳:
  - 症狀: 網路劇烈抖動、延遲飆升、交換器 CPU 100%。
  - 可能原因: 二層環路、STP 關閉、裝置錯誤反饋。
  - 解決步驟: 在 Network Bridge 啟用 802.1D STP；清查並移除環路；必要時重新設計拓撲。
  - 預防: 有環路風險場景一律啟用 STP；避免隨意並聯。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q13, B-Q10, C-Q6

D-Q7: Marvell NIC 長時間高流量後斷線怎麼辦？
- A簡: 更新驅動、關閉卸載功能與省電，必要時更換 Intel NIC。
- A詳:
  - 症狀: 看似連線正常但實際不通，停用/啟用後恢復。
  - 可能原因: 驅動缺陷、卸載實作不穩、電源管理干擾。
  - 解決步驟: 更新驅動/韌體；關閉 LSO/Checksum；停用省電；啟用流控；持續不穩則更換 NIC。
  - 預防: 優先選擇穩定品牌；壓力測試後再上線。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, B-Q7, C-Q7

D-Q8: 建立橋接後 IP 設定「消失」如何處置？
- A簡: 這是正常現象；把原 IP 重新設定到「Network Bridge」介面即可。
- A詳:
  - 症狀: 實體 NIC 不再顯示 IP，連線中斷。
  - 可能原因: 系統將 IP 綁定自動移轉到橋接介面。
  - 解決步驟: 打開「Network Bridge」內容設定 IP/DNS；確認 RRAS/DHCP 綁定也改為橋接介面。
  - 預防: 建橋前備份 IP 設定；按計畫切換。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q2, B-Q18, C-Q3

D-Q9: 橋接造成主機 CPU 偏高怎麼辦？
- A簡: 減少不必要橋接流量、關閉多餘廣播來源、優化驅動或改用硬體交換。
- A詳:
  - 症狀: 大流量時 CPU 飆高、系統卡頓。
  - 可能原因: 軟體橋接費 CPU；廣播/多播過多；驅動非最佳。
  - 解決步驟: 刪減橋接埠或流量；調整應用廣播；更新驅動；必要時改用交換器承擔 L2 轉發。
  - 預防: 橋接只用於必要場景；定期審視流量模型。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, A-Q17

D-Q10: 直接 GBE 對連卻只協商到 100Mbps 如何修復？
- A簡: 換用 Cat5e/6，檢查端子與 NIC 設定，更新驅動，必要時強制 1Gbps/全雙工測試。
- A詳:
  - 症狀: 連線速率顯示 100Mbps。
  - 可能原因: 線材不合格或接觸不良、驅動/韌體舊、速率設定異常。
  - 解決步驟: 更換 Cat5e/6 線；重壓水晶頭；驅動更新；在裝置進階設定檢查速率/雙工（先用自動，壞線材才需強制）。
  - 預防: 使用合格線材與端接；上線前實測。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q19, C-Q4

### 學習路徑索引

- 初學者：建議先學習哪 15 題
  - A-Q1: 什麼是 Windows Server 2003 的 Network Bridge？
  - A-Q2: 橋接（Bridge）與路由/NAT 有何差異？
  - A-Q3: 為什麼選擇軟體網路橋而非新增子網？
  - A-Q4: 在小型家庭網路中，橋接的核心價值是什麼？
  - A-Q6: 文中的伺服器扮演哪些網路角色？
  - A-Q10: 100Mbps 與 1000Mbps 的實際差異有多大？
  - A-Q12: Hub、Switch、Bridge 有何差異？
  - A-Q14: 為什麼橋接後「啥軟體設定都不用改」？
  - A-Q16: 僅兩台主機需要千兆時，橋接為何合適？
  - A-Q20: 什麼是「直接對連」千兆連線？
  - B-Q4: 文中網路架構的技術要點是什麼？
  - B-Q5: Windows 顯示的網路使用率應如何解讀？
  - C-Q1: 如何在 Windows 2003 建立 Network Bridge？
  - C-Q4: 如何將兩台電腦直接以 GBE 對連並保持與內網相通？
  - D-Q8: 建立橋接後 IP 設定「消失」如何處置？

- 中級者：建議學習哪 20 題
  - A-Q5: 什麼是 RRAS 的 Demand-Dial VPN？
  - A-Q7: 何謂「Network Bridge」邏輯介面？
  - A-Q8: 為何網路卡驅動程式品質至關重要？
  - A-Q11: 為什麼檔案傳輸常被磁碟 I/O 限制？
  - A-Q13: 什麼是 STP？為何與橋接相關？
  - A-Q17: 軟體橋接的限制與代價是什麼？
  - A-Q18: 橋接對 DHCP 有何影響？
  - A-Q19: 橋接對 VPN 通道有何影響？
  - B-Q1: Windows 2003 Network Bridge 如何運作？
  - B-Q2: 建立橋接時系統的執行流程為何？
  - B-Q3: 橋接與 RRAS/NAT 如何協同運作？
  - B-Q6: 為何單一磁碟難以滿載千兆？
  - B-Q7: 驅動卸載功能如何影響穩定性與效能？
  - B-Q9: 異速鏈路橋接時如何協調？
  - B-Q10: Windows Network Bridge 的 STP 機制如何運作？
  - B-Q14: 介面繫結順序與 Metric 為何重要？
  - B-Q18: 橋接後 IP 設定搬移的原理與注意事項？
  - C-Q2: 橋接後如何讓 RRAS/NAT 正常運作？
  - C-Q5: 如何測量傳輸效能並辨識瓶頸？
  - D-Q3: 千兆效能不佳的常見原因與對策？

- 高級者：建議關注哪 15 題
  - B-Q11: Demand-Dial VPN 封包路徑與路由原理是什麼？
  - B-Q12: DHCP 封包在橋接中的流動機制？
  - B-Q13: 軟體橋接的 CPU 與中斷負載如何形成？
  - B-Q15: 橋接對安全邊界的影響為何？
  - B-Q16: MTU/Jumbo Frame 與橋接相容性如何？
  - B-Q17: Windows 如何在橋接與本機網路棧間決策？
  - B-Q20: 為何選擇大廠 NIC 有經濟性？
  - C-Q6: 如何在 Network Bridge 啟用/停用 STP？
  - C-Q7: 遇到 Marvell NIC 不穩如何調整？
  - C-Q10: 如何優化大檔拷貝讓千兆利用率達 60% 以上？
  - D-Q1: 不能建立 Network Bridge（按鈕灰色/錯誤）怎麼辦？
  - D-Q2: 橋接後內/外網不通或不穩定怎麼排查？
  - D-Q4: Demand-Dial VPN 在橋接後無法自動撥接怎麼辦？
  - D-Q6: 橋接造成廣播風暴或交換器當機如何處理？
  - D-Q7: Marvell NIC 長時間高流量後斷線怎麼辦？