# Network Bridge in Windows 2003…

## 摘要提示
- Intel 82559：作者偏好大廠網卡，認為 Intel 82559 driver 穩定、效能佳。  
- 100 Mbps 瓶頸：家中網路維持 100 Mbps 已難滿足大量 ISO 檔案傳輸需求。  
- Marvell GBE：桌機與伺服器主機板內建 Marvell Gigabit 網卡，被解除「封印」投入使用。  
- 架構考量：原有 NAT、RRAS、VPN 等複雜設定，若多加一個子網段會牽動 DHCP 與路由。  
- 軟體橋接：Windows 2003 內建 network bridge，將 100 Mbps 與 1 Gbps 兩張網卡邏輯整合。  
- 成效評估：單檔傳輸約 30% GBE 使用率，磁碟 I/O 成為新瓶頸，並可同時飆到 60%。  
- 省設備成本：僅利用現有線材與內建網卡，無須新增交換器即可升級點對點 GBE。  
- 驅動疑慮：Marvell 晶片在高流量環境曾出現網路掛掉的經驗，家用環境仍抱持觀望。  
- 系統穩定：軟體橋接後，原有各項服務（DHCP、VPN、共享）設定皆不用修改。  
- 心得：以最省事方式達成三倍以上傳輸速度，反映硬體選型與軟體功能搭配的重要性。

## 全文重點
作者趁過年整理家中網路與硬碟，原先全網以 Intel 82559 100 Mbps 網卡為骨幹，原因是大廠驅動穩定，使用多年從未出現傳檔中斷。然隨著伺服器常需將大型 ISO 檔拉到桌機燒錄，100 Mbps 時常得等待十多分鐘，造成明顯效率痛點。家中只有桌機與伺服器主機板內建 Marvell Gigabit 乙太網，但先前公司環境對 Marvell 穩定性印象不佳，因此一直被「封印」。為提升速度，又不想添購 Gigabit 交換器及重新拉線，作者決定將兩台 Gigabit 埠直接對接，並在 Windows 2003 Server 內以「Software Network Bridge」把 100 Mbps 與 1 Gbps 介面邏輯合併。如此可保留既有 NAT、RRAS、VPN、DNS、DHCP 等配置，免去調整路由與位址池的麻煩。實測傳輸單一檔案時，Gigabit 連線可跑到約 30% 使用率（約 300 Mbps），較舊環境快逾三倍；若從不同硬碟同時複製，頻寬可達六成，顯示瓶頸已轉向磁碟 I/O。雖對 Marvell 長期穩定性仍有疑慮，但在家用較低流量情境下，作者認為此折衷方案能以最低成本、最少變動獲得明顯效能提升。

## 段落重點
### 迷信大廠的 100 Mbps 時代
作者自述偏好大廠硬體，先前一次購入多張 Intel 82559 系列網卡，替換家中所有桌機，即便主機板內建網卡亦停用。因 Intel driver 成熟，在日常大檔傳輸中從未遇到網路意外斷線，經由平價 Hub 傳輸也可穩定跑到 80–90 Mbps。  

### 100 → 1000 Mbps 的需求浮現
隨著經常需要從伺服器抓 ISO 檔到桌機燒錄，100 Mbps 帶來漫長等待（複製、燒錄、驗證各十多分鐘）。家中僅兩台電腦具備內建 Marvell Gigabit，但一直因穩定性顧慮而未啟用。作者終於決定「解封」兩埠並直接以雙絞線對接，省去購買 Gigabit Switch 的開銷。

### 網路架構與設定難題
原先伺服器已配置 NAT、RRAS demand-dial 至公司 VPN，同時也是家中 VPN Server；此外還負責 DNS、DHCP、IIS、檔案分享等服務。若單純新增一個 Gigabit 子網段，需修改 DHCP 範圍與靜態路由，架構複雜度與維護成本皆增加，因而被否決。

### 軟體 Bridge 的簡易解決方案
作者選擇 Windows 2003 內建的 Network Bridge，將 100 Mbps 與 1 Gbps 介面合併為單一邏輯介面，不必更動任何服務設定或路由表。實測檔案複製時可跑到 30% Gigabit 頻寬；若同時從不同硬碟讀取，可達 60%，顯示新瓶頸在磁碟 I/O 而非網路。  

### Marvell 穩定性與後續觀察
作者曾在公司虛擬化伺服器遇到 Marvell 網卡高流量後失效，需手動 Disable/Enable 才恢復，最終以加裝 Intel 網卡解決。雖此疑慮仍在，但家用流量相對較低，作者決定先觀察，並以此低成本、高效益的折衷方案滿足 Gigabit 傳輸需求。