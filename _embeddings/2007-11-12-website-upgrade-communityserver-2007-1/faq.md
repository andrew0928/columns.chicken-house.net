# 網站升級: CommunityServer 2007.1

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是 Community Server 2007.1（3.1）？
- A簡: Community Server 2007.1（3.1）為 CS 小版本更新，強化快取、SQL、郵件、編輯器與權杖安全。
- A詳: 定義：Community Server 2007.1（即 3.1）是 3.0 之後的改版，聚焦效能、穩定與開發體驗。特點：更新快取框架與 SQL 最佳化、郵件作業與背景執行、TinyMCE 包裝器與 UI 調整、應用程式權杖與暫時性權杖、WLW/RSD 支援、MetaBlog/read-more 改良。應用場景：論壇、部落格、相簿等社群站台的升級與維運，提升併發、郵件可靠性與編輯體驗。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, B-Q1, B-Q2

Q2: CS 2007.1 與 CS 2007（3.0）有何差異？
- A簡: 3.1 在快取、SQL、郵件、編輯器、標籤、權杖與相容性方面大幅補強並修正多項缺陷。
- A詳: 定義：3.1 是 3.0 的增強版。特點：新增鎖定快取與 SQL 最佳化；郵件作業僅取可發量、群發改背景執行並尊重使用者偏好；TinyMCE 包裝器更新、內容樣式與可調整大小；TagCloud 可隱藏「無標籤」訊息；權杖新增暫時性、可停用例外記錄；加入 RSD/WLWManifest、MetaBlog 摘錄與 read-more；大量錯誤修正（登入導向、搜尋、佈景錯誤等）。場景：升級既有 CS 站台，以獲得效能、穩定與作者工具改善。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, B-Q3, B-Q12

Q3: 什麼是 Chameleon？
- A簡: Chameleon 為 CS 前端模板與控制系統，支援表單、API 與排序分頁。
- A詳: 定義：Chameleon 是 CS 的前端 UI 與控制項框架。特點：以可組合的控制項實現頁面，支援 CreateEditWeblogPostForm、DeleteWeblogPostForm 等前台發文/刪文表單，並透過 API 支援 LinkCategory/Link 的排序與分頁。應用場景：自訂主題、前台編輯與管理功能，快速擴充部落格與連結管理介面。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q9, C-Q5

Q4: 什麼是應用程式權杖與暫時性使用者權杖？
- A簡: 應用程式權杖供 API 呼叫；暫時性權杖具 3 小時有效期，常用於變更密碼。
- A詳: 定義：Application Tokens 是應用之間或自動化任務授權使用的憑證；TemporaryUserTokens 是短期有效的使用者憑證。特點：3.1 可切換啟用/停用權杖；新增 TemporaryUserTokens（預設 3 小時到期），變更密碼流程改以暫時性權杖強化安全；CSContext.User 僅在允許時才以 TokenUser 覆寫。場景：整合外部工具、行動端或批次任務安全存取 API，並降低敏感操作的風險。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, B-Q14, C-Q10

Q5: 為什麼要更新快取框架並加入鎖定？
- A簡: 為強化多執行緒環境一致性，降低競爭條件，提升全站效能與穩定。
- A詳: 定義：快取框架管理跨應用資料的暫存。特點：3.1 對全域集合加入鎖定（locking）與快取鍵修正，避免競態；搭配背景任務處理例外記錄、查詢最佳化，整體吞吐更佳。場景：高併發論壇/部落格環境，減少重複查詢與渲染，縮短回應時間並穩定內容顯示。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, B-Q15

Q6: 什麼是 TinyMCE 包裝器（wrapper）更新？
- A簡: 升級包裝器與樣式，改善預設字級與間距，並支援更佳的水平縮放與路徑處理。
- A詳: 定義：TinyMCE wrapper 是整合編輯器的中介層。特點：更新樣式（預設更大字、合理間距）、最新包裝器、彈窗（Modal）中自動設定 document_base_url；內容編輯器可水平調整大小。場景：提升貼文編輯體驗、避免相對路徑錯誤、讓後台/前台編輯更穩定。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q16, C-Q8

Q7: TagCloud 控制項本次有哪些變更？
- A簡: 可關閉「無標籤」與「無相關標籤」訊息，多數主題預設不再顯示空集合訊息。
- A詳: 定義：TagCloud 顯示熱門標籤的雲圖。特點：3.1 可停用空集合提示，使 UI 更簡潔；搭配主題調整，一般頁面不再渲染「無標籤」。場景：部落格側欄或標籤導覽頁，降低視覺雜訊，專注已存在的標籤導覽。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q7, C-Q7

Q8: 為何強化郵件通知、群發與使用者偏好尊重？
- A簡: 降低逾時與垃圾信風險，並依法合規尊重用戶電郵與可聯絡偏好。
- A詳: 定義：郵件子系統涵蓋通知、追蹤、群發。特點：郵件工作只抓本次要寄出的數量避免逾時；群發改背景執行；通知尊重「Enable Email」與「Allow Site to contact me」設定；回覆追蹤與信件範本優化。場景：高量通知站台、會員營運郵件，降低系統負擔並守隱私與偏好。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q3, C-Q6

Q9: 什麼是 Windows Live Writer 支援的改進？
- A簡: 新增自訂標籤關鍵字、移除易混淆摘錄，並支援 RSD/WLWManifest 自動設定。
- A詳: 定義：WLW 是桌面離線寫作工具。特點：3.1 實作關鍵字對應自訂標籤；移除摘錄以避免文字模式混淆；加入 rsd.ashx 與 wlwmanifest.ashx 支援，便於客戶端自動發現設定。場景：作者用 WLW 發文、標籤維護更順暢，設定更即時。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q11, B-Q12, C-Q4

Q10: 什麼是 MetaBlog 支援及其「read-more」與摘錄？
- A簡: MetaBlog 現支援摘錄、read-more 與文章名，並預設連到使用者當前部落格。
- A詳: 定義：MetaWeblog/MetaBlog API 供外部工具發佈貼文。特點：支援 excerpt、read-more 標記與 post name；截斷採 read-more 連結；預設目標為用戶的當前部落格，並可自動發現 API 路徑。場景：第三方工具發文、摘要顯示與 SEO 友善網址管理。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, C-Q5

Q11: 什麼是 RSD 與 WLWManifest？為何重要？
- A簡: RSD 與 WLWManifest 讓寫作工具自動發現 API 與能力，簡化帳號設定。
- A詳: 定義：RSD（Really Simple Discovery）描述服務端點；WLWManifest 描述 WLW 能力。特點：3.1 提供 rsd.ashx 與 wlwmanifest.ashx；客戶端可自動偵測 API、驗證支援的功能。場景：WLW、其他博客客戶端一鍵設定，減少手動配置錯誤。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q9, B-Q12, C-Q4

Q12: 什麼是 KeepAlive 控制？為何移出 global.js？
- A簡: KeepAlive 控制統一管理保活請求，取代散落腳本並由編輯器強制輸出。
- A詳: 定義：KeepAlive 用來防止工作階段逾時。特點：3.1 將保活從 global.js 移入伺服器控制項；編輯器控制一律輸出 KeepAlive；刪除 web/utility/keepalive.aspx。場景：編輯長文、後台操作，避免因逾時導致內容遺失，提高一致性與維護性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, C-Q8

Q13: 什麼是 SearchBarrel？本次變更有何影響？
- A簡: SearchBarrel 為索引/搜尋模組，索引忽略權限，但查詢需 Read 權限。
- A詳: 定義：SearchBarrel 生成索引與提供查詢。特點：索引時設定 IgnorePermissions=true，確保全站內容被索引；查詢時要求具備 Read 權限，維持存取控制。場景：加速搜尋、避免漏索引，且不破壞權限模型。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q18, D-Q3

Q14: 為何 CSContext.User 僅在允許時才覆寫為 TokenUser？
- A簡: 為避免權杖濫用，僅在允許 Token 請求時才以 TokenUser 覆寫使用者。
- A詳: 定義：CSContext.User 是目前要求的身分資訊。特點：3.1 只有當 AllowTokenRequests 指定允許時才使用 TokenUser 覆寫，否則保持原用戶；並支援需要私有權杖的要求。場景：API 呼叫或自動化工具使用權杖時，避免未經允許的權杖帶來權限外洩。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q14

Q15: 什麼是 WrappedRepeater 的廣告插入選項？
- A簡: 新增 AlternatingSeperator，可從第二項起每隔一項插入廣告內容。
- A詳: 定義：WrappedRepeater 是可包裝項目與插入額外內容的清單控制。特點：3.1 新增 AdPlacementOptions=AlternatingSeperator，實現「每隔一項插入一則廣告」樣式。場景：文章列表、相簿縮圖流，穿插贊助或內部宣傳，提高曝光且不干擾閱讀節奏。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q11, C-Q9


### Q&A 類別 B: 技術原理類

Q1: 更新後的快取框架如何運作與鎖定機制是什麼？
- A簡: 以鎖定保護全域集合與快取鍵，避免競態，同步背景任務與例外處理。
- A詳: 技術原理：於應用層集合與快取鍵加入鎖（locking），降低多執行緒競爭與不一致。關鍵步驟或流程：1) 存取全域集合前取得鎖；2) 以一致的快取鍵格式寫入；3) 以背景工作清理與記錄例外。核心組件：快取框架、背景快取工作、例外記錄管線。此設計在高併發下維持資料一致並縮短查詢延遲。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q5, B-Q15

Q2: 群發郵件改為背景執行的流程為何？
- A簡: 將群發工作交由背景執行緒處理，前端快速回應並回報進度。
- A詳: 技術原理：非同步背景執行降低請求阻塞。關鍵步驟或流程：1) 觸發群發任務時，排入工作佇列；2) 背景執行緒批次提取郵件（尊重使用者設定）；3) 寫入送達與錯誤結果；4) 前台查詢狀態。核心組件：郵件工作佇列、背景執行緒、設定檢核（Enable Email/Allow Site）。此作法避免逾時並提升可擴展性。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q8, B-Q3, C-Q6

Q3: 郵件工作如何僅提取本次可寄送數量避免逾時？
- A簡: 依發送上限從佇列只取需寄出的筆數，減少大隊列造成逾時。
- A詳: 技術原理：控制提取批量以匹配處理能力。關鍵步驟或流程：1) 計算本回合可寄上限；2) 從佇列讀取同等數量信件；3) 寄送與回寫狀態；4) 重複批次。核心組件：郵件佇列、郵件工作、上限計算。此策略避免一次取出過多導致連線逾時或資源耗盡。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q8, B-Q2

Q4: 例外處理記錄可停用且在背景快取任務中進行的機制？
- A簡: 允許停用例外記錄，啟用時由背景快取任務寫入，降低請求延遲。
- A詳: 技術原理：將同步 I/O 記錄改為背景處理。關鍵步驟或流程：1) 控制台關閉或開啟例外記錄；2) 啟用時，例外先入佇列；3) 背景任務批次寫入；4) 失敗重試。核心組件：例外佇列、背景快取任務、控制台切換。預設停用，有助降低高流量站台寫入負擔。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q10, A-Q12

Q5: 暫時性使用者權杖如何運作？變更密碼流程如何強化？
- A簡: 產生限時（約 3 小時）權杖，僅用於敏感流程，如變更密碼，過期即失效。
- A詳: 技術原理：短期有效憑證降低洩漏風險。關鍵步驟或流程：1) 使用者啟動敏感操作；2) 系統發 TemporaryUserToken；3) 驗證與執行；4) 到期自動失效。核心組件：Token 發行/驗證、AllowTokenRequests 控制、CSContext.User 處理。此法避免長期權杖被濫用，強化身分安全。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q14

Q6: KeepAlive 控制如何取代 keepalive.aspx 並由 Editor 自動載入？
- A簡: 以伺服器控制項定時發心跳請求，所有編輯器頁面自動嵌入避免逾時。
- A詳: 技術原理：伺服器控制項輸出 JS/XHR 定時 ping。關鍵步驟或流程：1) Editor 控制永遠渲染 KeepAlive；2) 控制項在前端定時呼叫保活端點；3) 移除舊 keepalive.aspx 與散落腳本。核心組件：KeepAlive 控制、Editor 控制、全站腳本。讓保活一致可控，減少遺漏。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q12, C-Q8

Q7: TagCloud 控制如何隱藏「無標籤」訊息並影響主題？
- A簡: 透過控制項設定停用空集合訊息，並在主題中預設不渲染相關訊息。
- A詳: 技術原理：控制項屬性切換訊息渲染。關鍵步驟或流程：1) 設定停用「no tags」「no related tags」；2) 主題版面更新以預設不顯示；3) 渲染時僅在有資料時輸出。核心組件：TagCloud 控制、主題模板。能精簡 UI，避免空白區塊占位。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q7, C-Q7

Q8: SqlProviders 如何解決 LINQ SortOrder 命名空間歧義？
- A簡: 透過明確命名空間或別名消歧義，避免與 LINQ 的 SortOrder 衝突。
- A詳: 技術原理：在提供者程式碼中使用完整限定名稱或改名，解除與 System.Linq 等型別重名。關鍵步驟或流程：1) 檢視衝突型別來源；2) 更新命名空間參考；3) 重新編譯測試。核心組件：SqlProviders、LINQ 名稱解析。此改動提升相容性，避免運行期錯誤。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q2

Q9: 連結分類與連結物件的排序分頁如何透過 API 與 Chameleon 實現？
- A簡: API 提供排序/分頁參數，Chameleon 控制讀取並渲染，提升可瀏覽性。
- A詳: 技術原理：資料層支援 OrderBy/PageIndex/PageSize，UI 綁定呈現。關鍵步驟或流程：1) API 查詢加入排序分頁；2) Chameleon 綁定資料來源；3) 控制項顯示頁碼與排序結果。核心組件：LinkCategory/Link API、Chameleon 綁定控制。用於長清單導航與 SEO 友善呈現。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q3, C-Q5

Q10: ObjectDataBase 的 TruncationEllipsisTemplate 如何自訂省略符號標記？
- A簡: 允許以自訂標記/控制項取代「…」，打造一致的更多連結樣式。
- A詳: 技術原理：提供模板插槽替換截斷尾端標記。關鍵步驟或流程：1) 指定 TruncationEllipsisTemplate；2) 模板內可放連結或控制項；3) 截斷時渲染模板。核心組件：ObjectDataBase 控制、模板系統。用於統一 read-more 樣式或加入追蹤碼。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q10, B-Q13

Q11: WrappedRepeater 的 AlternatingSeperator 如何每隔一項插入廣告？
- A簡: 以 AdPlacementOptions 設定 AlternatingSeperator，從第二項起每隔一項插入。
- A詳: 技術原理：内部渲染迴圈判定索引奇偶，於間隔位置插入模板。關鍵步驟或流程：1) 設定 AdPlacementOptions=AlternatingSeperator；2) 定義廣告模板；3) 渲染時自動插入。核心組件：WrappedRepeater、模板系統。可穿插贊助內容或 CTA 元件。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q15, C-Q9

Q12: rsd.ashx 與 wlwmanifest.ashx 如何與 WLW 整合？
- A簡: 兩端點提供服務描述與功能清單，WLW 依此自動設定帳號與能力。
- A詳: 技術原理：WLW 讀取站台根目錄宣告的 RSD 與 Manifest，取得發佈 API 與功能。關鍵步驟或流程：1) 在頁面提供 RSD/WLWManifest 連結；2) 用戶端抓取 rsd.ashx/wlwmanifest.ashx；3) 自動填入 API 與支援能力。核心組件：RSD、WLWManifest、MetaBlog API。減少手動設定錯誤。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q9, A-Q11, C-Q4

Q13: 部落格截斷如何以 read-more 連結呈現並配合 MetaBlog？
- A簡: 內容截斷改以 read-more 連結，MetaBlog 支援 excerpt/read-more 與 post name。
- A詳: 技術原理：渲染時將摘要與全文分離，以連結跳轉。關鍵步驟或流程：1) 作者在內容標記 read-more；2) 封面列表顯示摘要與連結；3) 詳文頁呈現全文；4) 透過 MetaBlog API 傳遞 excerpt 與 post name。核心組件：MetaBlog、渲染模板、截斷控制。改善可讀性與 SEO。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q10, C-Q5

Q14: CSContext.User 覆寫與 AllowTokenRequests 的協作機制？
- A簡: 只有在明確允許 Token 請求時，才以 TokenUser 覆寫使用者，保護存取。
- A詳: 技術原理：在要求管線中檢查 AllowTokenRequests(requirePrivateToken) 開關。關鍵步驟或流程：1) API 入口設定是否允許權杖；2) 若允許則以 TokenUser 取代 CSContext.User；3) 視需求強制私有權杖。核心組件：CSContext、TokenUser、權杖驗證。避免未授權權杖誤用。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q5

Q15: ThreadQueryBuilder 的 SQL 優化如何運作？
- A簡: 僅在必要時連接 cs_threads，並加上 ApplicationType 篩選，減少不必要負載。
- A詳: 技術原理：查詢建構器根據需求決定 join 與過濾。關鍵步驟或流程：1) 檢查是否需要 thread 欄位；2) 僅在必要 join cs_threads；3) 套用 ApplicationType 條件；4) 回傳最小資料集。核心組件：ThreadQueryBuilder、SQL Provider。降低 I/O 與 CPU，提升清單頁效能。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: B-Q1, D-Q2

Q16: 更新 TinyMCE wrapper 與 Modal 中 document_base_url 如何避免路徑問題？
- A簡: 在彈窗開啟編輯器時設定 document_base_url 為父視窗 URL，避免相對路徑錯誤。
- A詳: 技術原理：TinyMCE 以 document_base_url 解決相對資源路徑。關鍵步驟或流程：1) Modal 開啟時將父 URL 指給編輯器設定；2) 渲染內容與資源參考以此為基準；3) 搭配可水平縮放改善體驗。核心組件：TinyMCE wrapper、Glow.Modal。解決圖片/連結在彈窗中的錯位問題。
- 難度: 初級
- 學習階段: 核心
- 關聯概念: A-Q6, D-Q9

Q17: Telligent.Registration.dll 與 MailGateway.Common.dll 更新的影響？
- A簡: 修正服務啟動順序與郵件 XML 清理/提取量，避免卡住與逾時。
- A詳: 技術原理：改善外掛啟動依賴與郵件佇列處理。關鍵步驟或流程：1) Registration 防止在 SQL 未就緒時外掛卡住；2) MailGateway 僅下載需寄數量並修正 XML 清理。核心組件：Telligent.Registration、MailGateway.Common。提升啟動穩定性與郵件吞吐。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q3

Q18: 為何 SearchBarrel 要求 Read 權限、索引時可忽略權限？
- A簡: 索引期需完整內容以提升搜尋；查詢期仍需授權，兼顧覆蓋率與安全。
- A詳: 技術原理：分離「可被索引」與「可被讀取」。關鍵步驟或流程：1) 索引器以 IgnorePermissions=true 建立全文索引；2) 查詢層檢查 Read 權限；3) 避免未授權洩漏內容。核心組件：SearchBarrel、權限檢查。達到搜尋完整且安全的平衡。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q13, D-Q3


### Q&A 類別 C: 實作應用類（10題）

Q1: 如何從 CS 2007（3.0）升級到 2007.1（3.1）？
- A簡: 下載 3.1 正式版、套用升級腳本於舊 DB、掛站並搬移 storage 與主題。
- A詳: 
  - 具體實作步驟：1) 備份站台與 DB；2) 下載 2007.1 正式版；3) 在舊 DB 套用官方 upgrade script；4) 部署新站點指向升級後 DB；5) 將 ~/blogs、~/photos、~/forums 等 storage 目錄搬移；6) 重新套用或合併自訂主題。 
  - 關鍵程式碼片段或設定：連線字串更新、IIS 站點掛載；無需變更 schema 以外設定。 
  - 注意事項與最佳實踐：先在測試環境演練；主題差異採用比對合併；升級後重建索引與清快取。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q2, D-Q2

Q2: 如何安全搬移 blogs/photos/forums 等 storage 目錄？
- A簡: 停站維護、複製對應資料夾、確保權限與路徑一致後再開站。
- A詳: 
  - 具體實作步驟：1) 宣告維護時段；2) 停止應用程式池；3) 複製 ~/blogs、~/photos、~/forums 等資料夾；4) 檢查檔案 ACL 與網站帳號存取；5) 啟動站點並驗證。 
  - 關鍵程式碼片段或設定：檔案系統權限（IIS AppPool 身分）、web.config 路徑設定需對應。 
  - 注意事項與最佳實踐：保留原始備份；大檔用 robocopy/校驗；驗證縮圖與附件實體存在。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q1, D-Q3

Q3: 自訂主題如何在 2007.1 重新套用？
- A簡: 以新主題為底合併差異，避免覆蓋造成不相容；逐頁測試。
- A詳: 
  - 具體實作步驟：1) 比對舊主題與 3.1 新主題結構；2) 以新主題為基底合併樣式與模板；3) 驗證 TinyMCE、TagCloud、麵包屑等元件渲染；4) 迭代修正。 
  - 關鍵程式碼片段或設定：樣式表與控制項標記差異合併；保留 3.1 新增控制項。 
  - 注意事項與最佳實踐：避免整包覆蓋；建立設計規範；分環境測試再佈署。
- 難度: 中級
- 學習階段: 進階
- 關聯概念: A-Q6, A-Q7

Q4: 如何啟用 RSD 與 WLWManifest 以支援 WLW？
- A簡: 確認 rsd.ashx、wlwmanifest.ashx 存在，於頁面宣告連結後用 WLW 測試。
- A詳: 
  - 具體實作步驟：1) 部署 3.1 內建 rsd.ashx、wlwmanifest.ashx；2) 在版面 head 區加入連結；3) 以 WLW 新增帳號自動偵測。 
  - 關鍵程式碼片段或設定：<link rel="EditURI" type="application/rsd+xml" href="/rsd.ashx">；<link rel="wlwmanifest" href="/wlwmanifest.ashx">。 
  - 注意事項與最佳實踐：確認公開可存取；HTTPS 站點注意混合內容；驗證 MetaBlog 發文。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q12, A-Q11

Q5: 如何在前台用 Chameleon 實作貼文新增/編輯/刪除？
- A簡: 使用 CreateEditWeblogPostForm、DeleteWeblogPostForm 控制，綁定目前部落格。
- A詳: 
  - 具體實作步驟：1) 於主題頁嵌入表單控制；2) 設定使用者當前部落格；3) 測試新增、編輯、刪除流程。 
  - 關鍵程式碼片段或設定：置入對應 Chameleon 表單控制（例如 CreateEditWeblogPostForm）；MetaBlog 預設會對應使用者當前部落格。 
  - 注意事項與最佳實踐：檢查權限；開啟「Enable Email」以收到回覆追蹤；搭配 read-more。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q3, A-Q10

Q6: 如何設定郵件通知與群發，並尊重使用者偏好？
- A簡: 控制台開啟通知/群發，郵件作業設定批次，遵循 Enable Email 與 Allow Site。
- A詳: 
  - 具體實作步驟：1) 控制台設定通知與群發策略；2) 確認郵件佇列與工作運作；3) 使用者偏好預設/匯入；4) 實測群發背景執行。 
  - 關鍵程式碼片段或設定：郵件佇列大小/批次；模板移除背景灰色；啟用 thread tracking。 
  - 注意事項與最佳實踐：尊重退訂；監控佇列避免積壓；分批寄送降低黑名單風險。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, B-Q3

Q7: 如何調整 TagCloud 讓空集合不顯示訊息？
- A簡: 在控制項停用「no tags」「no related tags」訊息，主題更新預設不渲染。
- A詳: 
  - 具體實作步驟：1) 編輯主題中的 TagCloud 設定，停用空集合提示；2) 部署主題更新；3) 驗證側欄渲染。 
  - 關鍵程式碼片段或設定：於 TagCloud 控制項關閉相關訊息輸出屬性。 
  - 注意事項與最佳實踐：保留管理頁仍可見統計；避免造成導覽死路，必要時提供指引。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q7, B-Q7

Q8: 如何套用新版 TinyMCE 包裝器與樣式？
- A簡: 升級至 3.1 預設 wrapper，調整內容樣式與 Modal 相對路徑設定。
- A詳: 
  - 具體實作步驟：1) 佈署 3.1；2) 主題 CSS 調整預設字級與間距；3) 測試 Modal 編輯器；4) 驗證水平縮放。 
  - 關鍵程式碼片段或設定：確保 document_base_url 由父視窗 URL 帶入；內容區塊 CSS 增加 line-height。 
  - 注意事項與最佳實踐：測試各瀏覽器；避免覆蓋新版 wrapper；保留可及時還原。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q16, D-Q9

Q9: 如何在列表中每隔一項插入廣告？
- A簡: 使用 WrappedRepeater 並將 AdPlacementOptions 設為 AlternatingSeperator。
- A詳: 
  - 具體實作步驟：1) 以 WrappedRepeater 綁定資料；2) 設定 AdPlacementOptions=AlternatingSeperator；3) 定義廣告模板；4) 測試渲染。 
  - 關鍵程式碼片段或設定：<cs:WrappedRepeater AdPlacementOptions="AlternatingSeperator" ... />。 
  - 注意事項與最佳實踐：避免過度插播；廣告與內容風格一致；量測 CTR 與停留時間。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q15, B-Q11

Q10: 如何停用例外記錄並確保背景任務處理？
- A簡: 於控制台停用例外記錄，保留背景快取任務寫入與監控告警。
- A詳: 
  - 具體實作步驟：1) 控制台關閉 Exception Logging；2) 開啟背景任務監控；3) 驗證例外佇列與寫入狀態。 
  - 關鍵程式碼片段或設定：記錄層級/開關；告警通知設定。 
  - 注意事項與最佳實踐：高峰期關閉同步寫入；定期抽查；大案前暫時開啟以便排錯。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q4, D-Q5


### Q&A 類別 D: 問題解決類（10題）

Q1: 匿名訪客瀏覽根目錄論壇被重導至登入，怎麼辦？
- A簡: 3.1 已修正，升級並檢查論壇權限設定即可解決。
- A詳: 
  - 問題症狀描述：未登入使用者進入論壇根目錄即被導向登入。 
  - 可能原因分析：舊版導覽/權限邏輯判斷錯誤。 
  - 解決步驟：1) 升級至 2007.1；2) 檢查論壇節點 Read 權限；3) 清快取重啟。 
  - 預防措施：升版前驗證權限矩陣；上線前以匿名腳色全站巡檢。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2

Q2: 回文發佈後未立刻顯示在串內，如何修復？
- A簡: 3.1 改善父貼文快取失效，升級並重建快取與索引。
- A詳: 
  - 問題症狀描述：回覆成功但頁面看不到新回覆。 
  - 可能原因分析：父貼文快取未正確到期。 
  - 解決步驟：1) 升至 2007.1；2) 清除應用快取；3) 刷新頁面或重建索引。 
  - 預防措施：避免自訂快取鍵；升級後做壓力測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, B-Q15

Q3: 相簿搜尋結果連到圖片檔而非圖庫頁？
- A簡: 3.1 修正導向，升級並重建 SearchBarrel 索引。
- A詳: 
  - 問題症狀描述：搜尋結果直連圖片檔，體驗不佳。 
  - 可能原因分析：搜尋產生器連結建構錯誤。 
  - 解決步驟：1) 升級 3.1；2) 重建索引；3) 驗證權限與連結。 
  - 預防措施：升版前備份索引；驗證搜尋樣本清單。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q13, B-Q18

Q4: 會員管理員無法變更使用者密碼？
- A簡: 3.1 修正權限問題，升級後可正常變更密碼。
- A詳: 
  - 問題症狀描述：Member Administrators 嘗試改密碼失敗。 
  - 可能原因分析：舊版角色權限驗證錯誤。 
  - 解決步驟：1) 升級 3.1；2) 驗證角色權限；3) 以暫時性權杖流程測試。 
  - 預防措施：建立管理員操作手冊；例行回歸測試關鍵權限。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q5

Q5: 發生無限重新導向（URL 含不合法字元），如何處理？
- A簡: 3.1 已修正；升級並檢查清理規則與連結生成。
- A詳: 
  - 問題症狀描述：訪問特定 URL 不斷重導。 
  - 可能原因分析：URL 重寫遇不合法字元處理不當。 
  - 解決步驟：1) 升級 3.1；2) 檢視 URL 生成與清理；3) 清快取重啟。 
  - 預防措施：對外連結做驗證；在編輯器端過濾。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q16

Q6: 貼文包含『]』被當成重複貼文？
- A簡: 3.1 修正重複檢查，升級即可避免誤判。
- A詳: 
  - 問題症狀描述：內容含 ] 時被判定為重複貼文。 
  - 可能原因分析：重複檢查字元處理錯誤。 
  - 解決步驟：1) 升級 3.1；2) 清除應用快取；3) 重試發文。 
  - 預防措施：升版後壓測文案；避免手動改檢查邏輯。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2

Q7: EXIF 頁面未顯示完整標籤？
- A簡: 3.1 修正；升級並清快取即可還原完整清單。
- A詳: 
  - 問題症狀描述：EXIF 顯示不全。 
  - 可能原因分析：渲染或查詢截斷。 
  - 解決步驟：1) 升級 3.1；2) 清快取/重建縮圖；3) 驗證樣本。 
  - 預防措施：升版後全面巡檢圖庫；保留回報渠道。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: D-Q3

Q8: 停用表情符號後仍顯示選單？
- A簡: 3.1 隱藏表情選單；升級並確認選項生效。
- A詳: 
  - 問題症狀描述：已停用表情但 UI 仍顯示。 
  - 可能原因分析：UI 控制忽略設定。 
  - 解決步驟：1) 升級 3.1；2) 清快取；3) 驗證論壇選項。 
  - 預防措施：定期 UI 回歸；避免硬改主題繞過設定。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2

Q9: Modal 編輯器插入圖片/連結路徑錯誤？
- A簡: 3.1 在 Modal 設定 document_base_url，升級後問題排除。
- A詳: 
  - 問題症狀描述：彈窗編輯器插入相對連結失效。 
  - 可能原因分析：缺少基底 URL 導致相對路徑解析錯誤。 
  - 解決步驟：1) 升級 3.1；2) 清瀏覽器快取；3) 驗證 Modal 插入資源。 
  - 預防措施：保持 wrapper 為最新版；避免覆寫其初始化。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q16, C-Q8

Q10: 無法刪除或改名匿名使用者？
- A簡: 3.1 明確禁止，屬預期行為；改以角色與權限控制。
- A詳: 
  - 問題症狀描述：嘗試刪除/改名 anonymous 失敗。 
  - 可能原因分析：匿名使用者為系統保留帳號，防止資料孤兒。 
  - 解決步驟：接受預期行為；以權限設定限制匿名行為。 
  - 預防措施：文件標註保留帳號；避免腳本操作系統帳號。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2


### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是 Community Server 2007.1（3.1）？
    - A-Q2: CS 2007.1 與 CS 2007（3.0）有何差異？
    - A-Q3: 什麼是 Chameleon？
    - A-Q6: 什麼是 TinyMCE 包裝器（wrapper）更新？
    - A-Q7: TagCloud 控制項本次有哪些變更？
    - A-Q8: 為何強化郵件通知、群發與使用者偏好尊重？
    - A-Q9: 什麼是 Windows Live Writer 支援的改進？
    - A-Q11: 什麼是 RSD 與 WLWManifest？為何重要？
    - A-Q15: 什麼是 WrappedRepeater 的廣告插入選項？
    - B-Q3: 郵件工作如何僅提取本次可寄送數量避免逾時？
    - B-Q12: rsd.ashx 與 wlwmanifest.ashx 如何與 WLW 整合？
    - C-Q1: 如何從 CS 2007（3.0）升級到 2007.1（3.1）？
    - C-Q4: 如何啟用 RSD 與 WLWManifest 以支援 WLW？
    - D-Q1: 匿名訪客瀏覽根目錄論壇被重導至登入，怎麼辦？
    - D-Q9: Modal 編輯器插入圖片/連結路徑錯誤？

- 中級者：建議學習哪 20 題
    - A-Q4: 什麼是應用程式權杖與暫時性使用者權杖？
    - A-Q5: 為什麼要更新快取框架並加入鎖定？
    - A-Q10: 什麼是 MetaBlog 支援及其「read-more」與摘錄？
    - A-Q12: 什麼是 KeepAlive 控制？為何移出 global.js？
    - A-Q13: 什麼是 SearchBarrel？本次變更有何影響？
    - A-Q14: 為何 CSContext.User 僅在允許時才覆寫為 TokenUser？
    - B-Q1: 更新後的快取框架如何運作與鎖定機制是什麼？
    - B-Q2: 群發郵件改為背景執行的流程為何？
    - B-Q4: 例外處理記錄可停用且在背景快取任務中進行的機制？
    - B-Q5: 暫時性使用者權杖如何運作？變更密碼流程如何強化？
    - B-Q9: 連結分類與連結物件的排序分頁如何透過 API 與 Chameleon 實現？
    - B-Q10: ObjectDataBase 的 TruncationEllipsisTemplate 如何自訂省略符號標記？
    - B-Q11: WrappedRepeater 的 AlternatingSeperator 如何每隔一項插入廣告？
    - B-Q13: 部落格截斷如何以 read-more 連結呈現並配合 MetaBlog？
    - B-Q18: 為何 SearchBarrel 要求 Read 權限、索引時可忽略權限？
    - C-Q2: 如何安全搬移 blogs/photos/forums 等 storage 目錄？
    - C-Q5: 如何在前台用 Chameleon 實作貼文新增/編輯/刪除？
    - C-Q6: 如何設定郵件通知與群發，並尊重使用者偏好？
    - D-Q2: 回文發佈後未立刻顯示在串內，如何修復？
    - D-Q3: 相簿搜尋結果連到圖片檔而非圖庫頁？

- 高級者：建議關注哪 15 題
    - B-Q8: SqlProviders 如何解決 LINQ SortOrder 命名空間歧義？
    - B-Q14: CSContext.User 覆寫與 AllowTokenRequests 的協作機制？
    - B-Q15: ThreadQueryBuilder 的 SQL 優化如何運作？
    - B-Q16: 更新 TinyMCE wrapper 與 Modal 中 document_base_url 如何避免路徑問題？
    - B-Q17: Telligent.Registration.dll 與 MailGateway.Common.dll 更新的影響？
    - C-Q3: 自訂主題如何在 2007.1 重新套用？
    - C-Q8: 如何套用新版 TinyMCE 包裝器與樣式？
    - C-Q9: 如何在列表中每隔一項插入廣告？
    - C-Q10: 如何停用例外記錄並確保背景任務處理？
    - D-Q4: 會員管理員無法變更使用者密碼？
    - D-Q5: 發生無限重新導向（URL 含不合法字元），如何處理？
    - D-Q6: 貼文包含『]』被當成重複貼文？
    - D-Q7: EXIF 頁面未顯示完整標籤？
    - D-Q8: 停用表情符號後仍顯示選單？
    - D-Q10: 無法刪除或改名匿名使用者？