# ChickenHouse.Web.CommunityServiceExtension 新增功能

## 摘要提示
- Photo Gallery: 作者選用 Community Server 的主因是內建相簿功能完善。
- 下載痛點: 使用者常要求一次抓取整本相簿，而系統原生不支援。
- 手動壓縮: 作者過去必須自行打包 zip 檔，重複作業十分耗時。
- 功能擴充: 開發新 Extension，於每個相簿右上角新增「Download Zip」連結。
- 一鍵打包: 點選後即可取得包含該相簿所有圖檔的 zip 檔。
- 介面無縫: 新連結與原有 UI 完整整合，使用者體驗不被打斷。
- 維運省力: 系統自動產生 zip，站長不再手動處理檔案。
- 分享便利: 朋友可快速離線保存照片，提高內容分享效率。
- 節省頻寬: 集中下載減少多次 HTTP 請求，伺服器效能更佳。
- 彈性擴充: 此做法示範了 Community Server 可透過 Extension 快速加值。

## 全文重點
作者長期使用 Community Server，主要看中它「Photo Gallery」模組。雖然瀏覽體驗良好，卻缺少「整本相簿一次下載」功能，導致朋友每回想離線保存照片時，作者都得額外把整個資料夾手動壓成 zip，再上傳到網站供人下載。重複作業久而久之變得相當惱人，也浪費維運時間與頻寬。

為解決此痛點，作者撰寫了「ChickenHouse.Web.CommunityServiceExtension」擴充元件。安裝後，系統會在每個相簿右上方自動產生一個「Download Zip」超連結，使用者只要按一下，就能直接取得含有該相簿所有圖片檔案的 zip 壓縮檔。此功能完全嵌入既有版型，不需額外操作或學習成本。

實作上，Extension 會呼叫伺服器端程式，動態將相簿目錄打包並以串流方式回傳，避免事先佔用磁碟空間，同時可利用快取機制提升多次下載效能。結果不僅大幅減少人工作業，亦因集中下載降低了 HTTP 連線數，提升了伺服器與使用者端的整體體驗。

## 段落重點
### 使用 Community Server 的理由與痛點
作者選擇 Community Server 的首要原因是其 Photo Gallery 功能足夠且 UI 友善，但朋友常提出「想一次下載整本相簿」的需求。由於原生版本沒有相關按鈕，每逢有人索取照片就得先將檔案集合到本機、手動壓縮成 zip，再上傳至伺服器並通知對方連結。此重複流程既麻煩又易出錯，成為維運的主要痛點，也暴露出既有系統在大量檔案分享上的缺口。

### 開發並整合 Zip 下載功能
為徹底排除上述困擾，作者自行撰寫 Community Server Extension「ChickenHouse.Web.CommunityServiceExtension」。安裝後，相簿頁面右上角會自動出現「Download Zip」按鈕；點擊時，伺服器端即時將相簿中的所有圖檔串流壓縮並回傳，讓使用者一鍵取得完整壓縮檔。此方法省去手動打包、重新上傳的程序，同時透過即時壓縮與快取降低伺服器負載，也為日後進一步擴充 Community Server 提供實用示範。