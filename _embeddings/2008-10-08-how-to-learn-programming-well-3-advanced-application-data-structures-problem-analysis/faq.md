# 該如何學好「寫程式」#3．進階應用 ─ 資料結構 + 問題分析

# 問答集 (FAQ, frequently asked questions and answers)

## Q: 要如何撰寫程式，讓使用者輸入台灣高速公路的起終點交流道，就能找出最經濟的行車路線？
可以把高速公路網建模為一張圖 (Graph)。  
1. 以 Node 物件代表交流道／收費站，紀錄名稱、過路費及連出的路段。  
2. 以 Link 物件代表路段，紀錄兩端節點、距離與所屬高速公路。  
3. 載入所有節點與路段後，用搜尋演算法(本文範例採用 Stack + 遞迴的深度優先搜尋)列舉所有從起點到終點的路徑。  
4. 每條路徑計算「油錢(距離 × 2 元/km) + 過路費」的總成本，挑出花費最少者即為「最佳(最經濟)路線」。

## Q: 儲存高速公路地圖資料最適合使用什麼資料結構？
使用「圖形 (Graph)」結構最直觀且彈性最高：  
• Node 類別：Name、TollFee、List<Link>  
• Link 類別：FromNode、ToNode、Distance、RoadNameEnum  
如此可清楚描述「點」與「線」的關係，並支援後續路徑搜尋與成本計算。

## Q: 找最短／最省錢路徑應該選用哪類演算法？本文為何選擇 DFS + Stack？
常見做法有：  
1. 全枚舉暴力法  
2. Dijkstra、A\* 等較高效率的最短路徑演算法  
本文示範以「Stack + 遞迴的深度優先搜尋(DFS)」列舉所有可行路徑，邏輯簡單、易於理解與實作；雖然效率不如 Dijkstra，但對教學與小規模資料足夠。

## Q: 為何在搜尋過程中要把「是否走過此節點」的判斷由 Stack.Contains() 改成 HashSet.Contains()？
Stack.Contains() 為 O(n) 線性搜尋；當節點數量增大時成本顯著。  
改用 HashSet<string> 儲存已走訪節點，可將判斷時間降為 O(1)。空間多用一倍換得常數級查詢速度，是大規模圖搜尋中的高效做法。

## Q: 就效能而言，演算法／資料結構的選擇與程式微調哪個影響更大？
演算法與資料結構的選擇常帶來「倍數級」效能差異(例如 List 搜尋換成雜湊結構可達 6000 倍)。程式微調(少幾行、少幾次呼叫)通常只帶來百分比級提升。當資料量變大時，優先投資在演算法與資料結構的優化效果最顯著。