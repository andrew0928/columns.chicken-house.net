# 該如何學好「寫程式」#3：進階應用－資料結構＋問題分析

## 摘要提示
- 高速公路路徑規劃: 以台灣高速公路為例說明「起終點最佳路線」的實務需求。  
- Graph資料結構: 以 Node 與 Link 兩類別儲存交流道、收費站與路段資訊。  
- 成本函式: 將油耗與過路費合併為「總花費」作為最佳化目標。  
- DFS＋Stack: 以遞迴結合 Stack 的深度優先搜尋遍歷所有可能路徑。  
- 演算法決定效能: 換演算法通常帶來倍數級提升，遠勝微調程式碼或升級硬體。  
- HashSet優化: 以 O(1) 時間判斷「是否走過」取代 Stack.Contains 的 O(n) 線性搜尋。  
- 基礎能力: 「程式＝資料結構＋演算法」仍是解決複雜問題的核心。  
- 架構與美感: 作者偏向在可維護的架構中，再以正確資料結構與演算法確保效能。  
- 常見質疑: 不懂基礎也能寫程式？作者以範例反證基礎知識的重要性。  
- 進階道路: 從「把程式寫對」走向「把程式寫好」，下一步談軟體工程師觀點。  

## 全文重點
本文承接前兩篇「如何學好寫程式」系列，透過「高速公路路徑規劃」實例，示範進階問題應如何依序處理資料結構、演算法與程式架構。作者首先將地圖拆解為圖形結構，定義節點 Node（含名稱與過路費）與邊 Link（含距離、端點、高速公路編號），並以程式碼範例載入北台灣主要高速公路資料。接著針對「油耗＋過路費最小」的最佳化目標，採用遞迴＋Stack 的深度優先搜尋列舉所有路徑，再取出最便宜者。雖然此方法在大規模資料下效率有限，但邏輯清晰易懂，適合教學。  
作者進一步探討效能議題，強調演算法選擇遠優於小幅度程式優化；例如將 Stack.Contains(O(n)) 改為 HashSet.Contains(O(1))，即可在節點數量增加時顯著提速。最後總結「資料結構＋演算法」的重要性，回應「只靠框架或資料庫即可」等常見疑慮，並預告後續將從 programmer 邁向 software engineer，討論如何「把程式寫好」的更高層次議題。

## 段落重點
### 1. 問題描述：高速公路最佳路線
作者提出「使用者輸入起點終點，程式輸出最省錢路線」的需求，指出此問題兼具資料複雜度與演算法挑戰，是比前篇「單純搜尋」更貼近實務的範例。

### 2. 資料結構設計：Node 與 Link
為保存地圖資訊，將交流道與收費站定義為 Node，並以 List<Link> 紀錄相鄰路段；Link 則存放端點、距離與道路編號。此圖形結構（Graph）是後續演算法運作的基礎。

### 3. 資料載入與初步建構
示範 Map 類別如何以 Dictionary 快速索引 Node，再透過 AddNode／AddLink 方法把北台灣主要高速公路連線資料寫入，完成問題「第一關」。

### 4. 搜尋演算法：DFS＋遞迴
以「走迷宮」思維，用遞迴深度優先搜尋列舉所有可達路徑；Stack 保存走過的節點以避免循環，當抵達終點即計算總成本，取最小值即得最佳路線。

### 5. 效能思考與 HashSet 優化
說明演算法效率對整體效能的影響遠大於微調程式碼，並舉將 Stack.Contains 改用 HashSet 判斷重覆節點的例子，展示 O(n) 與 O(1) 的差異及其乘數級效能提升。

### 6. 基礎重要性與常見質疑
作者回應「不懂資料結構也能寫程式」等質疑，強調不知道正確模型便無法正確建表或選用框架；同時指出資料庫效能問題本質仍與資料結構相通。

### 7. 結語與下一步
總結「程式 = 資料結構＋演算法」的核心觀念，並指出自己在架構與可維護性上的取向；預告系列第二部將轉向「如何把程式寫好」的軟體工程師視角。