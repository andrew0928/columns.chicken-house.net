# 終於升級上來了...

## 問題與答案 (FAQ)

### Q&A 類別 A: 概念理解類

Q1: 什麼是網站或部落格系統的「升級」？
- A簡: 升級是以新版核心、外掛、主題與資料庫變更，提升功能、安全與相容性。
- A詳: 升級指將網站或部落格系統的核心程式、外掛、主題與資料庫結構更新至較新版本，以獲得功能改進、安全修補與效能優化。其特點包括範圍大、可能涉及相依性調整與資料結構遷移。應用場景涵蓋安全漏洞修補、導入新功能（如編輯器表情支援）、修正既有問題（如自動登入）、維持與新環境（作業系統、瀏覽器、PHP/Node）相容。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q2, B-Q1, C-Q1

Q2: 為什麼需要定期進行網站升級？
- A簡: 為安全修補、新功能、相容性與效能，降低技術債與營運風險。
- A詳: 升級能修補安全漏洞、導入新功能（如編輯器直接插入表情）、提升效能與穩定度，並確保與瀏覽器、作業系統、資料庫、外掛生態的相容性。長期不升級將累積技術債，提高停機與資料外洩風險，也可能導致外掛與主題無法運作。定期升級並驗證可還原是穩健營運的必要投資。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q1, A-Q10, B-Q14

Q3: 「升級」與「更新」有何差異？
- A簡: 更新多為小幅修補；升級常含重大變更與可能不相容。
- A詳: 一般而言，更新著重小幅修補（如修正錯字、微調樣式、修補小漏洞），風險較低；升級則涵蓋核心、外掛、主題與資料庫架構的重大變更，可能帶來不相容風險。以語意化版本觀點，PATCH/MINOR偏更新，MAJOR偏升級。升級需備份、預備環境演練、相依性檢查與回滾計畫。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q9, B-Q1, B-Q10

Q4: 客製化與設定的差異是什麼？
- A簡: 設定透過介面或檔案切換參數；客製化是改動程式碼。
- A詳: 設定是以後台或設定檔調整參數，不改動原始碼，易於升級且可預測。客製化多為直接改程式、主題或外掛，帶來升級衝突與維護成本。最佳實務是優先使用設定、掛勾與子主題，避免覆蓋原始檔，並將必要客製集中化、版本控制與文件化。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q5, A-Q15, B-Q6

Q5: 主題（Theme）與外掛（Plugin）有何不同？
- A簡: 主題負責外觀呈現；外掛提供功能擴充與整合。
- A詳: 主題決定網站視覺與模板輸出，著重版型、樣式與字型資產；外掛則擴充功能，如登入、SEO、編輯器表情、快取。升級時主題相容性影響展示；外掛相依性影響功能。建議以子主題保存樣式調整，以外掛掛勾擴充功能，降低升級衝突風險。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q5, B-Q6, C-Q4

Q6: 什麼是「記住我」自動登入？
- A簡: 透過長時效安全 Cookie/Token，跨重啟維持登入狀態。
- A詳: 「記住我」會在成功登入後核發長時效的安全 Cookie 或 Token，伺服器驗證其有效性，即使關閉瀏覽器也保留登入。其特點是便利性高、需嚴格安全控制（Secure、HttpOnly、SameSite、裝置綁定、撤銷機制）。適用於個人部落格與低風險後台，但應搭配超時與風險偵測。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, D-Q1, D-Q9

Q7: HTML 編輯器的表情符號支援是什麼？
- A簡: 編輯器內建或外掛按鈕，插入 Unicode 或圖像表情。
- A詳: 編輯器可透過內建或外掛提供表情面板，插入 Unicode Emoji 或圖像 Sprites。特點是提升內容表達與可讀性；需注意字型支援、CDN 資產與相容性。適用於部落格、社群貼文與教學內容編寫。升級新版編輯器常內建此功能，減少自改成本。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, C-Q6, D-Q2

Q8: 什麼是向後相容性（Backward Compatibility）？
- A簡: 新版維持舊版 API/行為可用，降低升級破壞性。
- A詳: 向後相容性指新版本仍支援舊版公開介面、資料格式與行為，讓既有主題、外掛與自動化流程能正常運作。特點是降低升級風險、延長過渡期；常搭配棄用標記與相容層。適用於大型生態系統，讓使用者平滑升級與逐步重構。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q8, B-Q10, D-Q7

Q9: 什麼是語意化版本（SemVer）？
- A簡: 以 MAJOR.MINOR.PATCH 表示變更等級與相容性。
- A詳: 語意化版本用 MAJOR.MINOR.PATCH 表示：MAJOR 有破壞性變更、MINOR 向後相容的功能新增、PATCH 錯誤修補。特點是可預期風險、便於相依檢查與策略性升級。應用於核心、外掛與主題版本管理，協助制定升級計畫與測試重點。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: A-Q3, B-Q10, C-Q1

Q10: 升級風險管理的核心價值是什麼？
- A簡: 以備份、演練、檢查與回滾，確保穩定、可恢復。
- A詳: 風險管理聚焦於降低停機、資料遺失與功能中斷。關鍵作法包括完整備份與還原驗證、預備環境演練、相依性檢查、變更凍結、回滾計畫、監控與通報。價值在於可控可回復，提升升級信心與交付品質，兼顧速度與穩定。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q1, C-Q2, B-Q13

Q11: 預備環境（Staging）有何作用？
- A簡: 在類生產環境先演練升級與驗收，降低風險。
- A詳: 預備環境是與生產相近的測試場域，用於演練升級、驗證功能、壓力與回歸測試。特點是可控、可重現、可快速回復，並隔離真實用戶。常見應用場景為大型升級、資料庫遷移、前端主題改版與外掛更替。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q12, C-Q3, C-Q8

Q12: 差異比對（Diff/Merge）在升級中的意義？
- A簡: 識別自改與上游變更差異，安全合併降低衝突。
- A詳: 升級時需比較上游新版本與本地自改之差異，藉由三方合併保留自改又導入修補。特點是可視化差異、逐行審閱、衝突標記與解決。適用於主題、外掛與設定檔，避免直接覆蓋導致功能損壞。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q11, C-Q7, A-Q15

Q13: 版本控制（如 Git）對升級有何幫助？
- A簡: 以分支、標記與回滾管理變更，可追蹤可審核。
- A詳: 版本控制可建立升級分支、標記釋出與回滾點，支援差異比對、變更審查與協作。特點是可追溯、可回復、可自動化（CI/CD）。適用於管理主題與外掛自改、合併上游與撰寫遷移腳本，降低升級不確定性。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q11, C-Q7, B-Q13

Q14: 什麼是回滾（Rollback）？
- A簡: 當升級異常時，迅速恢復至前一穩定版本。
- A詳: 回滾是將程式與資料恢復至既定的穩定狀態，常結合映像快照、版本標記與資料庫備份。特點是縮短中斷時間、保護資料一致性。應用於升級失敗、重大缺陷或性能回歸。需預先演練與明確決策門檻（何時回滾）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q13, C-Q9, D-Q4

Q15: 為何直接改主題檔會讓升級變麻煩？
- A簡: 上游覆蓋易失改動，衝突多；應用子主題隔離。
- A詳: 直接改主題原始檔，升級時容易被上游覆蓋，且與新版差異衝突難解，導致耗時。改動分散、缺文件更增加風險。建議採子主題覆寫模板、以掛勾擴充邏輯、版本控制與變更記錄，將衝突面降至最小。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: C-Q4, C-Q7, B-Q5

### Q&A 類別 B: 技術原理類

Q1: 網站升級流程如何運作？
- A簡: 以備份、演練、相依檢查、部署與驗收構成閉環。
- A詳: 技術原理說明：升級是受控變更流程，涵蓋程式、外掛、主題與資料庫。關鍵步驟或流程：研讀發行說明與相容性矩陣、完整備份、預備環境演練、相依檢查、套用程式與遷移、回歸測試、發布與監控。核心組件介紹：版本控制、套件管理器、資料庫遷移工具、CI/CD、監控告警。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q1, A-Q10, C-Q1

Q2: 「記住我」自動登入背後機制是什麼？
- A簡: 以長效 Token Cookie 與伺服器驗證、輪替與撤銷。
- A詳: 技術原理說明：登入後簽發長效 Token，瀏覽器存於安全 Cookie；伺服器以資料庫或快取驗證 Token 與裝置指紋。關鍵步驟或流程：發放（簽名、設旗標）、驗證（查表/重算）、輪替（一次性使用）、撤銷（登出/竄改）。核心組件介紹：認證服務、Token 儲存（DB/Redis）、Cookie 屬性（Secure/HttpOnly/SameSite）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q6, D-Q1, D-Q9

Q3: Session 與 Cookie 的運作差異是什麼？
- A簡: Session 存伺服端狀態，Cookie 存客端資料。
- A詳: 技術原理說明：Session 以 ID 對應伺服端狀態；Cookie 為瀏覽器隨請求附帶的鍵值。關鍵步驟或流程：建立 Session、回傳 SessionID Cookie、後續請求查找狀態；Cookie 設定屬性與有效期。核心組件介紹：Session Store（如 Redis）、Cookie Jar、序列化與加密模組。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q2, D-Q1, D-Q9

Q4: HTML 編輯器插入表情的技術原理為何？
- A簡: 以外掛面板插入 Unicode 或圖像，靠資產管線支援。
- A詳: 技術原理說明：編輯器註冊表情外掛，提供 UI 面板選取符號，插入 Unicode 或 <img> 標籤。關鍵步驟或流程：載入外掛、渲染工具列、資產載入、插入節點、存儲。核心組件介紹：編輯器核心（TinyMCE/Quill 等）、外掛模組、資產管線（字型/CDN 圖片）、序列化器。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q7, C-Q6, D-Q2

Q5: 主題系統的載入與覆寫機制如何設計？
- A簡: 以模板階層與子主題覆寫，逐一解析載入。
- A詳: 技術原理說明：主題載入遵循模板階層，先找子主題覆寫，缺失時回退至母主題。關鍵步驟或流程：解析請求路由、定位模板、合併樣式與腳本、渲染。核心組件介紹：模板載入器、資產管理器、子主題繼承關係與掛勾系統，支援安全升級。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q5, A-Q15, C-Q4

Q6: 外掛掛勾（Hooks）與事件系統如何工作？
- A簡: 以動作/過濾器註冊回呼，按優先序分派執行。
- A詳: 技術原理說明：核心在特定時機拋出事件，外掛以動作（Action）或過濾器（Filter）接入。關鍵步驟或流程：註冊回呼、維護優先序、事件分派、收集回傳。核心組件介紹：掛勾註冊表、事件迴圈、優先序排序與錯誤隔離機制。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q4, B-Q5, D-Q7

Q7: 資料庫遷移（Migration）流程與設計重點？
- A簡: 以版本化腳本向前/回滾，確保資料一致與可追溯。
- A詳: 技術原理說明：遷移以版本化腳本描述結構/資料變更。關鍵步驟或流程：產生遷移、排序執行、驗證、回滾。核心組件介紹：遷移引擎、版本紀錄表、交易控制、鎖機制與乾跑（Dry-run），確保零資料遺失與快速恢復。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: C-Q9, B-Q13, D-Q6

Q8: 向後相容性機制如何設計？
- A簡: 以相容層、特性旗標與棄用策略平滑過渡。
- A詳: 技術原理說明：以相容層（Adapter/Shim）包裝新舊 API，並引入特性旗標控制行為。關鍵步驟或流程：標註棄用、雙軌支援、遷移指南、逐步移除。核心組件介紹：相容層模組、旗標管理、契約測試與記錄告警，降低破壞性變更衝擊。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: A-Q8, B-Q10, D-Q7

Q9: 升級前後的相依性檢查流程如何進行？
- A簡: 解析版本需求，建立相容矩陣並做衝突檢測。
- A詳: 技術原理說明：透過套件描述檔與外掛中繼資料解析相依。關鍵步驟或流程：蒐集版本需求、比對 SemVer、建立相容矩陣、偵測衝突、產出建議。核心組件介紹：相依解析器、版本規則引擎、報表器與快取，支援自動化 CI 檢查。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q9, B-Q1, D-Q7

Q10: 語意化版本與相容性矩陣如何制定？
- A簡: 依 MAJOR/MINOR/PATCH 定義支援範圍與測試層級。
- A詳: 技術原理說明：以 SemVer 將改動分級，並對應測試深度與支援政策。關鍵步驟或流程：界定破壞性變更、標註棄用、發布路線圖、建立外掛/主題相容矩陣。核心組件介紹：版本政策、CI 測試矩陣、外掛相容標章與文件門檻。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q3, A-Q9, B-Q8

Q11: 三方合併（Three-way merge）的核心步驟？
- A簡: 以共同基底比較當前與上游，解析並解衝突。
- A詳: 技術原理說明：合併基於共同祖先，計算兩邊差異後嘗試自動融合。關鍵步驟或流程：定位 base、計算 diff、套用 patch、標記衝突、人工解決。核心組件介紹：差異引擎、衝突標記器、合併策略（ours/theirs）、檔案忽略規則。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q12, C-Q7, B-Q13

Q12: 預備環境的部署架構如何設計？
- A簡: 與生產同構，使用獨立資源與變數隔離。
- A詳: 技術原理說明：Staging 應盡量同構於生產，隔離憑證與第三方整合。關鍵步驟或流程：複製程式、回填資料快照、設定環境變數、禁寄真郵件/金流沙箱、接入監控。核心組件介紹：CI 管線、環境變數管理、快照儲存、功能旗標。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, C-Q3, C-Q2

Q13: 回滾機制與快照如何實作？
- A簡: 以版本標記、映像快照與備份腳本，一鍵恢復。
- A詳: 技術原理說明：程式回滾靠不可變工件與版本標記；資料回滾靠資料庫快照/備份。關鍵步驟或流程：建立釋出工件、拍快照、驗證還原、定義開關條件。核心組件介紹：Artifact 儲存、資料庫備份（熱/冷備）、基礎設施快照（VM/容器）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q14, C-Q9, D-Q4

Q14: 效能回歸檢測流程與指標為何？
- A簡: 以基準、監控與合成測試，對比發佈前後。
- A詳: 技術原理說明：建立基準指標，升級後比對差異。關鍵步驟或流程：選定 KPI（TTFB、LCP、RPS）、壓測與合成監測、觀測異常、回因分析。核心組件介紹：APM、指標收集（Prometheus）與可視化（Grafana）、合成監測（Pingdom）。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q10, D-Q5, C-Q10

Q15: 日誌與監控在升級中的作用是什麼？
- A簡: 提供可觀測性，快速定位錯誤並評估影響面。
- A詳: 技術原理說明：集中化日誌與指標監控提供即時可視。關鍵步驟或流程：擴大日誌層級、關鍵路徑追蹤、設告警門檻、關閉後回收。核心組件介紹：Log 收集（ELK/CloudWatch）、APM、告警通道（Email/Slack），支援快速決策回滾。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, C-Q10, D-Q4

### Q&A 類別 C: 實作應用類

Q1: 如何規劃一次安全的網站升級？
- A簡: 明確範圍時程、備份回滾、演練驗收與通報機制。
- A詳: 具體實作步驟：定義升級目標與範圍、盤點相依、擬定時程與凍結期、風險評估與回滾條件、建立測試清單、安排預備環境演練。關鍵程式碼片段或設定：以 Git 建立 release 分支與 tag。注意事項與最佳實踐：務必先備份並驗證可還原，指定負責人與通報流程，選離峰時段發布。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, A-Q10, C-Q8

Q2: 如何備份並驗證可還原？
- A簡: 做程式與資料庫雙備份，實測還原於預備環境。
- A詳: 具體實作步驟：程式打包（tar/zip）與版本標記；資料庫使用 mysqldump/pg_dump；雲端儲存異地。關鍵程式碼片段或設定：mysqldump -u... > backup.sql；tar -czf site.tgz ./。注意事項與最佳實踐：定期演練還原於 Staging，校驗檔案雜湊，分層備份、權限與保留政策。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q13, C-Q3, D-Q6

Q3: 如何在預備環境進行升級演練？
- A簡: 複製程式與資料，套用升級並依清單驗收。
- A詳: 具體實作步驟：Clone 版本庫、還原資料庫快照、設定 .env 指向測試資源、安裝依賴（composer/npm）、套用升級與遷移、跑測試與人工驗收。關鍵程式碼片段或設定：.env STAGING=true；php artisan migrate。注意事項與最佳實踐：隔離金流/郵件、清快取、開啟除錯與日誌擴增。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q11, B-Q12, C-Q8

Q4: 如何以子主題（Child Theme）避免自改原主題？
- A簡: 建立子主題繼承，僅覆寫必要模板與樣式。
- A詳: 具體實作步驟：建立子主題資料夾與 style.css 標頭註明 Template；新增 functions.php 載入父主題樣式；需要時覆寫模板檔。關鍵程式碼片段或設定：/* Template: parent-theme */；wp_enqueue_style('parent'). 注意事項與最佳實踐：僅覆寫差異，撰寫變更記錄，避免改父主題檔，升級更穩。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q15, B-Q5, C-Q7

Q5: 如何修復「無法自動記住登入使用者」？
- A簡: 檢查 Cookie 設定、網域/路徑、安全旗標與伺服驗證。
- A詳: 具體實作步驟：確認設置 remember-me Cookie、有效期與網域；伺端驗證 Token 並輪替。關鍵程式碼片段或設定：Set-Cookie: remember=...; Max-Age=1209600; Secure; HttpOnly; SameSite=Lax。注意事項與最佳實踐：一致的網域與 HTTPS、登出時撤銷 Token、限制裝置數與暴力攻擊防護。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, D-Q1, D-Q9

Q6: 如何為 HTML 編輯器啟用表情符號？
- A簡: 啟用相關外掛、載入資產並驗證字型/Unicode 支援。
- A詳: 具體實作步驟：於編輯器設定加入 emoji 插件並顯示工具列；確認字型或圖像資產可載入。關鍵程式碼片段或設定：tinymce.init({plugins:'emoji',toolbar:'emoji'}); 或開啟對應外掛。注意事項與最佳實踐：優先使用 Unicode，圖像資產走 CDN 與快取破壞；相容性測試於多瀏覽器。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, D-Q2, A-Q7

Q7: 如何做差異比對並合併自改檔案？
- A簡: 使用 Git 三方合併，逐檔審閱並解決衝突。
- A詳: 具體實作步驟：拉上游新版至分支、以 git merge 或 rebase、檢視衝突逐檔解決、執行測試。關鍵程式碼片段或設定：git fetch upstream; git merge upstream/main；git mergetool。注意事項與最佳實踐：避免改 vendor 檔、變更小步提交、撰寫合併紀錄與回歸測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: A-Q12, B-Q11, A-Q13

Q8: 如何撰寫升級測試清單與驗收項目？
- A簡: 聚焦關鍵路徑：登入、編輯、外觀、交易與日誌。
- A詳: 具體實作步驟：盤點關鍵功能與風險點、制定用例與驗收標準、標註阻斷級別。關鍵程式碼片段或設定：以自動化測試覆蓋登入、編輯器、主題渲染與 API；human checklist。注意事項與最佳實踐：以發行說明標示變更優先測，回歸核心流程，保留測試證據（截圖/日誌）。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q1, C-Q3, B-Q15

Q9: 如何執行資料庫遷移與回滾？
- A簡: 以版本化遷移腳本執行，前後皆有備份驗證。
- A詳: 具體實作步驟：檢視遷移腳本、建立備份、停/降流量、執行 migrate、驗證資料與索引、需要時 rollback。關鍵程式碼片段或設定：php artisan migrate/rollback；ALTER TABLE ...。注意事項與最佳實踐：可逆遷移、交易化、乾跑、慢查與鎖時間評估，嚴格變更控管。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, B-Q13, D-Q6

Q10: 如何發布後監控與快速回應問題？
- A簡: 設指標與告警門檻，觀測異常即評估回滾。
- A詳: 具體實作步驟：設置關鍵指標與錯誤率告警、擴大日誌層級、建立戰情室與通報；觀測穩定後收斂監控。關鍵程式碼片段或設定：PromQL 門檻、APM 追蹤樣本率。注意事項與最佳實踐：金絲雀或漸進發布、明確回滾門檻、用戶溝通與事後檢討改進。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q14, B-Q15, A-Q14

### Q&A 類別 D: 問題解決類

Q1: 升級後無法自動登入怎麼辦？
- A簡: 檢查 Cookie 網域/旗標/有效期與伺端 Token 驗證。
- A詳: 問題症狀描述：每次重新開啟瀏覽器需重登。可能原因分析：Cookie 未設或過期、網域/路徑不符、未設 Secure/SameSite、伺端未驗證或未保存 Token。解決步驟：檢視 Set-Cookie、修正網域與旗標、確認 Token 儲存與輪替、同步時鐘。預防措施：統一 HTTPS、回歸測試「記住我」、安全審核。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q2, C-Q5, D-Q9

Q2: 升級後 HTML 編輯器無法插入表情？
- A簡: 啟用表情外掛、載入資產並檢查字型相容性。
- A詳: 問題症狀描述：按鈕消失或插入為空白方塊。可能原因分析：外掛未載入、資產 404、Unicode 字型不支援、CSP 限制。解決步驟：啟用插件、確認資產 URL、放寬 CSP、改用 Unicode。預防措施：在 Staging 驗證資產、設定快取破壞、維護相容矩陣。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q4, C-Q6, A-Q7

Q3: 升級後主題跑版或樣式壞掉怎處理？
- A簡: 清快取、檢查子主題覆寫與相依資產版本。
- A詳: 問題症狀描述：版面錯位、圖示遺失。可能原因分析：CSS/JS 版本不符、主題模板變更、快取殘留。解決步驟：清除 CDN/瀏覽器快取、檢查子主題覆寫檔、比對差異合併、修正資產版本。預防措施：子主題實作、資產版本化、升級前視覺回歸測試。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q5, C-Q4, C-Q7

Q4: 升級後出現 500 伺服器錯誤怎麼辦？
- A簡: 查看日誌、停用可疑外掛、評估回滾與依賴版本。
- A詳: 問題症狀描述：頁面 500。可能原因分析：語法錯誤、PHP/Runtime 版本不符、外掛不相容、遷移失敗。解決步驟：檢視 error log、開啟除錯、停用外掛/切預設主題、回滾程式或資料庫、修正依賴。預防措施：CI 測試、版本鎖定、金絲雀發布與快照回滾。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q15, B-Q13, A-Q14

Q5: 為何升級後效能變慢？如何改善？
- A簡: 快取失效、查詢變重或資產膨脹，需調優與回歸。
- A詳: 問題症狀描述：回應時間上升。可能原因分析：快取未命中、DB 查詢改動、資產檔案增大、外掛耗時。解決步驟：暖快取、分析慢查、啟用壓縮與資產拆分、調整外掛。預防措施：建立效能基準、壓測與合成監測、發佈後密切觀測。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q14, C-Q10, A-Q10

Q6: 升級時資料庫遷移失敗怎麼辦？
- A簡: 立即停手、回復備份、修腳本並乾跑重試。
- A詳: 問題症狀描述：migrate 報錯或卡住。可能原因分析：權限不足、鎖表、資料不一致、腳本不可逆。解決步驟：回復備份/快照、離峰重試、分批遷移、加索引與交易、修復資料。預防措施：預演、乾跑、可逆腳本、鎖時間評估與監控。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q7, C-Q9, B-Q13

Q7: 外掛相容性衝突如何處理？
- A簡: 逐一停用定位、查相容矩陣、升級或更換外掛。
- A詳: 問題症狀描述：白畫面、功能異常。可能原因分析：使用棄用 API、版本不符、掛勾順序衝突。解決步驟：二分法停用外掛、檢視日誌與相容說明、升級外掛或替代、回報維護者。預防措施：升級前檢查矩陣、Staging 演練、控制外掛數量與來源品質。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q6, B-Q9, B-Q8

Q8: 升級後資產快取導致樣式/腳本異常？
- A簡: 清除 CDN/瀏覽器快取，採版本化與哈希。
- A詳: 問題症狀描述：載入舊 CSS/JS。可能原因分析：CDN/瀏覽器快取未更新、Cache-Control 不當。解決步驟：清快取、於資產檔名加哈希或 query version、調整到期。預防措施：建置資產管線、Cache Busting、發佈流程內建清快取步驟。
- 難度: 初級
- 學習階段: 基礎
- 關聯概念: B-Q5, C-Q10, D-Q3

Q9: 升級後登入重導向迴圈怎處理？
- A簡: 檢查 Base URL、HTTP/HTTPS 與 Cookie 旗標設定。
- A詳: 問題症狀描述：登入後跳回登入頁。可能原因分析：Base URL 錯、跨網域 Cookie、SameSite/ Secure 不符、反向代理設定。解決步驟：校正站台 URL、強制 HTTPS、修 Cookie 屬性、調整反代頭。預防措施：環境一致、Staging 驗證、記錄變更。
- 難度: 中級
- 學習階段: 核心
- 關聯概念: B-Q3, B-Q2, C-Q5

Q10: 如何診斷升級後偶發性錯誤？
- A簡: 擴大觀測，收斂最小重現並以功能旗標降風險。
- A詳: 問題症狀描述：間歇性 4xx/5xx 或 UI 異常。可能原因分析：競態、時序差異、資源限額、第三方不穩。解決步驟：增量開啟日誌與追蹤、建立重現案例、金絲雀/逐步放量、隔離問題模組。預防措施：特性旗標、故障預演、混沌工程與事後檢討。
- 難度: 高級
- 學習階段: 進階
- 關聯概念: B-Q15, B-Q14, C-Q10

### 學習路徑索引
- 初學者：建議先學習哪 15 題
    - A-Q1: 什麼是網站或部落格系統的「升級」？
    - A-Q2: 為什麼需要定期進行網站升級？
    - A-Q3: 「升級」與「更新」有何差異？
    - A-Q5: 主題（Theme）與外掛（Plugin）有何不同？
    - A-Q4: 客製化與設定的差異是什麼？
    - A-Q7: HTML 編輯器的表情符號支援是什麼？
    - A-Q6: 什麼是「記住我」自動登入？
    - A-Q9: 什麼是語意化版本（SemVer）？
    - A-Q11: 預備環境（Staging）有何作用？
    - A-Q12: 差異比對（Diff/Merge）在升級中的意義？
    - A-Q13: 版本控制（如 Git）對升級有何幫助？
    - A-Q15: 為何直接改主題檔會讓升級變麻煩？
    - B-Q1: 網站升級流程如何運作？
    - B-Q3: Session 與 Cookie 的運作差異是什麼？
    - C-Q1: 如何規劃一次安全的網站升級？

- 中級者：建議學習哪 20 題
    - B-Q2: 「記住我」自動登入背後機制是什麼？
    - B-Q4: HTML 編輯器插入表情的技術原理為何？
    - B-Q5: 主題系統的載入與覆寫機制如何設計？
    - B-Q6: 外掛掛勾（Hooks）與事件系統如何工作？
    - B-Q7: 資料庫遷移（Migration）流程與設計重點？
    - B-Q9: 升級前後的相依性檢查流程如何進行？
    - B-Q11: 三方合併（Three-way merge）的核心步驟？
    - B-Q12: 預備環境的部署架構如何設計？
    - B-Q13: 回滾機制與快照如何實作？
    - B-Q15: 日誌與監控在升級中的作用是什麼？
    - C-Q2: 如何備份並驗證可還原？
    - C-Q3: 如何在預備環境進行升級演練？
    - C-Q4: 如何以子主題（Child Theme）避免自改原主題？
    - C-Q5: 如何修復「無法自動記住登入使用者」？
    - C-Q6: 如何為 HTML 編輯器啟用表情符號？
    - C-Q7: 如何做差異比對並合併自改檔案？
    - C-Q8: 如何撰寫升級測試清單與驗收項目？
    - C-Q9: 如何執行資料庫遷移與回滾？
    - C-Q10: 如何發布後監控與快速回應問題？
    - A-Q10: 升級風險管理的核心價值是什麼？

- 高級者：建議關注哪 15 題
    - B-Q8: 向後相容性機制如何設計？
    - B-Q10: 語意化版本與相容性矩陣如何制定？
    - B-Q14: 效能回歸檢測流程與指標為何？
    - D-Q1: 升級後無法自動登入怎麼辦？
    - D-Q2: 升級後 HTML 編輯器無法插入表情？
    - D-Q3: 升級後主題跑版或樣式壞掉怎處理？
    - D-Q4: 升級後出現 500 伺服器錯誤怎麼辦？
    - D-Q5: 為何升級後效能變慢？如何改善？
    - D-Q6: 升級時資料庫遷移失敗怎麼辦？
    - D-Q7: 外掛相容性衝突如何處理？
    - D-Q8: 升級後資產快取導致樣式/腳本異常？
    - D-Q9: 升級後登入重導向迴圈怎處理？
    - D-Q10: 如何診斷升級後偶發性錯誤？
    - C-Q9: 如何執行資料庫遷移與回滾？
    - A-Q15: 為何直接改主題檔會讓升級變麻煩？