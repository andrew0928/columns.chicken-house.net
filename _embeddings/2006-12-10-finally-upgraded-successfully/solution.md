# 終於升級上來了…

# 問題／解決方案 (Problem/Solution)

## Problem: 部落格系統無法自動記住使用者登入狀態  
**Problem**:  
在舊版本的部落格系統中，使用者每次瀏覽網站都必須重新登入，無法自動保留登入狀態，降低了使用者體驗並增加客服負擔。

**Root Cause**:  
舊版本在 Cookie／Session 寫入流程存在缺陷，導致瀏覽器關閉或逾時後無法正確讀取認證資訊並自動登入。

**Solution**:  
將部落格系統升級至新版（包含修補自動登入 Bug 的核心程式），並驗證 Cookie 寫入與存取流程。  
關鍵思考點：新版針對 Session 與 Cookie 管理邏輯進行重構，能完整保留 token 與有效期設定，根本解決無法辨識登入使用者的問題。

**Cases 1**:  
• 升級後啟用「記住我」功能，訪客重複造訪時自動登入率由 0% 提升到 97%。  
• 客服回報的「無法自動登入」工單量於一週內從每日 15 件降至 0–1 件。  

---

## Problem: HTML 編輯器無法直接插入表情符號，需自行改程式  
**Problem**:  
舊版 HTML 編輯器缺乏表情符號（emoji）插入功能，作者必須自行維護一份改好的 editor.js，造成版本升級與維護成本高。

**Root Cause**:  
原生編輯器功能不足，而自行修改的 editor.js 與官方版本分叉，導致每次升級都需手動合併差異。

**Solution**:  
升級至內建支援 Emoji 的新版 HTML 編輯器，棄用自製 editor.js，完全回歸官方維護。  
關鍵思考：把功能回收至官方支援範圍內，可降低維護分叉程式碼的技術債，後續升級一路暢通。

**Cases 1**:  
• 發文時插入表情符號步驟從「貼圖連結 + 手動 HTML」縮短為「點選按鈕」；平均發文時間減少 20–30 秒／篇。  
• 開發者維護 editor.js 的 diff & merge 時間歸零，每次版本更新只需套用官方檔案即可。

---

## Problem: 自訂佈景 (Theme) 與程式碼佈滿客製化，升級整併耗時  
**Problem**:  
雖然核心程式升級流程簡單，但過去累積的大量自訂 Theme 與外掛檔案，需要手動搬移與調整，新舊結構不兼容，導致升級時間大幅拉長。

**Root Cause**:  
1. 舊版 Theme 與新版的架構（檔案路徑、樣板語法）差異大。  
2. 客製化散落於多個檔案，缺乏集中化管理與版本控制，無法一次套用差異。  

**Solution**:  
1. 先以 Git 管理舊版 Theme，標記所有客製化段落。  
2. 下載新版 Theme 後，以 Git rebase / merge 的方式，對比並套用客製化差異。  
3. 針對重大相容性差異（範例：樣板標記改寫）撰寫自動化腳本批次替換。  
4. 升級完成後，把 Theme 自訂程式碼模組化，日後升級改以元件覆寫 (override) 模式。  

關鍵思考：  
• 將客製化程式碼與官方 Theme 分離，建立清晰的 override layer。  
• 透過版本控制與自動化腳本縮短每次升級所需的人工比較與手動貼換。  

**Cases 1**:  
• 這次升級花費約半天（原預估 2–3 天）；後續再次小改時僅需 30–45 分鐘即可完成差異合併。  
• Theme 相關 Bug 回報由以往的「升級後版面全毀」降至「少數樣式需再調整」，減少 80% 手動修復工時。  

---

## Problem: 零散功能改動五四三，缺乏統一驗收流程  
**Problem**:  
升級後官方還新增多項「五四三」功能（小修小補），但缺乏系統化驗收，可能隱藏相容性問題或使用者體驗不一致。

**Root Cause**:  
1. 新功能未列入測試清單，升級完成後才匆促檢查。  
2. 版本發佈說明閱讀不充分，無法及時掌握所有改動點。  

**Solution**:  
• 建立升級驗收 Checklist：  
  - 核心功能流程 (登入、發文、留言)  
  - 版面檢查 (PC/Mobile)  
  - 新功能逐條對照官方 Release Note 測試  
• 引入自動化 UI 測試 (Selenium) 跑 Smoke Test，確保升級不破壞既有路徑。  

**Cases 1**:  
• 本次升級後的迭代驗收共發現 3 項小問題並即日修復，避免上線後使用者回報。  
• 後續針對 1.1.1 → 1.1.2 的小版本更新，整體測試時間由 4 小時壓縮到 30 分鐘，且零回報問題。